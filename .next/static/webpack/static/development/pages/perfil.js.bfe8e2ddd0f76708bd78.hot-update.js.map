{"version":3,"file":"static/webpack/static/development/pages/perfil.js.bfe8e2ddd0f76708bd78.hot-update.js","sources":["webpack:///./components/store/store.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { storeSections, ON_PRODUCTS, ON_WALLET, ON_STORE, ON_WISH } from '../../store/actions';\nimport './store.scss';\nimport products from '../../test/products';\nimport axios from 'axios';\nimport uuid from 'uuid/v1';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  return(\n    <div className=\"storehome_main_cont\">\n      <div className=\"cont_left\">\n        <button onClick={()=> dispatch({ type: storeSections.MUSIC })} id=\"music\">\n          <img src=\"/static/store/ms.jpg\" alt=\"\"/>\n          <span>musica</span>\n        </button>\n      </div>\n      <div className=\"cont_right\">\n        <button onClick={()=> dispatch({ type: storeSections.CANDY })} id=\"candy\">\n          <img src=\"/static/store/gol.jpg\" alt=\"\"/>\n          <span>golosinas</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.JEWEL })} className=\"four\" id=\"jewel\">\n          <img src=\"/static/store/bis.jpg\" alt=\"\"/>\n          <span>bisuteria</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.TOY })} className=\"four\" id=\"toy\">\n          <img src=\"/static/store/ty.jpg\" alt=\"\"/>\n          <span>juguetes</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.EBOOK })} className=\"four\" id=\"ebook\">\n          <img src=\"/static/store/eb.jpg\" alt=\"\"/>\n          <span>ebook's</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.TV })} className=\"four\" id=\"tv\">\n          <img src=\"/static/store/tv.jpg\" alt=\"\"/>\n          <span>tv's</span>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nconst Category = ({ tag }) => {\n  const items = useSelector(state => state.greenstore.items);\n  const products = items.filter(product => product.tag === tag);\n  const dispatch = useDispatch();\n\n  const onProduct = (e) => {\n    const product = products.find(product => product.id === e.target.id);\n    dispatch({ type: storeSections.PRODUCT, product })\n  }\n\n  return(\n    <div className=\"category_main_cont\">\n      <ul>\n        {\n          products.map(product => (\n            <li>\n              <button onClick={onProduct} id={product.id} className=\"shadow\">\n                <img id={product.id} src={product.img} alt=\"\"/>\n                <footer id={product.id}>\n                  <p id={product.id}>{product.name}</p>\n                  <p id={product.id}>${product.price}</p>\n                </footer>\n              </button>\n            </li>\n          ))\n        }\n      </ul>\n    </div>\n  )\n}\n\nconst Product = () => {\n  const product = useSelector(state => state.greenstore.current);\n  const uid = useSelector(state => state.user._id);\n  const dispatch = useDispatch();\n  const owner = useSelector(state => state.user.owner);\n  const [disable, setDisable] = useState(false);\n  const [note, setNote] = useState();\n  const onGift = async(e) => {\n    try{\n      e.preventDefault();\n      setDisable(true);\n      const data = { gift: product, uid, note };\n      await axios.post('/user/gift', data);\n      const parseCoin = parseInt(product.price, 10);\n      dispatch({ type: ON_WALLET, coin: -parseCoin });\n      setDisable(false);\n      dispatch({ type: ON_STORE });\n    }catch(err){\n      console.log(err);\n    }\n  }\n  const onWish = async(e) => {\n    try{\n      e.preventDefault();\n      setDisable(true);\n      const res = await axios.post('/green/wish', { product });\n      console.log(res.data);\n      dispatch({ type: ON_WISH, wish: res.data });\n      setDisable(false);\n      dispatch({ type: ON_STORE });\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return(\n    <div className=\"product_main_cont\">\n      <div className=\"row\">\n        <div className=\"col-12 col-md-6\">\n          <div className=\"img_cont\">\n            <img src={product.img} alt=\"\"/>\n          </div>\n        </div>\n        <div className=\"col-12 col-md-6\">\n          <div className=\"description_cont\">\n            <h1>{product.name}</h1>\n            <p>precio: ${product.price}</p>\n            <p>{product.description}</p>\n          </div>\n          <form onSubmit={owner ? onWish : onGift}>\n            { !owner && <textarea value={note} onChange={(e)=> setNote(e.currentTarget.value)} /> }\n            <footer>\n              <button onClick={()=> dispatch({ type: product.tag })}>atr√°s</button>\n              <button disabled={disable} type=\"submit\">{ owner ? 'agregar' : 'enviar' }</button>\n            </footer>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Store = () => {\n  const store = useSelector(state => state.greenstore);\n  const dispatch = useDispatch();\n  const onProducts = async ()=> {\n    try{\n      //const res = await axios.get('/products');\n      //dispatch({ type: ON_PRODUCTS, products: res.data });\n      dispatch({ type: ON_PRODUCTS, products });\n    }catch(err){\n      console.log(err);\n    }\n  };\n  useEffect(()=> {\n    onProducts();\n  },[])\n\n  return(\n    <div className=\"store_main_cont\">\n\n      {\n        store.home && <Home />\n      }\n      {\n        store.music && <Category tag={storeSections.MUSIC} />\n      }\n      {\n        store.candy && <Category tag={storeSections.CANDY} />\n      }\n      {\n        store.jewel && <Category tag={storeSections.JEWEL} />\n      }\n      {\n        store.toy && <Category tag={storeSections.TOY} />\n      }\n      {\n        store.ebook && <Category tag={storeSections.EBOOK} />\n      }\n      {\n        store.tv && <Category tag={storeSections.TV} />\n      }\n      {\n        store.product && <Product />\n      }\n    </div>\n  )\n};\n\nexport default Store;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAMA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AANA;AAeA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;AAAA;AACA;AADA;AAMA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AATA;AAAA;AACA;AADA;AAAA;AAAA;AAWA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAHA;AAAA;AAIA;AAAA;AACA;AALA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAYA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AAEA;AACA;AAAA;AAMA;AAAA;AAGA;AAAA;AAGA;AAAA;AAGA;AAAA;AAGA;AAAA;AAGA;AAAA;AAOA;AACA;AACA;;;;A","sourceRoot":""}