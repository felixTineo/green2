{"version":3,"file":"static/webpack/static/development/pages/perfil.js.631aab36ce82d132b779.hot-update.js","sources":["webpack:///./components/chat/friends.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_CHAT_FRIEND, ON_CHAT_PRIVATE, ON_CHAT_MINIMIZE, ON_CHAT_ALERT } from '../../store/actions';\nimport { color } from '../../layout/var';\nimport uuid from 'uuid/v1';\nimport persons from '../../test/persons';\nimport io from 'socket.io-client';\nimport axios from 'axios';\n\n//const friends = persons(8);\n\nconst Friend = ({ perfilImg, fullName, _id, url, chatHistory  }) => {\n  const dispatch = useDispatch();\n  const privates = useSelector(state => state.chat.privates);\n  const cuid = useSelector(state => state.nav.notifications.id);\n  useEffect(()=> {\n    const user = {\n      perfilImg,\n      fullName,\n      _id,\n      url,\n      chatHistory,\n      minimize: false,\n      anAlert: false,\n    }\n    const socket = io();\n    socket.open();\n    socket.on(`notification:${cuid}`, (_id) =>{\n      const isOpen = privates.find(user => user._id === _id);\n      console.log(_id);\n      if(isOpen && isOpen.minimize ){\n        dispatch({ type: ON_CHAT_ALERT, _id, option: true });\n      } else{\n        dispatch({ type: ON_CHAT_PRIVATE, user  });\n      }\n    });\n  },[privates])\n\n  const onPrivate = () => {\n    try{\n      const user = {\n        perfilImg,\n        fullName,\n        _id,\n        url,\n        chatHistory,\n        minimize: false,\n        anAlert: false,\n      }\n      const isOpen = privates.find(user => user._id === _id);\n      if(isOpen){\n        dispatch({ type: ON_CHAT_MINIMIZE, _id, option: false });\n      } else {\n        dispatch({ type: ON_CHAT_PRIVATE, user });\n      }\n      setTimeout(()=> document.getElementById(_id).focus(), 200);\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return(\n    <button onClick={onPrivate} type=\"button\">\n      <div>\n        <img src={perfilImg} alt=\"\"/>\n      </div>\n      <p>{fullName}</p>\n      <style jsx>{`\n        button{\n          background: transparent;\n          border: none;\n          transition: 250ms ease;\n          display: flex;\n          justify-content: flex-start;\n          align-items: center;\n          padding: 0;\n          border: 1px solid rgba(139, 185, 64, .4);\n          width: 100%;\n          text-transform: capitalize;\n        }\n        button:outline{\n          outline: none;\n        }\n        button:hover{\n          background: ${color.prim};\n          color: ${color.light};\n          border-color: ${color.sec};\n        }\n        p{\n          margin: 0;\n          color: ${color.dark};\n          margin-left: .5rem;\n        }\n        div{\n          background: ${color.dark};\n          width: 55px;\n          height: 45px;\n          border-left: 8px solid rgba(255, 255, 255, .4);\n        }\n        img{\n          width: 40px;\n          height: 40px;\n          object-fit: cover;\n          object-position: center;\n          border-radius: 50%;\n        }\n      `}\n      </style>\n    </button>\n  );\n}\n\nconst Friends = () => {\n  const [friends, setFriends] = useState([]);\n\n  const all = async() => {\n    try {\n      const res = await axios.get('/chat/all');\n      setFriends(res.data);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  useEffect(() => {\n    all();\n  },[])\n  return(\n    <div className=\"main\">\n      <header>chat</header>\n      <ul>\n        {\n          friends.map((friend) => <li key={uuid()}><Friend {...friend} /></li>)\n        }\n      </ul>\n      <style jsx>{`\n        .main{\n          height: calc(100vh - 40px);\n          background: rgba(0, 0, 0, 0.070);\n          position: sticky;\n          top: 42px;\n        }\n        header{\n          color: rgba(255, 255, 255, 0.7);\n          font-weight: 550;\n          background: ${color.prim};\n          padding: .5rem;\n          text-align: center;\n          text-transform: uppercase;\n        }\n        ul{\n          list-style: none;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 40px);\n          overflow: hidden;\n          overflow-y: scroll;\n          border-left: 2px solid ${color.sec};\n        }\n      `}\n      </style>\n    </div>\n  );\n}\n\nexport default Friends;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAJA;AAAA;AAAA;AAgDA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AACA;AADA;AAAA;AAAA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAJA;AAAA;AAAA;AAqCA;AACA;AACA;;;;A","sourceRoot":""}