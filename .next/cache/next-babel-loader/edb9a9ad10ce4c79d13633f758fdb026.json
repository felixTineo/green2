{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar _jsxFileName = \"/home/felix/Documentos/projects/greenlink/components/store/store.jsx\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { storeSections, ON_PRODUCTS, ON_WALLET, ON_STORE, ON_WISH } from '../../store/actions';\nimport './store.scss';\nimport products from '../../test/products';\nimport axios from 'axios';\nimport uuid from 'uuid/v1';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  return __jsx(\"div\", {\n    className: \"storehome_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"cont_left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.MUSIC\n    }),\n    id: \"music\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: \"/static/store/ms.jpg\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, \"musica\"))), __jsx(\"div\", {\n    className: \"cont_right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.CANDY\n    }),\n    id: \"candy\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: \"/static/store/gol.jpg\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, \"golosinas\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.JEWEL\n    }),\n    className: \"four\",\n    id: \"jewel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: \"/static/store/bis.jpg\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, \"bisuteria\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.TOY\n    }),\n    className: \"four\",\n    id: \"toy\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: \"/static/store/ty.jpg\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, \"juguetes\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.EBOOK\n    }),\n    className: \"four\",\n    id: \"ebook\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: \"/static/store/eb.jpg\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"ebook's\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.TV\n    }),\n    className: \"four\",\n    id: \"tv\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: \"static/store/tv.jpg\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"tv's\"))));\n};\n\nconst Category = ({\n  tag\n}) => {\n  const items = useSelector(state => state.greenstore.items);\n  const products = items.filter(product => product.tag === tag);\n  const dispatch = useDispatch();\n\n  const onProduct = e => {\n    const product = products.find(product => product.id === e.target.id);\n    dispatch({\n      type: storeSections.PRODUCT,\n      product\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"category_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, __jsx(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, products.map(product => __jsx(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    onClick: onProduct,\n    id: product.id,\n    className: \"shadow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    id: product.id,\n    src: product.img,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), __jsx(\"footer\", {\n    id: product.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    id: product.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, product.name), __jsx(\"p\", {\n    id: product.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"$\", product.price)))))));\n};\n\nconst Product = () => {\n  const product = useSelector(state => state.greenstore.current);\n  const uid = useSelector(state => state.user._id);\n  const dispatch = useDispatch();\n  const owner = useSelector(state => state.user.owner);\n  const {\n    0: disable,\n    1: setDisable\n  } = useState(false);\n  const {\n    0: note,\n    1: setNote\n  } = useState();\n\n  const onGift = async e => {\n    try {\n      e.preventDefault();\n      setDisable(true);\n      const data = {\n        gift: product,\n        uid,\n        note\n      };\n      await axios.post('/user/gift', data);\n\n      const parseCoin = _parseInt(product.price, 10);\n\n      dispatch({\n        type: ON_WALLET,\n        coin: -parseCoin\n      });\n      setDisable(false);\n      dispatch({\n        type: ON_STORE\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const onWish = async e => {\n    try {\n      e.preventDefault();\n      setDisable(true);\n      const res = await axios.post('/green/wish', {\n        product\n      });\n      console.log(res.data);\n      dispatch({\n        type: ON_WISH,\n        wish: res.data\n      });\n      setDisable(false);\n      dispatch({\n        type: ON_STORE\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"product_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"col-12 col-md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"img_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: product.img,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"col-12 col-md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"description_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, product.name), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"precio: $\", product.price), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, product.description)), __jsx(\"form\", {\n    onSubmit: owner ? onWish : onGift,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, !owner && __jsx(\"textarea\", {\n    value: note,\n    onChange: e => setNote(e.currentTarget.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), __jsx(\"footer\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: product.tag\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"atr\\xE1s\"), __jsx(\"button\", {\n    disabled: disable,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, owner ? 'agregar' : 'enviar'))))));\n};\n\nconst Store = () => {\n  const store = useSelector(state => state.greenstore);\n  const dispatch = useDispatch();\n\n  const onProducts = async () => {\n    try {\n      //const res = await axios.get('/products');\n      //dispatch({ type: ON_PRODUCTS, products: res.data });\n      dispatch({\n        type: ON_PRODUCTS,\n        products\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    onProducts();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"store_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, store.home && __jsx(Home, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }), store.music && __jsx(Category, {\n    tag: storeSections.MUSIC,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }), store.candy && __jsx(Category, {\n    tag: storeSections.CANDY,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }), store.jewel && __jsx(Category, {\n    tag: storeSections.JEWEL,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), store.toy && __jsx(Category, {\n    tag: storeSections.TOY,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }), store.ebook && __jsx(Category, {\n    tag: storeSections.EBOOK,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), store.tv && __jsx(Category, {\n    tag: storeSections.TV,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }), store.product && __jsx(Product, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }));\n};\n\nexport default Store;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/store/store.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","storeSections","ON_PRODUCTS","ON_WALLET","ON_STORE","ON_WISH","products","axios","uuid","Home","dispatch","type","MUSIC","CANDY","JEWEL","TOY","EBOOK","TV","Category","tag","items","state","greenstore","filter","product","onProduct","e","find","id","target","PRODUCT","map","img","name","price","Product","current","uid","user","_id","owner","disable","setDisable","note","setNote","onGift","preventDefault","data","gift","post","parseCoin","coin","err","console","log","onWish","res","wish","description","currentTarget","value","Store","store","onProducts","home","music","candy","jewel","toy","ebook","tv"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { storeSections, ON_PRODUCTS, ON_WALLET, ON_STORE, ON_WISH } from '../../store/actions';\nimport './store.scss';\nimport products from '../../test/products';\nimport axios from 'axios';\nimport uuid from 'uuid/v1';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  return(\n    <div className=\"storehome_main_cont\">\n      <div className=\"cont_left\">\n        <button onClick={()=> dispatch({ type: storeSections.MUSIC })} id=\"music\">\n          <img src=\"/static/store/ms.jpg\" alt=\"\"/>\n          <span>musica</span>\n        </button>\n      </div>\n      <div className=\"cont_right\">\n        <button onClick={()=> dispatch({ type: storeSections.CANDY })} id=\"candy\">\n          <img src=\"/static/store/gol.jpg\" alt=\"\"/>\n          <span>golosinas</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.JEWEL })} className=\"four\" id=\"jewel\">\n          <img src=\"/static/store/bis.jpg\" alt=\"\"/>\n          <span>bisuteria</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.TOY })} className=\"four\" id=\"toy\">\n          <img src=\"/static/store/ty.jpg\" alt=\"\"/>\n          <span>juguetes</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.EBOOK })} className=\"four\" id=\"ebook\">\n          <img src=\"/static/store/eb.jpg\" alt=\"\"/>\n          <span>ebook's</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.TV })} className=\"four\" id=\"tv\">\n          <img src=\"static/store/tv.jpg\" alt=\"\"/>\n          <span>tv's</span>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nconst Category = ({ tag }) => {\n  const items = useSelector(state => state.greenstore.items);\n  const products = items.filter(product => product.tag === tag);\n  const dispatch = useDispatch();\n\n  const onProduct = (e) => {\n    const product = products.find(product => product.id === e.target.id);\n    dispatch({ type: storeSections.PRODUCT, product })\n  }\n\n  return(\n    <div className=\"category_main_cont\">\n      <ul>\n        {\n          products.map(product => (\n            <li>\n              <button onClick={onProduct} id={product.id} className=\"shadow\">\n                <img id={product.id} src={product.img} alt=\"\"/>\n                <footer id={product.id}>\n                  <p id={product.id}>{product.name}</p>\n                  <p id={product.id}>${product.price}</p>\n                </footer>\n              </button>\n            </li>\n          ))\n        }\n      </ul>\n    </div>\n  )\n}\n\nconst Product = () => {\n  const product = useSelector(state => state.greenstore.current);\n  const uid = useSelector(state => state.user._id);\n  const dispatch = useDispatch();\n  const owner = useSelector(state => state.user.owner);\n  const [disable, setDisable] = useState(false);\n  const [note, setNote] = useState();\n  const onGift = async(e) => {\n    try{\n      e.preventDefault();\n      setDisable(true);\n      const data = { gift: product, uid, note };\n      await axios.post('/user/gift', data);\n      const parseCoin = parseInt(product.price, 10);\n      dispatch({ type: ON_WALLET, coin: -parseCoin });\n      setDisable(false);\n      dispatch({ type: ON_STORE });\n    }catch(err){\n      console.log(err);\n    }\n  }\n  const onWish = async(e) => {\n    try{\n      e.preventDefault();\n      setDisable(true);\n      const res = await axios.post('/green/wish', { product });\n      console.log(res.data);\n      dispatch({ type: ON_WISH, wish: res.data });\n      setDisable(false);\n      dispatch({ type: ON_STORE });\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return(\n    <div className=\"product_main_cont\">\n      <div className=\"row\">\n        <div className=\"col-12 col-md-6\">\n          <div className=\"img_cont\">\n            <img src={product.img} alt=\"\"/>\n          </div>\n        </div>\n        <div className=\"col-12 col-md-6\">\n          <div className=\"description_cont\">\n            <h1>{product.name}</h1>\n            <p>precio: ${product.price}</p>\n            <p>{product.description}</p>\n          </div>\n          <form onSubmit={owner ? onWish : onGift}>\n            { !owner && <textarea value={note} onChange={(e)=> setNote(e.currentTarget.value)} /> }\n            <footer>\n              <button onClick={()=> dispatch({ type: product.tag })}>atrás</button>\n              <button disabled={disable} type=\"submit\">{ owner ? 'agregar' : 'enviar' }</button>\n            </footer>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Store = () => {\n  const store = useSelector(state => state.greenstore);\n  const dispatch = useDispatch();\n  const onProducts = async ()=> {\n    try{\n      //const res = await axios.get('/products');\n      //dispatch({ type: ON_PRODUCTS, products: res.data });\n      dispatch({ type: ON_PRODUCTS, products });\n    }catch(err){\n      console.log(err);\n    }\n  };\n  useEffect(()=> {\n    onProducts();\n  },[])\n\n  return(\n    <div className=\"store_main_cont\">\n\n      {\n        store.home && <Home />\n      }\n      {\n        store.music && <Category tag={storeSections.MUSIC} />\n      }\n      {\n        store.candy && <Category tag={storeSections.CANDY} />\n      }\n      {\n        store.jewel && <Category tag={storeSections.JEWEL} />\n      }\n      {\n        store.toy && <Category tag={storeSections.TOY} />\n      }\n      {\n        store.ebook && <Category tag={storeSections.EBOOK} />\n      }\n      {\n        store.tv && <Category tag={storeSections.TV} />\n      }\n      {\n        store.product && <Product />\n      }\n    </div>\n  )\n};\n\nexport default Store;\n"]},"metadata":{},"sourceType":"module"}