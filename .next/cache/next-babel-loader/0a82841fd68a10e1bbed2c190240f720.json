{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { ON_STORE, ON_UPDATE } from '../../store/actions';\nimport './user.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift, faMapMarkerAlt, faDollarSign, faSchool, faMailBulk, faPhone } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nvar Info = function Info() {\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      name = _useSelector.name,\n      lastName = _useSelector.lastName,\n      perfilImg = _useSelector.perfilImg,\n      owner = _useSelector.owner;\n\n  var dispatch = useDispatch();\n  return __jsx(\"div\", {\n    className: \"user_info\"\n  }, __jsx(\"img\", {\n    src: perfilImg,\n    alt: \"\"\n  }), __jsx(\"div\", {\n    className: \"user_name\"\n  }, __jsx(\"p\", null, __jsx(\"span\", null, name), \" \", lastName), !owner && __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: ON_STORE\n      });\n    },\n    type: \"button\",\n    title: \"Enviar Regalo\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  }))));\n};\n\nvar ExtraInfo = function ExtraInfo() {\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      actualCity = _useSelector2.actualCity,\n      job = _useSelector2.job,\n      primaryShool = _useSelector2.primaryShool,\n      mail = _useSelector2.mail,\n      phone = _useSelector2.phone,\n      owner = _useSelector2.owner;\n\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(function (state, nextState) {\n    return _objectSpread({}, state, nextState);\n  }, {\n    actualCity: false,\n    job: false,\n    primaryShool: false,\n    mail: false,\n    phone: false\n  }),\n      pop = _useReducer[0],\n      setPop = _useReducer[1];\n\n  var _useReducer2 = useReducer(function (state, nextState) {\n    return _objectSpread({}, state, nextState);\n  }, {\n    actualCity: '',\n    job: '',\n    primaryShool: '',\n    mail: '',\n    phone: ''\n  }),\n      values = _useReducer2[0],\n      setValues = _useReducer2[1];\n\n  useEffect(function () {\n    setPop({\n      actualCity: false,\n      job: false,\n      primaryShool: false,\n      mail: false,\n      phone: false\n    });\n  }, [mail]);\n\n  var onPop = function onPop(id) {\n    for (var key in pop) {\n      if (id === key) {\n        console.log(key);\n        setPop(_defineProperty({}, key, !pop[key]));\n      } else {\n        setPop(_defineProperty({}, key, false));\n      }\n    }\n  };\n\n  var onUpdate =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              e.preventDefault();\n              data = {\n                key: e.target.id,\n                value: values[e.target.id]\n              };\n              _context.next = 5;\n              return axios.post('/user/update', data);\n\n            case 5:\n              dispatch({\n                type: ON_UPDATE,\n                payload: _defineProperty({}, data.key, data.value)\n              });\n              setPop(_defineProperty({}, data.key, false));\n              setValues(_defineProperty({}, data.key, ''));\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function onUpdate(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"ul\", {\n    className: \"extrainfo_main_cont\"\n  }, __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"actualCity\",\n    title: owner ? \"Cambiar ubicación\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faMapMarkerAlt\n  }), __jsx(\"span\", null, \" ubicacion: \"), __jsx(\"strong\", null, actualCity)), __jsx(Popover, {\n    isOpen: pop.actualCity,\n    placement: \"bottom\",\n    target: \"actualCity\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"actualCity\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.actualCity,\n    onChange: function onChange(e) {\n      return setValues({\n        actualCity: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"job\",\n    title: owner ? \"Cambiar trabajo\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faDollarSign\n  }), __jsx(\"span\", null, \" trabajo: \"), __jsx(\"strong\", null, job || 'la psiencia')), __jsx(Popover, {\n    isOpen: pop.job,\n    placement: \"bottom\",\n    target: \"job\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"job\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.job,\n    onChange: function onChange(e) {\n      return setValues({\n        job: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"primaryShool\",\n    title: owner ? \"Cambiar escuela\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSchool\n  }), __jsx(\"span\", null, \" escuela: \"), __jsx(\"strong\", null, primaryShool || 'De la vida')), __jsx(Popover, {\n    isOpen: pop.primaryShool,\n    placement: \"bottom\",\n    target: \"primaryShool\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"primaryShool\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.primaryShool,\n    onChange: function onChange(e) {\n      return setValues({\n        primaryShool: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"mail\",\n    title: owner ? \"Cambiar mail\" : null,\n    disabled: true\n  }, __jsx(FontAwesomeIcon, {\n    icon: faMailBulk\n  }), __jsx(\"span\", null, \" mail: \"), __jsx(\"strong\", null, mail)), __jsx(Popover, {\n    isOpen: pop.mail,\n    placement: \"bottom\",\n    target: \"mail\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"mail\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.mail,\n    onChange: function onChange(e) {\n      return setValues({\n        mail: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"phone\",\n    title: owner ? \"Cambiar telefono\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faPhone\n  }), __jsx(\"span\", null, \" telef\\xF3no: \"), __jsx(\"strong\", null, phone || '555-55-55-55')), __jsx(Popover, {\n    isOpen: pop.phone,\n    placement: \"bottom\",\n    target: \"phone\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"phone\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.phone,\n    onChange: function onChange(e) {\n      return setValues({\n        phone: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))));\n};\n\nvar User = function User() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"user_main_cont\"\n  }, __jsx(Info, null), __jsx(ExtraInfo, null), __jsx(\"svg\", {\n    id: \"arrow_right\",\n    className: \"arrow_user d-none d-md-block\",\n    viewBox: \"0 0 60 70\",\n    width: \"60\",\n    height: \"70\"\n  }, __jsx(\"polyline\", {\n    strokeWidth: \"3px\",\n    stroke: \"#8bb940\",\n    fill: \"transparent\",\n    points: \"20,0 50,35 20,70\"\n  })));\n};\n\nexport default User;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/space/user.jsx"],"names":["React","useReducer","useEffect","useState","useSelector","useDispatch","Popover","PopoverBody","ON_STORE","ON_UPDATE","FontAwesomeIcon","faGift","faMapMarkerAlt","faDollarSign","faSchool","faMailBulk","faPhone","axios","Info","state","user","name","lastName","perfilImg","owner","dispatch","type","ExtraInfo","actualCity","job","primaryShool","mail","phone","nextState","pop","setPop","values","setValues","onPop","id","key","console","log","onUpdate","e","preventDefault","data","target","value","post","payload","currentTarget","User"],"mappings":"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","sourcesContent":["import React, { useReducer, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { ON_STORE, ON_UPDATE } from '../../store/actions';\nimport './user.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faGift,\n  faMapMarkerAlt,\n  faDollarSign,\n  faSchool,\n  faMailBulk,\n  faPhone,\n} from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nconst Info = () => {\n  const { name, lastName, perfilImg, owner } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n\n  return(\n    <div className=\"user_info\">\n      <img src={perfilImg} alt=\"\"/>\n      <div className=\"user_name\">\n        <p><span>{name}</span>{\" \"}{lastName}</p>\n        {!owner && <button onClick={()=> dispatch({ type: ON_STORE })} type=\"button\" title=\"Enviar Regalo\"><FontAwesomeIcon icon={faGift} /></button> }\n      </div>\n    </div>\n  )\n};\n\nconst ExtraInfo = () => {\n  const { actualCity, job, primaryShool, mail, phone, owner } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n\n  const [pop, setPop] = useReducer((state, nextState) => ({ ...state, ...nextState }), {\n    actualCity: false,\n    job: false,\n    primaryShool: false,\n    mail: false,\n    phone: false,\n  });\n\n  const [values, setValues] = useReducer((state, nextState) => ({ ...state, ...nextState }), {\n    actualCity: '',\n    job: '',\n    primaryShool: '',\n    mail: '',\n    phone: '',\n  })\n\n  useEffect(()=> {\n    setPop({ actualCity: false, job: false, primaryShool: false, mail: false, phone: false });\n  },[mail]);\n\n  const onPop = (id) => {\n    for(let key  in pop) {\n      if(id === key){\n        console.log(key);\n        setPop({ [key]: !pop[key] });\n      } else {\n        setPop({[key]: false});\n      }\n    }\n  }\n\n  const onUpdate = async(e) => {\n    try{\n      e.preventDefault();\n      const data = { key: e.target.id, value: values[e.target.id] };\n      await axios.post('/user/update', data);\n      dispatch({ type: ON_UPDATE, payload: { [data.key]: data.value } });\n      setPop({[data.key]: false});\n      setValues({[data.key]: ''});\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  return(\n    <ul className=\"extrainfo_main_cont\">\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"actualCity\" title={owner ? \"Cambiar ubicación\" : null} disabled={!owner}>\n            <FontAwesomeIcon icon={faMapMarkerAlt} />\n            <span> ubicacion: </span>\n            <strong>{actualCity}</strong>\n        </button>\n        <Popover isOpen={pop.actualCity} placement=\"bottom\" target=\"actualCity\">\n          <PopoverBody>\n            <form id=\"actualCity\" onSubmit={onUpdate}>\n              <input value={values.actualCity} onChange={(e)=> setValues({ actualCity: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"job\" title={owner ? \"Cambiar trabajo\" : null} disabled={!owner}>\n          <FontAwesomeIcon icon={faDollarSign} />\n          <span> trabajo: </span>\n          <strong>{job || 'la psiencia'}</strong>\n        </button>\n        <Popover isOpen={pop.job} placement=\"bottom\" target=\"job\">\n          <PopoverBody>\n            <form id=\"job\" onSubmit={onUpdate}>\n              <input value={values.job} onChange={(e)=> setValues({ job: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"primaryShool\" title={owner ? \"Cambiar escuela\" : null} disabled={!owner}>\n          <FontAwesomeIcon icon={faSchool} />\n          <span> escuela: </span>\n          <strong>{primaryShool || 'De la vida'}</strong>\n        </button>\n        <Popover isOpen={pop.primaryShool} placement=\"bottom\" target=\"primaryShool\">\n          <PopoverBody>\n            <form id=\"primaryShool\" onSubmit={onUpdate}>\n              <input value={values.primaryShool} onChange={(e)=> setValues({ primaryShool: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"mail\" title={owner ? \"Cambiar mail\" : null} disabled={true}>\n          <FontAwesomeIcon icon={faMailBulk} />\n          <span> mail: </span>\n          <strong>{mail}</strong>\n        </button>\n        <Popover isOpen={pop.mail} placement=\"bottom\" target=\"mail\">\n          <PopoverBody>\n            <form id=\"mail\" onSubmit={onUpdate}>\n              <input value={values.mail} onChange={(e)=> setValues({ mail: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"phone\" title={owner ? \"Cambiar telefono\" : null} disabled={!owner}>\n          <FontAwesomeIcon icon={faPhone} />\n          <span> telefóno: </span>\n          <strong>{phone || '555-55-55-55'}</strong>\n        </button>\n        <Popover isOpen={pop.phone} placement=\"bottom\" target=\"phone\">\n          <PopoverBody>\n            <form id=\"phone\" onSubmit={onUpdate}>\n              <input value={values.phone} onChange={(e)=> setValues({ phone: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n    </ul>\n  )\n}\n\nconst User = () => {\n  const user = useSelector(state => state.user);\n  return(\n    <div className=\"user_main_cont\">\n      <Info />\n      <ExtraInfo />\n      <svg id=\"arrow_right\" className=\"arrow_user d-none d-md-block\" viewBox=\"0 0 60 70\" width=\"60\" height=\"70\">\n        <polyline strokeWidth=\"3px\" stroke=\"#8bb940\" fill=\"transparent\" points=\"20,0 50,35 20,70\" />\n      </svg>\n    </div>\n  )\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}