{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { storeSections, ON_PRODUCTS, ON_WALLET, ON_STORE, ON_WISH } from '../../store/actions';\nimport './store.scss';\nimport products from '../../test/products';\nimport axios from 'axios';\nimport uuid from 'uuid/v1';\n\nvar Home = function Home() {\n  var dispatch = useDispatch();\n  return __jsx(\"div\", {\n    className: \"storehome_main_cont\"\n  }, __jsx(\"div\", {\n    className: \"cont_left\"\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: storeSections.MUSIC\n      });\n    },\n    id: \"music\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/ms.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"musica\"))), __jsx(\"div\", {\n    className: \"cont_right\"\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: storeSections.CANDY\n      });\n    },\n    id: \"candy\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/gol.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"golosinas\")), __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: storeSections.JEWEL\n      });\n    },\n    className: \"four\",\n    id: \"jewel\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/bis.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"bisuteria\")), __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: storeSections.TOY\n      });\n    },\n    className: \"four\",\n    id: \"toy\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/ty.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"juguetes\")), __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: storeSections.EBOOK\n      });\n    },\n    className: \"four\",\n    id: \"ebook\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/eb.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"ebook's\")), __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: storeSections.TV\n      });\n    },\n    className: \"four\",\n    id: \"tv\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/tv.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"tv's\"))));\n};\n\nvar Category = function Category(_ref) {\n  var tag = _ref.tag;\n  var items = useSelector(function (state) {\n    return state.greenstore.items;\n  });\n  var products = items.filter(function (product) {\n    return product.tag === tag;\n  });\n  var dispatch = useDispatch();\n\n  var onProduct = function onProduct(e) {\n    var product = products.find(function (product) {\n      return product.id === e.target.id;\n    });\n    dispatch({\n      type: storeSections.PRODUCT,\n      product: product\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"category_main_cont\"\n  }, __jsx(\"ul\", null, products.map(function (product) {\n    return __jsx(\"li\", null, __jsx(\"button\", {\n      onClick: onProduct,\n      id: product.id,\n      className: \"shadow\"\n    }, __jsx(\"img\", {\n      id: product.id,\n      src: product.img,\n      alt: \"\"\n    }), __jsx(\"footer\", {\n      id: product.id\n    }, __jsx(\"p\", {\n      id: product.id\n    }, product.name), __jsx(\"p\", {\n      id: product.id\n    }, \"$\", product.price))));\n  })));\n};\n\nvar Product = function Product() {\n  var product = useSelector(function (state) {\n    return state.greenstore.current;\n  });\n  var postType = useSelector(function (state) {\n    return state.greenstore.postType;\n  });\n  var uid = useSelector(function (state) {\n    return state.user._id;\n  });\n  var dispatch = useDispatch();\n  var owner = useSelector(function (state) {\n    return state.user.owner;\n  });\n\n  var _useState = useState(false),\n      disable = _useState[0],\n      setDisable = _useState[1];\n\n  var _useState2 = useState(),\n      note = _useState2[0],\n      setNote = _useState2[1];\n\n  var onGift =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var data, parseCoin;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              e.preventDefault();\n              setDisable(true);\n              data = {\n                gift: product,\n                uid: uid,\n                note: note,\n                postType: postType\n              };\n              _context.next = 6;\n              return axios.post('/user/gift', data);\n\n            case 6:\n              parseCoin = _parseInt(product.price, 10);\n              dispatch({\n                type: ON_WALLET,\n                coin: -parseCoin\n              });\n              setDisable(false);\n              dispatch({\n                type: ON_STORE\n              });\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n\n    return function onGift(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onWish =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              e.preventDefault();\n              setDisable(true);\n              _context2.next = 5;\n              return axios.post('/green/wish', {\n                product: product\n              });\n\n            case 5:\n              res = _context2.sent;\n              console.log(res.data);\n              dispatch({\n                type: ON_WISH,\n                wish: res.data\n              });\n              setDisable(false);\n              dispatch({\n                type: ON_STORE\n              });\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 12]]);\n    }));\n\n    return function onWish(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"product_main_cont\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-12 col-md-6\"\n  }, __jsx(\"div\", {\n    className: \"img_cont\"\n  }, __jsx(\"img\", {\n    src: product.img,\n    alt: \"\"\n  }))), __jsx(\"div\", {\n    className: \"col-12 col-md-6\"\n  }, __jsx(\"div\", {\n    className: \"description_cont\"\n  }, __jsx(\"h1\", null, product.name), __jsx(\"p\", null, \"precio: $\", product.price), __jsx(\"p\", null, product.description)), __jsx(\"form\", {\n    onSubmit: !owner || postType.type ? onGift : onWish\n  }, !owner || postType.type && __jsx(\"textarea\", {\n    value: note,\n    onChange: function onChange(e) {\n      return setNote(e.currentTarget.value);\n    }\n  }), __jsx(\"footer\", null, __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: product.tag\n      });\n    }\n  }, \"atr\\xE1s\"), __jsx(\"button\", {\n    disabled: disable,\n    type: \"submit\"\n  }, !owner || postType.type ? 'enviar' : 'agregar'))))));\n};\n\nvar Store = function Store() {\n  var store = useSelector(function (state) {\n    return state.greenstore;\n  });\n  var dispatch = useDispatch();\n\n  var onProducts =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              try {\n                //const res = await axios.get('/products');\n                //dispatch({ type: ON_PRODUCTS, products: res.data });\n                dispatch({\n                  type: ON_PRODUCTS,\n                  products: products\n                });\n              } catch (err) {\n                console.log(err);\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function onProducts() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    onProducts();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"store_main_cont\"\n  }, store.home && __jsx(Home, null), store.music && __jsx(Category, {\n    tag: storeSections.MUSIC\n  }), store.candy && __jsx(Category, {\n    tag: storeSections.CANDY\n  }), store.jewel && __jsx(Category, {\n    tag: storeSections.JEWEL\n  }), store.toy && __jsx(Category, {\n    tag: storeSections.TOY\n  }), store.ebook && __jsx(Category, {\n    tag: storeSections.EBOOK\n  }), store.tv && __jsx(Category, {\n    tag: storeSections.TV\n  }), store.product && __jsx(Product, null));\n};\n\nexport default Store;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/store/store.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","storeSections","ON_PRODUCTS","ON_WALLET","ON_STORE","ON_WISH","products","axios","uuid","Home","dispatch","type","MUSIC","CANDY","JEWEL","TOY","EBOOK","TV","Category","tag","items","state","greenstore","filter","product","onProduct","e","find","id","target","PRODUCT","map","img","name","price","Product","current","postType","uid","user","_id","owner","disable","setDisable","note","setNote","onGift","preventDefault","data","gift","post","parseCoin","coin","console","log","onWish","res","wish","description","currentTarget","value","Store","store","onProducts","err","home","music","candy","jewel","toy","ebook","tv"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { storeSections, ON_PRODUCTS, ON_WALLET, ON_STORE, ON_WISH } from '../../store/actions';\nimport './store.scss';\nimport products from '../../test/products';\nimport axios from 'axios';\nimport uuid from 'uuid/v1';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  return(\n    <div className=\"storehome_main_cont\">\n      <div className=\"cont_left\">\n        <button onClick={()=> dispatch({ type: storeSections.MUSIC })} id=\"music\">\n          <img src=\"/static/store/ms.jpg\" alt=\"\"/>\n          <span>musica</span>\n        </button>\n      </div>\n      <div className=\"cont_right\">\n        <button onClick={()=> dispatch({ type: storeSections.CANDY })} id=\"candy\">\n          <img src=\"/static/store/gol.jpg\" alt=\"\"/>\n          <span>golosinas</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.JEWEL })} className=\"four\" id=\"jewel\">\n          <img src=\"/static/store/bis.jpg\" alt=\"\"/>\n          <span>bisuteria</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.TOY })} className=\"four\" id=\"toy\">\n          <img src=\"/static/store/ty.jpg\" alt=\"\"/>\n          <span>juguetes</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.EBOOK })} className=\"four\" id=\"ebook\">\n          <img src=\"/static/store/eb.jpg\" alt=\"\"/>\n          <span>ebook's</span>\n        </button>\n        <button onClick={()=> dispatch({ type: storeSections.TV })} className=\"four\" id=\"tv\">\n          <img src=\"/static/store/tv.jpg\" alt=\"\"/>\n          <span>tv's</span>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nconst Category = ({ tag }) => {\n  const items = useSelector(state => state.greenstore.items);\n  const products = items.filter(product => product.tag === tag);\n  const dispatch = useDispatch();\n\n  const onProduct = (e) => {\n    const product = products.find(product => product.id === e.target.id);\n    dispatch({ type: storeSections.PRODUCT, product })\n  }\n\n  return(\n    <div className=\"category_main_cont\">\n      <ul>\n        {\n          products.map(product => (\n            <li>\n              <button onClick={onProduct} id={product.id} className=\"shadow\">\n                <img id={product.id} src={product.img} alt=\"\"/>\n                <footer id={product.id}>\n                  <p id={product.id}>{product.name}</p>\n                  <p id={product.id}>${product.price}</p>\n                </footer>\n              </button>\n            </li>\n          ))\n        }\n      </ul>\n    </div>\n  )\n}\n\nconst Product = () => {\n  const product = useSelector(state => state.greenstore.current);\n  const postType = useSelector(state => state.greenstore.postType);\n  const uid = useSelector(state => state.user._id);\n  const dispatch = useDispatch();\n  const owner = useSelector(state => state.user.owner);\n  const [disable, setDisable] = useState(false);\n  const [note, setNote] = useState();\n  const onGift = async(e) => {\n    try{\n      e.preventDefault();\n      setDisable(true);\n      const data = { gift: product, uid, note, postType };\n      await axios.post('/user/gift', data);\n      const parseCoin = parseInt(product.price, 10);\n      dispatch({ type: ON_WALLET, coin: -parseCoin });\n      setDisable(false);\n      dispatch({ type: ON_STORE });\n    }catch(err){\n      console.log(err);\n    }\n  }\n  const onWish = async(e) => {\n    try{\n      e.preventDefault();\n      setDisable(true);\n      const res = await axios.post('/green/wish', { product });\n      console.log(res.data);\n      dispatch({ type: ON_WISH, wish: res.data });\n      setDisable(false);\n      dispatch({ type: ON_STORE });\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return(\n    <div className=\"product_main_cont\">\n      <div className=\"row\">\n        <div className=\"col-12 col-md-6\">\n          <div className=\"img_cont\">\n            <img src={product.img} alt=\"\"/>\n          </div>\n        </div>\n        <div className=\"col-12 col-md-6\">\n          <div className=\"description_cont\">\n            <h1>{product.name}</h1>\n            <p>precio: ${product.price}</p>\n            <p>{product.description}</p>\n          </div>\n          <form onSubmit={!owner || postType.type ? onGift : onWish}>\n            { !owner || postType.type && <textarea value={note} onChange={(e)=> setNote(e.currentTarget.value)} /> }\n            <footer>\n              <button onClick={()=> dispatch({ type: product.tag })}>atrás</button>\n              <button disabled={disable} type=\"submit\">{ !owner || postType.type ? 'enviar' : 'agregar' }</button>\n            </footer>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst Store = () => {\n  const store = useSelector(state => state.greenstore);\n  const dispatch = useDispatch();\n  const onProducts = async ()=> {\n    try{\n      //const res = await axios.get('/products');\n      //dispatch({ type: ON_PRODUCTS, products: res.data });\n      dispatch({ type: ON_PRODUCTS, products });\n    }catch(err){\n      console.log(err);\n    }\n  };\n  useEffect(()=> {\n    onProducts();\n  },[])\n\n  return(\n    <div className=\"store_main_cont\">\n\n      {\n        store.home && <Home />\n      }\n      {\n        store.music && <Category tag={storeSections.MUSIC} />\n      }\n      {\n        store.candy && <Category tag={storeSections.CANDY} />\n      }\n      {\n        store.jewel && <Category tag={storeSections.JEWEL} />\n      }\n      {\n        store.toy && <Category tag={storeSections.TOY} />\n      }\n      {\n        store.ebook && <Category tag={storeSections.EBOOK} />\n      }\n      {\n        store.tv && <Category tag={storeSections.TV} />\n      }\n      {\n        store.product && <Product />\n      }\n    </div>\n  )\n};\n\nexport default Store;\n"]},"metadata":{},"sourceType":"module"}