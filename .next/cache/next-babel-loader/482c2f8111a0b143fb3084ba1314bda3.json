{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport './home.scss';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_UPDATE } from '../../store/actions';\nimport { color } from '../../layout/var';\nimport axios from 'axios';\nimport uuid from 'uuid/v1';\nimport MyLink from '../mylink/link';\nimport BtnPost from '../layout/btn-post';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faShare, faHome, faHeart, faGift, faComment, faExpandArrowsAlt } from '@fortawesome/free-solid-svg-icons';\n\nvar TopPost = function TopPost(_ref) {\n  var post = _ref.post;\n  var img = post.img,\n      author = post.author,\n      date = post.date,\n      likes = post.likes,\n      comments = post.comments,\n      gifts = post.gifts;\n  return __jsx(BtnPost, {\n    post: post\n  }, __jsx(\"button\", {\n    title: \"Abrir\",\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]]) + \" \" + \"main\"\n  }, __jsx(\"header\", {\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }, __jsx(\"small\", {\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }, new Date(date).toLocaleDateString('en-EN')), __jsx(\"small\", {\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }, new Date(date).toLocaleTimeString('en-EN'))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]]) + \" \" + \"body\"\n  }, __jsx(\"img\", {\n    src: author.perfilImg,\n    alt: \"\",\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }, author.fullName), __jsx(\"footer\", {\n    id: \"top_post_footer\",\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }, __jsx(FontAwesomeIcon, {\n    width: \"30px\",\n    icon: faHeart\n  }), __jsx(\"small\", {\n    className: _JSXStyle.dynamic([[\"3306458121\", [img, color.prim, color.prim]]])\n  }, \" +\", likes.length)))), __jsx(_JSXStyle, {\n    id: \"3306458121\",\n    dynamic: [img, color.prim, color.prim]\n  }, [\"button.__jsx-style-dynamic-selector{height:20vw;width:20vw;border:none;background:url('\".concat(img, \"')top center no-repeat;background-size:cover;border-top:7px solid \").concat(color.prim, \";border-bottom:7px solid \").concat(color.prim, \";padding:0;color:#fff;margin:.4rem;}\"), \"div.main.__jsx-style-dynamic-selector{opacity:0;background:rgba(0,0,0,.5);width:100%;height:100%;-webkit-transition:250ms ease;transition:250ms ease;}\", \".main.__jsx-style-dynamic-selector:hover{opacity:1;}\", \"div.main.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{width:80px;height:80px;border-radius:50%;object-fit:cover;object-position:center;}\", \"header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;padding:0 .2rem;color:#fff;border:none;}\", \".body.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}\", \".body.__jsx-style-dynamic-selector p.__jsx-style-dynamic-selector{margin:0;}\"])));\n};\n\nvar RecentPosts = function RecentPosts() {\n  var posts = useSelector(function (state) {\n    return state.user.posts;\n  });\n  return __jsx(\"ul\", {\n    className: \"jsx-679380814\"\n  }, console.log(posts), posts.slice(0, 10).map(function (post) {\n    return __jsx(\"li\", {\n      className: \"jsx-679380814\"\n    }, __jsx(\"img\", {\n      src: post.img,\n      alt: \"\",\n      className: \"jsx-679380814\"\n    }));\n  }), __jsx(_JSXStyle, {\n    id: \"679380814\"\n  }, [\"ul.jsx-679380814{list-style:none;margin:0;padding:0;padding-top:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", \"li.jsx-679380814{width:25%;height:35%;}\", \"img.jsx-679380814{width:100%;height:100%;object-fit:cover;object-position:center;}\"]));\n};\n\nvar HomeNav = function HomeNav() {\n  return __jsx(\"nav\", {\n    className: \"space_home_nav\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"button\", null, \"historia\")), __jsx(\"li\", null, __jsx(\"button\", null, \"intereses\")), __jsx(\"li\", null, __jsx(\"button\", null, \"deseos\"))));\n};\n\nvar History = function History() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var cid = useSelector(function (state) {\n    return state.nav.notifications.id;\n  });\n\n  var _useState = useState(true),\n      disable = _useState[0],\n      setDisable = _useState[1];\n\n  var _useState2 = useState(''),\n      history = _useState2[0],\n      setHistory = _useState2[1];\n\n  var dispatch = useDispatch();\n  var isCurrent = user._id === cid ? true : false;\n  useEffect(function () {\n    setHistory(user.history);\n  }, [user]);\n\n  var onHistory =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setDisable(true);\n              _context.next = 4;\n              return axios.post('/user/update', {\n                key: 'history',\n                value: history\n              });\n\n            case 4:\n              res = _context.sent;\n              dispatch({\n                type: ON_UPDATE,\n                payload: {\n                  history: history\n                }\n              });\n              console.log(res.data);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9]]);\n    }));\n\n    return function onHistory() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onCancel = function onCancel() {\n    setDisable(true);\n    setHistory(user.history);\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"884367452\", [color.dark, isCurrent && 'pointer', color.prim, color.prim, color.light, color.prim]]]) + \" \" + \"main\"\n  }, __jsx(\"textarea\", {\n    title: isCurrent && \"Agrega tu historia\",\n    onClick: isCurrent ? function () {\n      return setDisable(false);\n    } : null,\n    disable: disable,\n    value: history,\n    onChange: function onChange(e) {\n      return setHistory(e.currentTarget.value);\n    },\n    className: _JSXStyle.dynamic([[\"884367452\", [color.dark, isCurrent && 'pointer', color.prim, color.prim, color.light, color.prim]]])\n  }), isCurrent && !disable && __jsx(\"footer\", {\n    className: _JSXStyle.dynamic([[\"884367452\", [color.dark, isCurrent && 'pointer', color.prim, color.prim, color.light, color.prim]]])\n  }, __jsx(\"button\", {\n    onClick: onCancel,\n    className: _JSXStyle.dynamic([[\"884367452\", [color.dark, isCurrent && 'pointer', color.prim, color.prim, color.light, color.prim]]])\n  }, \"cancelar\"), __jsx(\"button\", {\n    onClick: onHistory,\n    className: _JSXStyle.dynamic([[\"884367452\", [color.dark, isCurrent && 'pointer', color.prim, color.prim, color.light, color.prim]]])\n  }, \"Enviar\")), __jsx(_JSXStyle, {\n    id: \"884367452\",\n    dynamic: [color.dark, isCurrent && 'pointer', color.prim, color.prim, color.light, color.prim]\n  }, [\".main.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:50vh;padding-top:1rem;}\", \"textarea.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;resize:none;border:none;}\", \"textarea.__jsx-style-dynamic-selector:disable{color:\".concat(color.dark, \";}\"), \"textarea.__jsx-style-dynamic-selector:hover{cursor:\".concat(isCurrent && 'pointer', \";}\"), \"textarea.__jsx-style-dynamic-selector:focus{cursor:auto;outline:none;}\", \"footer.__jsx-style-dynamic-selector{text-align:right;}\", \"footer.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{background:transparent;border:2px solid \".concat(color.prim, \";text-transform:uppercase;color:\").concat(color.prim, \";-webkit-transition:250ms ease;transition:250ms ease;}\"), \"footer.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:focus{outline:none;}\", \"footer.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:hover{color:\".concat(color.light, \";background:\").concat(color.prim, \";}\"), \"footer.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:nth-child(2){margin-left:1rem;}\"]));\n};\n\nvar Friend = function Friend(_ref3) {\n  var fullName = _ref3.fullName,\n      perfilImg = _ref3.perfilImg,\n      url = _ref3.url,\n      _id = _ref3._id;\n\n  var onFriend =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"/friend/send/\".concat(_id));\n\n            case 3:\n              onCancel(_id);\n              _context2.next = 9;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 6]]);\n    }));\n\n    return function onFriend() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"li\", {\n    className: _JSXStyle.dynamic([[\"636839945\", [perfilImg, color.prim, color.prim]]]) + \" \" + \"shadow-sm\"\n  }, __jsx(\"header\", {\n    className: _JSXStyle.dynamic([[\"636839945\", [perfilImg, color.prim, color.prim]]])\n  }, __jsx(MyLink, {\n    url: url,\n    callback: function callback() {\n      return null;\n    }\n  }, __jsx(\"p\", {\n    style: {\n      color: \"#fff\"\n    },\n    className: _JSXStyle.dynamic([[\"636839945\", [perfilImg, color.prim, color.prim]]])\n  }, fullName))), __jsx(_JSXStyle, {\n    id: \"636839945\",\n    dynamic: [perfilImg, color.prim, color.prim]\n  }, [\"li.__jsx-style-dynamic-selector{background:url(\".concat(perfilImg, \")top center no-repeat;background-size:cover;height:100%;width:30%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:.5rem;}\"), \"header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;color:#fff;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:none;}\", \"header.__jsx-style-dynamic-selector p.__jsx-style-dynamic-selector{margin:0;text-transform:capitalize;}\", \"header.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{width:25px;height:25px;background:transparent;border:1px solid #fff;border-radius:50%;color:#fff;-webkit-transition:250ms ease;transition:250ms ease;}\", \"header.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:hover{background:#fff;color:\".concat(color.prim, \";}\"), \"button.__jsx-style-dynamic-selector:focus{outline:none;}\", \"button.__jsx-style-dynamic-selector{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;background:transparent;color:#fff;border:2px solid #fff;margin:.5rem;-webkit-transition:250ms ease;transition:250ms ease;}\", \"button.__jsx-style-dynamic-selector:hover{background:#fff;color:\".concat(color.prim, \";}\")]));\n};\n\nvar CommonFriends = function CommonFriends() {\n  var _useState3 = useState([]),\n      friends = _useState3[0],\n      setFriends = _useState3[1];\n\n  var tid = useSelector(function (state) {\n    return state.user._id;\n  });\n\n  var onFriends =\n  /*#__PURE__*/\n  function () {\n    var _ref5 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get(\"/friend/commonFriends/\".concat(tid));\n\n            case 3:\n              res = _context3.sent;\n              setFriends(res.data);\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 7]]);\n    }));\n\n    return function onFriends() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    onFriends();\n  }, [tid]);\n  return __jsx(\"ul\", {\n    className: \"jsx-1775617780\"\n  }, friends.map(function (friend) {\n    return __jsx(Friend, _extends({\n      key: uuid()\n    }, friend));\n  }), __jsx(_JSXStyle, {\n    id: \"1775617780\"\n  }, [\"ul.jsx-1775617780{list-style:none;width:100%;height:40vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0;padding:0;padding-top:1rem;overflow:hidden;-webkit-flex-wrap:no-wrap;-ms-flex-wrap:no-wrap;flex-wrap:no-wrap;-webkit-transition:250ms ease;transition:250ms ease;}\"]));\n};\n\nvar Home = function Home() {\n  var owner = useSelector(function (state) {\n    return state.user.owner;\n  });\n  var posts = useSelector(function (state) {\n    return state.user.posts;\n  });\n  return __jsx(\"div\", {\n    className: \"spacehome_main_cont\"\n  }, __jsx(\"header\", null, __jsx(\"h1\", null, __jsx(\"span\", null, \"Amigos en\"), \" Comun\")), __jsx(CommonFriends, null), __jsx(\"header\", null, __jsx(\"h1\", null, __jsx(\"span\", null, \"Top\"), \" Publicaciones\")), __jsx(\"ul\", {\n    className: \"jsx-391872082\"\n  }, posts.sort(function (a, b) {\n    a = a.likes.length;\n    b = b.likes.length;\n    return a > b ? -1 : a < b ? 1 : 0;\n  }).slice(0, 3).map(function (post) {\n    return __jsx(\"li\", {\n      key: uuid(),\n      className: \"jsx-391872082\"\n    }, __jsx(TopPost, {\n      post: post\n    }));\n  }), __jsx(_JSXStyle, {\n    id: \"391872082\"\n  }, [\"ul.jsx-391872082{list-style:none;padding:0;margin:0;}\"])), __jsx(HomeNav, null), __jsx(History, null));\n};\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}