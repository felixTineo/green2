{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useState, useReducer } from 'react';\nimport './creator.scss';\nimport { Modal } from 'reactstrap';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_GREEN_CREATOR } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCamera, faArrowCircleLeft } from '@fortawesome/free-solid-svg-icons';\nimport Store from '../store/store';\nimport axios from 'axios';\n\nvar GreenPost = function GreenPost(_ref) {\n  var img = _ref.img,\n      setImg = _ref.setImg,\n      onImg = _ref.onImg,\n      historyVisible = _ref.historyVisible,\n      setHistoryVisible = _ref.setHistoryVisible,\n      onSubmit = _ref.onSubmit,\n      history = _ref.history,\n      setHistory = _ref.setHistory;\n  return __jsx(\"div\", {\n    style: {\n      backgroundImage: \"url(\".concat(img, \")\")\n    },\n    className: \"creator_greenpost_main\"\n  }, __jsx(\"label\", {\n    htmlFor: \"green\"\n  }, __jsx(\"input\", {\n    id: \"green\",\n    name: \"green\",\n    onChange: onImg,\n    type: \"file\"\n  }), __jsx(FontAwesomeIcon, {\n    icon: faCamera\n  })), __jsx(\"div\", {\n    className: \"history_main_cont\",\n    style: {\n      transform: historyVisible ? 'translateX(0)' : 'translateX(100%)'\n    }\n  }, __jsx(\"div\", {\n    className: \"body\"\n  }, __jsx(\"header\", null, __jsx(\"h2\", null, \"Agrega una historia\")), __jsx(\"textarea\", {\n    onChange: function onChange(e) {\n      return setHistory(e.currentTarget.value);\n    },\n    value: history\n  })), __jsx(\"footer\", null, __jsx(\"button\", {\n    onClick: onSubmit\n  }, \"crear\"))), __jsx(\"button\", {\n    onClick: function onClick() {\n      return setHistoryVisible(!historyVisible);\n    },\n    title: \"Agregar historia\",\n    style: {\n      transform: historyVisible ? 'rotate(180deg)' : null\n    },\n    className: \"arrow_history\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faArrowCircleLeft\n  })));\n};\n\nvar Creator = function Creator() {\n  var visible = useSelector(function (state) {\n    return state.greenpost.creator;\n  });\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    green: true,\n    store: false\n  }),\n      section = _useReducer[0],\n      setSection = _useReducer[1];\n\n  var _useState = useState(true),\n      historyVisible = _useState[0],\n      setHistoryVisible = _useState[1];\n\n  var _useState2 = useState(false),\n      store = _useState2[0],\n      setStore = _useState2[1];\n\n  var _useState3 = useState('/static/random/r16.jpg'),\n      img = _useState3[0],\n      setImg = _useState3[1];\n\n  var _useState4 = useState(''),\n      history = _useState4[0],\n      setHistory = _useState4[1];\n\n  var onImg = function onImg(e) {\n    var img = e.target.files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      if (reader.result) {\n        setImg(reader.result);\n        setHistoryVisible(true);\n      } else {\n        setImg('/static/random/r16.jpg');\n      }\n    };\n\n    reader.readAsDataURL(img);\n  };\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              data = {\n                history: history,\n                img: img\n              };\n              _context.next = 4;\n              return axios.post('/post/greenpost', data);\n\n            case 4:\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Modal, {\n    isOpen: visible,\n    style: {\n      maxWidth: '90vw'\n    }\n  }, __jsx(\"div\", {\n    className: \"creator_main_cont\"\n  }, __jsx(\"header\", null, __jsx(\"p\", null, \"GreenPost\"), __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: ON_GREEN_CREATOR\n      });\n    }\n  }, \"X\")), __jsx(\"div\", {\n    className: \"body\"\n  }, section.green && __jsx(GreenPost, {\n    onImg: onImg,\n    img: img,\n    setImg: setImg,\n    historyVisible: historyVisible,\n    setHistoryVisible: setHistoryVisible,\n    history: history,\n    setHistory: setHistory\n  }), section.store && __jsx(Store, null))));\n};\n\nexport default Creator;","map":null,"metadata":{},"sourceType":"module"}