{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/felix/Documentos/projects/greenlink/components/postregister/postregister.jsx\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_POST_REGISTER, ON_GREEN_CREATOR, ON_UPDATE, ON_WALLET } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport { Modal } from 'reactstrap';\nimport './postregister.scss';\nimport Logo from '../layout/logo';\nimport axios from 'axios';\nimport Loader from '../loader/loader';\n\nvar BtnUpload = function BtnUpload() {\n  return __jsx(\"div\", {\n    className: \"btnUpload_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"img_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: \"\",\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }), __jsx(FontAwesomeIcon, {\n    icon: faUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  })), __jsx(\"input\", {\n    id: \"img\",\n    name: \"img\",\n    type: \"file\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  })));\n};\n\nvar Welcome = function Welcome() {\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, \"Bienvenido a \", __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, \"Greenlink!\")), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"Completa el registro agregando informacion adicional y creando tu primer \", __jsx(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"GreenPost,\"), \" de esta manera podras ser encontrado por otros usuarios ademas de recibir obsequios. Recuerda, mietras mas preciso seas mas facil sera que tus seres queridos contacten contigo.\"));\n};\n\nvar Congratulations = function Congratulations() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Felicidades \", user.name), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"No olvides crear tu primer\", __jsx(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"GreenPost,\")));\n};\n\nvar UserInfo = function UserInfo(_ref) {\n  var values = _ref.values,\n      setValues = _ref.setValues,\n      onImg = _ref.onImg;\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"user_postregister_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, __jsx(\"label\", {\n    htmlFor: \"perfilImg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, !values.perfilImgFrontEnd && __jsx(FontAwesomeIcon, {\n    icon: faUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), values.perfilImgFrontEnd && __jsx(\"img\", {\n    src: values.perfilImgFrontEnd,\n    alt: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    onChange: onImg,\n    type: \"file\",\n    name: \"perfilImg\",\n    id: \"perfilImg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Elige una foto de perfil\"), user.name === 'Green' && __jsx(React.Fragment, null, __jsx(\"input\", {\n    value: values.name,\n    onChange: function onChange(e) {\n      return setValues({\n        name: e.currentTarget.value\n      });\n    },\n    placeholder: \"Nombre\",\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), __jsx(\"input\", {\n    value: values.lastName,\n    onChange: function onChange(e) {\n      return setValues({\n        lastName: e.currentTarget.value\n      });\n    },\n    placeholder: \"Apellido\",\n    type: \"text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"birth_sex_main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Cumplea\\xF1os\"), __jsx(\"input\", {\n    type: \"date\",\n    value: values.birthday,\n    onChange: function onChange(e) {\n      return setValues({\n        birthday: e.currentTarget.value\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"birthday_sex\",\n    style: {\n      marginLeft: '1rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Sexo\"), __jsx(\"select\", {\n    onChange: function onChange(e) {\n      return setValues({\n        sex: e.currentTarget.value\n      });\n    },\n    name: \"sex\",\n    id: \"sex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, __jsx(\"option\", {\n    value: \"female\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Mujer\"), __jsx(\"option\", {\n    value: \"male\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Hombre\"), __jsx(\"option\", {\n    value: \"otro\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Otro\"))))));\n};\n\nvar PostRegister = function PostRegister() {\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    name: '',\n    lastName: '',\n    birthday: '',\n    sex: '',\n    perfilImgFrontEnd: '',\n    perfilImg: ''\n  }),\n      values = _useReducer[0],\n      setValues = _useReducer[1];\n\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n\n  var onImg = function onImg(e) {\n    var img = e.target.files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      if (reader.result) {\n        setValues({\n          perfilImgFrontEnd: reader.result,\n          perfilImg: img\n        });\n      } else {\n        setValues({\n          perfilImgFrontEnd: null,\n          perfilImg: null\n        });\n      }\n    };\n\n    reader.readAsDataURL(img);\n  };\n\n  var _useReducer2 = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    welcome: true,\n    info: false,\n    loader: false,\n    congratulations: false\n  }),\n      section = _useReducer2[0],\n      setSection = _useReducer2[1];\n\n  var visible = useSelector(function (state) {\n    return state.postregister;\n  });\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var name, lastName, birthday, sex, perfilImg, data, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              name = values.name, lastName = values.lastName, birthday = values.birthday, sex = values.sex, perfilImg = values.perfilImg;\n              data = new FormData();\n              setSection({\n                info: false,\n                loader: true\n              });\n\n              if (user.name === 'Green') {\n                data.append('name', name);\n                data.append('lastName', lastName);\n                data.append('birthday', birthday);\n                data.append('sex', sex);\n              }\n\n              data.append('perfilImg', perfilImg);\n              _context.next = 8;\n              return axios.post('/user/postregister', data);\n\n            case 8:\n              res = _context.sent;\n              dispatch({\n                type: ON_UPDATE,\n                payload: res.data\n              });\n              dispatch({\n                type: ON_WALLET,\n                coin: 50\n              });\n              setSection({\n                loader: false,\n                congratulations: true\n              });\n              setTimeout(function () {\n                dispatch({\n                  type: ON_POST_REGISTER\n                });\n              }, 3000);\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 15]]);\n    }));\n\n    return function onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Modal, {\n    className: \"my_modal\",\n    isOpen: visible,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"postregister_main_cont\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, __jsx(\"header\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, __jsx(Logo, {\n    dark: true,\n    url: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, section.welcome && __jsx(Welcome, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }), section.info && __jsx(UserInfo, {\n    values: values,\n    setValues: setValues,\n    onImg: onImg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }), section.loader && __jsx(Loader, {\n    dark: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }), section.congratulations && __jsx(Congratulations, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  })), __jsx(\"footer\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, section.welcome && __jsx(\"button\", {\n    onClick: function onClick() {\n      return setSection({\n        welcome: false,\n        info: true\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"siguiente\"), section.info && __jsx(\"button\", {\n    onClick: onSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, \"enviar\"))));\n};\n\nexport default PostRegister;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/postregister/postregister.jsx"],"names":["React","useReducer","useState","useSelector","useDispatch","ON_POST_REGISTER","ON_GREEN_CREATOR","ON_UPDATE","ON_WALLET","FontAwesomeIcon","faUser","Modal","Logo","axios","Loader","BtnUpload","Welcome","Congratulations","user","state","name","UserInfo","values","setValues","onImg","perfilImgFrontEnd","e","currentTarget","value","lastName","birthday","marginLeft","sex","PostRegister","dispatch","next","perfilImg","img","target","files","reader","FileReader","onloadend","result","readAsDataURL","welcome","info","loader","congratulations","section","setSection","visible","postregister","onSubmit","data","FormData","append","post","res","type","payload","coin","setTimeout","console","log"],"mappings":"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","sourcesContent":["import React, { useReducer, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_POST_REGISTER, ON_GREEN_CREATOR, ON_UPDATE, ON_WALLET } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport { Modal } from 'reactstrap';\nimport './postregister.scss';\nimport Logo from '../layout/logo';\nimport axios from 'axios';\nimport Loader from '../loader/loader';\n\n\nconst BtnUpload = () => {\n\n  return(\n    <div className=\"btnUpload_main_cont\">\n      <label htmlFor=\"img\">\n        <div className=\"img_cont\">\n          <img src=\"\" alt=\"\"/>\n          <FontAwesomeIcon icon={faUser} />\n        </div>\n        <input id=\"img\" name=\"img\" type=\"file\"/>\n      </label>\n    </div>\n  )\n};\n\nconst Welcome = () => {\n\n  return(\n    <div className=\"welcome_main_cont\">\n      <h1>Bienvenido a <span>Greenlink!</span></h1>\n      <p>Completa el registro agregando informacion adicional y creando tu primer <strong>GreenPost,</strong> de esta manera podras ser encontrado por otros usuarios ademas de recibir obsequios. Recuerda, mietras mas preciso seas mas facil sera que tus seres queridos contacten contigo.</p>\n    </div>\n  )\n};\n\nconst Congratulations = () => {\n  const user = useSelector(state => state.user);\n  return(\n    <div className=\"welcome_main_cont\">\n      <h1>Felicidades {user.name}</h1>\n      <p>No olvides crear tu primer<strong>GreenPost,</strong></p>\n    </div>\n  )\n};\n\nconst UserInfo = ({ values, setValues, onImg }) => {\n  const user = useSelector(state => state.user);\n  return(\n    <div className=\"user_postregister_cont\">\n      <label htmlFor=\"perfilImg\">\n        {\n          !values.perfilImgFrontEnd && <FontAwesomeIcon icon={faUser} />\n        }\n        {\n          values.perfilImgFrontEnd && <img src={values.perfilImgFrontEnd} alt=\"\"/>\n        }\n        <input onChange={onImg} type=\"file\" name=\"perfilImg\" id=\"perfilImg\"/>\n      </label>\n      <p>Elige una foto de perfil</p>\n      {\n        user.name === 'Green' && (\n          <>\n          <input value={values.name} onChange={(e)=> setValues({ name: e.currentTarget.value })} placeholder=\"Nombre\" type=\"text\"/>\n          <input value={values.lastName} onChange={(e)=> setValues({ lastName: e.currentTarget.value })} placeholder=\"Apellido\" type=\"text\"/>\n          <div className=\"birth_sex_main\">\n              <p>Cumpleaños</p>\n              <input\n                type=\"date\"\n                value={values.birthday}\n                onChange={(e)=> setValues({ birthday: e.currentTarget.value })}\n              />\n            <div className=\"birthday_sex\" style={{ marginLeft: '1rem' }}>\n              <p>Sexo</p>\n              <select onChange={(e)=> setValues({ sex: e.currentTarget.value })} name=\"sex\" id=\"sex\">\n                <option value=\"female\">Mujer</option>\n                <option value=\"male\">Hombre</option>\n                <option value=\"otro\">Otro</option>\n              </select>\n            </div>\n          </div>\n          </>\n        )\n      }\n    </div>\n  )\n};\n\nconst PostRegister = () =>{\nconst dispatch = useDispatch();\nconst [values, setValues] = useReducer((state, next) => ({ ...state, ...next }),{\n  name: '',\n  lastName: '',\n  birthday: '',\n  sex: '',\n  perfilImgFrontEnd:'',\n  perfilImg: '',\n});\nconst user = useSelector(state => state.user);\nconst onImg = (e) => {\n  const img = e.target.files[0];\n  const reader = new FileReader();\n  reader.onloadend = () => {\n    if(reader.result){\n      setValues({ perfilImgFrontEnd: reader.result, perfilImg: img });\n    } else {\n      setValues({ perfilImgFrontEnd: null, perfilImg: null });\n    }\n  }\n  reader.readAsDataURL(img);\n}\n\n  const [section, setSection] = useReducer((state, next) => ({ ...state, ...next }), {\n    welcome: true,\n    info: false,\n    loader: false,\n    congratulations: false,\n  })\n  const visible = useSelector(state => state.postregister);\n\n  const onSubmit = async() => {\n    try{\n      const { name, lastName, birthday, sex, perfilImg } = values;\n      const data = new FormData();\n      setSection({ info: false, loader: true });\n      if(user.name === 'Green'){\n        data.append('name', name);\n        data.append('lastName', lastName);\n        data.append('birthday', birthday);\n        data.append('sex', sex);\n      }\n      data.append('perfilImg', perfilImg);\n      const res = await axios.post('/user/postregister', data);\n      dispatch({ type: ON_UPDATE, payload: res.data });\n      dispatch({ type: ON_WALLET, coin: 50 });\n      setSection({ loader: false, congratulations: true });\n      setTimeout(()=> {\n        dispatch({ type: ON_POST_REGISTER });\n      }, 3000)\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  return(\n    <Modal className=\"my_modal\" isOpen={visible}>\n      <div className=\"postregister_main_cont\">\n        <header><Logo dark url=\"/\"/></header>\n        <div className=\"body\">\n          {\n            section.welcome && <Welcome />\n          }\n          {\n            section.info && <UserInfo values={values} setValues={setValues} onImg={onImg} />\n          }\n          {\n            section.loader && <Loader dark />\n          }\n          {\n            section.congratulations && <Congratulations />\n          }\n        </div>\n        <footer>\n          {\n            section.welcome && <button onClick={()=> setSection({ welcome: false, info: true })}>siguiente</button>\n          }\n          {\n            section.info && <button onClick={onSubmit}>enviar</button>\n          }\n        </footer>\n      </div>\n    </Modal>\n  )\n}\n\nexport default PostRegister;\n"]},"metadata":{},"sourceType":"module"}