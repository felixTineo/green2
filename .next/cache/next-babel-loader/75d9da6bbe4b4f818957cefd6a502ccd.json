{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_WALLET, ON_GREEN_WISH_FOUND } from '../../store/actions';\nimport { ON_STORE } from '../../store/actions';\nimport './wish.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nvar Wish = function Wish() {\n  var wish = useSelector(function (state) {\n    return state.greenpost.current.wish;\n  });\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var pid = useSelector(function (state) {\n    return state.greenpost.current._id;\n  });\n\n  var _useState = useState(0),\n      tip = _useState[0],\n      setTip = _useState[1];\n\n  var dispatch = useDispatch();\n\n  var _useState2 = useState(wish.found),\n      found = _useState2[0],\n      setFound = _useState2[1];\n\n  var inputTip = useRef();\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var res, parseTip;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              e.preventDefault();\n              setFound(wish.found + _parseInt(tip, 10));\n              _context.next = 5;\n              return axios.get(\"/green/tip/\".concat(pid, \"/\").concat(tip));\n\n            case 5:\n              res = _context.sent;\n              parseTip = _parseInt(tip, 10);\n              dispatch({\n                type: ON_WALLET,\n                coin: -parseTip\n              });\n              dispatch({\n                type: ON_GREEN_WISH_FOUND,\n                found: parseTip\n              });\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"wish_main_cont animated fadeIn\"\n  }, !wish.name && __jsx(\"div\", {\n    className: \"nowish_main_cont\"\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: ON_STORE\n      });\n    },\n    disabled: !user.owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  }), user.owner ? __jsx(\"p\", null, \"Elige un deseo, podria concederse muy pronto.\") : __jsx(\"p\", null, user.name, \" aun no a elegido un deseo\"))), wish.name && __jsx(\"div\", {\n    className: \"wish_cont shadow\"\n  }, __jsx(\"img\", {\n    src: wish.img,\n    alt: \"\"\n  }), found !== wish.price && __jsx(\"form\", {\n    onSubmit: onSubmit\n  }, __jsx(\"input\", {\n    value: tip,\n    onChange: function onChange(e) {\n      return setTip(e.currentTarget.value > wish.price - found ? wish.price - found : e.currentTarget.value);\n    },\n    type: \"number\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\")), __jsx(\"div\", {\n    className: \"wish_loader_cont\"\n  }, __jsx(\"div\", {\n    className: \"wish_loader\",\n    style: {\n      width: \"\".concat(found * 100 / wish.price, \"%\")\n    }\n  })), __jsx(\"footer\", null, __jsx(\"p\", null, wish.name), __jsx(\"p\", null, \"$\", wish.price))));\n};\n\nexport default Wish;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/greenpost/wish.jsx"],"names":["React","useState","useRef","useEffect","useSelector","useDispatch","ON_WALLET","ON_GREEN_WISH_FOUND","ON_STORE","FontAwesomeIcon","faGift","axios","Wish","wish","state","greenpost","current","user","pid","_id","tip","setTip","dispatch","found","setFound","inputTip","onSubmit","e","preventDefault","get","res","parseTip","type","coin","console","log","name","owner","img","price","currentTarget","value","width"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_WALLET, ON_GREEN_WISH_FOUND } from '../../store/actions';\nimport { ON_STORE } from '../../store/actions';\nimport './wish.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nconst Wish = () => {\n  const wish = useSelector(state => state.greenpost.current.wish);\n  const user = useSelector(state => state.user);\n  const pid = useSelector(state => state.greenpost.current._id);\n  const [tip, setTip] = useState(0);\n  const dispatch = useDispatch();\n  const [found, setFound] = useState(wish.found);\n  const inputTip = useRef();\n  const onSubmit = async(e) => {\n    try{\n      e.preventDefault();\n      setFound(wish.found + parseInt(tip, 10));\n      const res = await axios.get(`/green/tip/${pid}/${tip}`);\n      const parseTip = parseInt(tip, 10);\n      dispatch({ type: ON_WALLET, coin: -parseTip });\n      dispatch({ type: ON_GREEN_WISH_FOUND, found: parseTip });\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return(\n    <div className=\"wish_main_cont animated fadeIn\">\n      {\n        !wish.name && (\n          <div className=\"nowish_main_cont\">\n            <button onClick={()=> dispatch({ type: ON_STORE })} disabled={!user.owner}>\n              <FontAwesomeIcon icon={faGift} />\n              {\n                user.owner\n                  ? <p>Elige un deseo, podria concederse muy pronto.</p>\n                  : <p>{user.name} aun no a elegido un deseo</p>\n              }\n            </button>\n          </div>\n        )\n      }\n      {\n        wish.name && (\n          <div className=\"wish_cont shadow\">\n            <img src={wish.img} alt=\"\"/>\n            {\n              found !== wish.price && (\n                <form onSubmit={onSubmit}>\n                  <input value={tip} onChange={(e)=> setTip(e.currentTarget.value > wish.price - found ? wish.price - found : e.currentTarget.value)} type=\"number\" />\n                  <button type=\"submit\">enviar</button>\n                </form>\n              )\n            }\n            <div className=\"wish_loader_cont\">\n              <div\n                className=\"wish_loader\"\n                style={{ width: `${(found * 100)/wish.price}%` }}\n              />\n            </div>\n            <footer>\n              <p>{wish.name}</p>\n              <p>${wish.price}</p>\n            </footer>\n          </div>\n        )\n      }\n    </div>\n  );\n}\n\nexport default Wish;\n"]},"metadata":{},"sourceType":"module"}