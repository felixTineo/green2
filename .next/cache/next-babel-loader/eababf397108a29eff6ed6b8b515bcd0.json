{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { ON_STORE, ON_UPDATE } from '../../store/actions';\nimport './user.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift, faMapMarkerAlt, faDollarSign, faSchool, faMailBulk, faPhone } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nconst Info = () => {\n  const {\n    name,\n    lastName,\n    perfilImg,\n    owner\n  } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  return __jsx(\"div\", {\n    className: \"user_info\"\n  }, __jsx(\"img\", {\n    src: perfilImg,\n    alt: \"\"\n  }), __jsx(\"div\", {\n    className: \"user_name\"\n  }, __jsx(\"p\", null, __jsx(\"span\", null, name), \" \", lastName), !owner && __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: ON_STORE\n    }),\n    type: \"button\",\n    title: \"Enviar Regalo\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  }))));\n};\n\nconst ExtraInfo = () => {\n  const {\n    actualCity,\n    job,\n    primaryShool,\n    mail,\n    phone,\n    owner\n  } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const {\n    0: pop,\n    1: setPop\n  } = useReducer((state, nextState) => _objectSpread({}, state, nextState), {\n    actualCity: false,\n    job: false,\n    primaryShool: false,\n    mail: false,\n    phone: false\n  });\n  const {\n    0: values,\n    1: setValues\n  } = useReducer((state, nextState) => _objectSpread({}, state, nextState), {\n    actualCity: '',\n    job: '',\n    primaryShool: '',\n    mail: '',\n    phone: ''\n  });\n  useEffect(() => {\n    setPop({\n      actualCity: false,\n      job: false,\n      primaryShool: false,\n      mail: false,\n      phone: false\n    });\n  }, [mail]);\n\n  const onPop = id => {\n    for (let key in pop) {\n      if (id === key) {\n        console.log(key);\n        setPop({\n          [key]: !pop[key]\n        });\n      } else {\n        setPop({\n          [key]: false\n        });\n      }\n    }\n  };\n\n  const onUpdate = async e => {\n    try {\n      e.preventDefault();\n      const data = {\n        key: e.target.id,\n        value: values[e.target.id]\n      };\n      await axios.post('/user/update', data);\n      dispatch({\n        type: ON_UPDATE,\n        payload: {\n          [data.key]: data.value\n        }\n      });\n      setPop({\n        [data.key]: false\n      });\n      setValues({\n        [data.key]: ''\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"ul\", {\n    className: \"extrainfo_main_cont\"\n  }, __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: e => onPop(e.currentTarget.id),\n    id: \"actualCity\",\n    title: owner ? \"Cambiar ubicación\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faMapMarkerAlt\n  }), __jsx(\"span\", null, \" ubicacion: \"), __jsx(\"strong\", null, actualCity)), __jsx(Popover, {\n    isOpen: pop.actualCity,\n    placement: \"bottom\",\n    target: \"actualCity\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"actualCity\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.actualCity,\n    onChange: e => setValues({\n      actualCity: e.currentTarget.value\n    }),\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: e => onPop(e.currentTarget.id),\n    id: \"job\",\n    title: owner ? \"Cambiar trabajo\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faDollarSign\n  }), __jsx(\"span\", null, \" trabajo: \"), __jsx(\"strong\", null, job || 'la psiencia')), __jsx(Popover, {\n    isOpen: pop.job,\n    placement: \"bottom\",\n    target: \"job\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"job\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.job,\n    onChange: e => setValues({\n      job: e.currentTarget.value\n    }),\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: e => onPop(e.currentTarget.id),\n    id: \"primaryShool\",\n    title: owner ? \"Cambiar escuela\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSchool\n  }), __jsx(\"span\", null, \" escuela: \"), __jsx(\"strong\", null, primaryShool || 'De la vida')), __jsx(Popover, {\n    isOpen: pop.primaryShool,\n    placement: \"bottom\",\n    target: \"primaryShool\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"primaryShool\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.primaryShool,\n    onChange: e => setValues({\n      primaryShool: e.currentTarget.value\n    }),\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: e => onPop(e.currentTarget.id),\n    id: \"mail\",\n    title: owner ? \"Cambiar mail\" : null,\n    disabled: true\n  }, __jsx(FontAwesomeIcon, {\n    icon: faMailBulk\n  }), __jsx(\"span\", null, \" mail: \"), __jsx(\"strong\", null, mail)), __jsx(Popover, {\n    isOpen: pop.mail,\n    placement: \"bottom\",\n    target: \"mail\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"mail\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.mail,\n    onChange: e => setValues({\n      mail: e.currentTarget.value\n    }),\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: e => onPop(e.currentTarget.id),\n    id: \"phone\",\n    title: owner ? \"Cambiar telefono\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faPhone\n  }), __jsx(\"span\", null, \" telef\\xF3no: \"), __jsx(\"strong\", null, phone || '555-55-55-55')), __jsx(Popover, {\n    isOpen: pop.phone,\n    placement: \"bottom\",\n    target: \"phone\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"phone\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.phone,\n    onChange: e => setValues({\n      phone: e.currentTarget.value\n    }),\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))));\n};\n\nconst User = () => {\n  const user = useSelector(state => state.user);\n  return __jsx(\"div\", {\n    className: \"user_main_cont\"\n  }, __jsx(Info, null), __jsx(ExtraInfo, null), __jsx(\"svg\", {\n    id: \"arrow_right\",\n    className: \"arrow_user d-none d-md-block\",\n    viewBox: \"0 0 60 70\",\n    width: \"60\",\n    height: \"70\"\n  }, __jsx(\"polyline\", {\n    strokeWidth: \"3px\",\n    stroke: \"#8bb940\",\n    fill: \"transparent\",\n    points: \"20,0 50,35 20,70\"\n  })));\n};\n\nexport default User;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/space/user.jsx"],"names":["React","useReducer","useEffect","useState","useSelector","useDispatch","Popover","PopoverBody","ON_STORE","ON_UPDATE","FontAwesomeIcon","faGift","faMapMarkerAlt","faDollarSign","faSchool","faMailBulk","faPhone","axios","Info","name","lastName","perfilImg","owner","state","user","dispatch","type","ExtraInfo","actualCity","job","primaryShool","mail","phone","pop","setPop","nextState","values","setValues","onPop","id","key","console","log","onUpdate","e","preventDefault","data","target","value","post","payload","err","currentTarget","User"],"mappings":"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","sourcesContent":["import React, { useReducer, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { ON_STORE, ON_UPDATE } from '../../store/actions';\nimport './user.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faGift,\n  faMapMarkerAlt,\n  faDollarSign,\n  faSchool,\n  faMailBulk,\n  faPhone,\n} from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nconst Info = () => {\n  const { name, lastName, perfilImg, owner } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n\n  return(\n    <div className=\"user_info\">\n      <img src={perfilImg} alt=\"\"/>\n      <div className=\"user_name\">\n        <p><span>{name}</span>{\" \"}{lastName}</p>\n        {!owner && <button onClick={()=> dispatch({ type: ON_STORE })} type=\"button\" title=\"Enviar Regalo\"><FontAwesomeIcon icon={faGift} /></button> }\n      </div>\n    </div>\n  )\n};\n\nconst ExtraInfo = () => {\n  const { actualCity, job, primaryShool, mail, phone, owner } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n\n  const [pop, setPop] = useReducer((state, nextState) => ({ ...state, ...nextState }), {\n    actualCity: false,\n    job: false,\n    primaryShool: false,\n    mail: false,\n    phone: false,\n  });\n\n  const [values, setValues] = useReducer((state, nextState) => ({ ...state, ...nextState }), {\n    actualCity: '',\n    job: '',\n    primaryShool: '',\n    mail: '',\n    phone: '',\n  })\n\n  useEffect(()=> {\n    setPop({ actualCity: false, job: false, primaryShool: false, mail: false, phone: false });\n  },[mail]);\n\n  const onPop = (id) => {\n    for(let key  in pop) {\n      if(id === key){\n        console.log(key);\n        setPop({ [key]: !pop[key] });\n      } else {\n        setPop({[key]: false});\n      }\n    }\n  }\n\n  const onUpdate = async(e) => {\n    try{\n      e.preventDefault();\n      const data = { key: e.target.id, value: values[e.target.id] };\n      await axios.post('/user/update', data);\n      dispatch({ type: ON_UPDATE, payload: { [data.key]: data.value } });\n      setPop({[data.key]: false});\n      setValues({[data.key]: ''});\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  return(\n    <ul className=\"extrainfo_main_cont\">\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"actualCity\" title={owner ? \"Cambiar ubicación\" : null} disabled={!owner}>\n            <FontAwesomeIcon icon={faMapMarkerAlt} />\n            <span> ubicacion: </span>\n            <strong>{actualCity}</strong>\n        </button>\n        <Popover isOpen={pop.actualCity} placement=\"bottom\" target=\"actualCity\">\n          <PopoverBody>\n            <form id=\"actualCity\" onSubmit={onUpdate}>\n              <input value={values.actualCity} onChange={(e)=> setValues({ actualCity: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"job\" title={owner ? \"Cambiar trabajo\" : null} disabled={!owner}>\n          <FontAwesomeIcon icon={faDollarSign} />\n          <span> trabajo: </span>\n          <strong>{job || 'la psiencia'}</strong>\n        </button>\n        <Popover isOpen={pop.job} placement=\"bottom\" target=\"job\">\n          <PopoverBody>\n            <form id=\"job\" onSubmit={onUpdate}>\n              <input value={values.job} onChange={(e)=> setValues({ job: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"primaryShool\" title={owner ? \"Cambiar escuela\" : null} disabled={!owner}>\n          <FontAwesomeIcon icon={faSchool} />\n          <span> escuela: </span>\n          <strong>{primaryShool || 'De la vida'}</strong>\n        </button>\n        <Popover isOpen={pop.primaryShool} placement=\"bottom\" target=\"primaryShool\">\n          <PopoverBody>\n            <form id=\"primaryShool\" onSubmit={onUpdate}>\n              <input value={values.primaryShool} onChange={(e)=> setValues({ primaryShool: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"mail\" title={owner ? \"Cambiar mail\" : null} disabled={true}>\n          <FontAwesomeIcon icon={faMailBulk} />\n          <span> mail: </span>\n          <strong>{mail}</strong>\n        </button>\n        <Popover isOpen={pop.mail} placement=\"bottom\" target=\"mail\">\n          <PopoverBody>\n            <form id=\"mail\" onSubmit={onUpdate}>\n              <input value={values.mail} onChange={(e)=> setValues({ mail: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n      <li>\n        <button onClick={(e)=> onPop(e.currentTarget.id)} id=\"phone\" title={owner ? \"Cambiar telefono\" : null} disabled={!owner}>\n          <FontAwesomeIcon icon={faPhone} />\n          <span> telefóno: </span>\n          <strong>{phone || '555-55-55-55'}</strong>\n        </button>\n        <Popover isOpen={pop.phone} placement=\"bottom\" target=\"phone\">\n          <PopoverBody>\n            <form id=\"phone\" onSubmit={onUpdate}>\n              <input value={values.phone} onChange={(e)=> setValues({ phone: e.currentTarget.value })} type=\"text\"/>\n              <button type=\"submit\">enviar</button>\n            </form>\n          </PopoverBody>\n        </Popover>\n      </li>\n    </ul>\n  )\n}\n\nconst User = () => {\n  const user = useSelector(state => state.user);\n  return(\n    <div className=\"user_main_cont\">\n      <Info />\n      <ExtraInfo />\n      <svg id=\"arrow_right\" className=\"arrow_user d-none d-md-block\" viewBox=\"0 0 60 70\" width=\"60\" height=\"70\">\n        <polyline strokeWidth=\"3px\" stroke=\"#8bb940\" fill=\"transparent\" points=\"20,0 50,35 20,70\" />\n      </svg>\n    </div>\n  )\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}