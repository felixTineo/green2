{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { ON_STORE, ON_UPDATE } from '../../store/actions';\nimport './user.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift, faMapMarkerAlt, faDollarSign, faSchool, faMailBulk, faPhone } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nvar Info = function Info() {\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      name = _useSelector.name,\n      lastName = _useSelector.lastName,\n      perfilImg = _useSelector.perfilImg,\n      owner = _useSelector.owner;\n\n  var dispatch = useDispatch();\n  return __jsx(\"div\", {\n    className: \"user_info\"\n  }, __jsx(\"img\", {\n    src: perfilImg,\n    alt: \"\"\n  }), __jsx(\"div\", {\n    className: \"user_name\"\n  }, __jsx(\"p\", null, __jsx(\"span\", null, name), \" \", lastName), !owner && __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: ON_STORE\n      });\n    },\n    type: \"button\",\n    title: \"Enviar Regalo\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  }))));\n};\n\nvar ExtraInfo = function ExtraInfo() {\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      actualCity = _useSelector2.actualCity,\n      job = _useSelector2.job,\n      primaryShool = _useSelector2.primaryShool,\n      mail = _useSelector2.mail,\n      phone = _useSelector2.phone,\n      owner = _useSelector2.owner;\n\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(function (state, nextState) {\n    return _objectSpread({}, state, nextState);\n  }, {\n    actualCity: false,\n    job: false,\n    primaryShool: false,\n    mail: false,\n    phone: false\n  }),\n      pop = _useReducer[0],\n      setPop = _useReducer[1];\n\n  var _useReducer2 = useReducer(function (state, nextState) {\n    return _objectSpread({}, state, nextState);\n  }, {\n    actualCity: '',\n    job: '',\n    primaryShool: '',\n    mail: '',\n    phone: ''\n  }),\n      values = _useReducer2[0],\n      setValues = _useReducer2[1];\n\n  useEffect(function () {\n    setPop({\n      actualCity: false,\n      job: false,\n      primaryShool: false,\n      mail: false,\n      phone: false\n    });\n  }, [mail]);\n\n  var onPop = function onPop(id) {\n    for (var key in pop) {\n      if (id === key) {\n        console.log(key);\n        setPop(_defineProperty({}, key, !pop[key]));\n      } else {\n        setPop(_defineProperty({}, key, false));\n      }\n    }\n  };\n\n  var onUpdate =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              e.preventDefault();\n              data = {\n                key: e.target.id,\n                value: values[e.target.id]\n              };\n              _context.next = 5;\n              return axios.post('/user/update', data);\n\n            case 5:\n              dispatch({\n                type: ON_UPDATE,\n                payload: _defineProperty({}, data.key, data.value)\n              });\n              setPop(_defineProperty({}, data.key, false));\n              setValues(_defineProperty({}, data.key, ''));\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 10]]);\n    }));\n\n    return function onUpdate(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"ul\", {\n    className: \"extrainfo_main_cont\"\n  }, __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"actualCity\",\n    title: owner ? \"Cambiar ubicaci√≥n\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faMapMarkerAlt\n  }), __jsx(\"span\", null, \" ubicacion: \"), __jsx(\"strong\", null, actualCity)), __jsx(Popover, {\n    isOpen: pop.actualCity,\n    placement: \"bottom\",\n    target: \"actualCity\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"actualCity\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.actualCity,\n    onChange: function onChange(e) {\n      return setValues({\n        actualCity: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"job\",\n    title: owner ? \"Cambiar trabajo\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faDollarSign\n  }), __jsx(\"span\", null, \" trabajo: \"), __jsx(\"strong\", null, job || 'la psiencia')), __jsx(Popover, {\n    isOpen: pop.job,\n    placement: \"bottom\",\n    target: \"job\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"job\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.job,\n    onChange: function onChange(e) {\n      return setValues({\n        job: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"primaryShool\",\n    title: owner ? \"Cambiar escuela\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faSchool\n  }), __jsx(\"span\", null, \" escuela: \"), __jsx(\"strong\", null, primaryShool || 'De la vida')), __jsx(Popover, {\n    isOpen: pop.primaryShool,\n    placement: \"bottom\",\n    target: \"primaryShool\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"primaryShool\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.primaryShool,\n    onChange: function onChange(e) {\n      return setValues({\n        primaryShool: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"mail\",\n    title: owner ? \"Cambiar mail\" : null,\n    disabled: true\n  }, __jsx(FontAwesomeIcon, {\n    icon: faMailBulk\n  }), __jsx(\"span\", null, \" mail: \"), __jsx(\"strong\", null, mail)), __jsx(Popover, {\n    isOpen: pop.mail,\n    placement: \"bottom\",\n    target: \"mail\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"mail\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.mail,\n    onChange: function onChange(e) {\n      return setValues({\n        mail: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick(e) {\n      return onPop(e.currentTarget.id);\n    },\n    id: \"phone\",\n    title: owner ? \"Cambiar telefono\" : null,\n    disabled: !owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faPhone\n  }), __jsx(\"span\", null, \" telef\\xF3no: \"), __jsx(\"strong\", null, phone || '555-55-55-55')), __jsx(Popover, {\n    isOpen: pop.phone,\n    placement: \"bottom\",\n    target: \"phone\"\n  }, __jsx(PopoverBody, null, __jsx(\"form\", {\n    id: \"phone\",\n    onSubmit: onUpdate\n  }, __jsx(\"input\", {\n    value: values.phone,\n    onChange: function onChange(e) {\n      return setValues({\n        phone: e.currentTarget.value\n      });\n    },\n    type: \"text\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\"))))));\n};\n\nvar User = function User() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"user_main_cont\"\n  }, __jsx(\"div\", {\n    id: \"user_space\",\n    className: \"shadow-sm rounded\"\n  }, __jsx(Info, null), __jsx(ExtraInfo, null)), __jsx(\"svg\", {\n    id: \"arrow_right\",\n    className: \"arrow_user d-none d-md-block\",\n    viewBox: \"0 0 45 70\",\n    width: \"45\",\n    height: \"70\"\n  }, __jsx(\"polyline\", {\n    strokeWidth: \"2px\",\n    stroke: \"#8bb940\",\n    fill: \"transparent\",\n    points: \"5,0 20,35 5,70\"\n  })));\n};\n\nexport default User;","map":null,"metadata":{},"sourceType":"module"}