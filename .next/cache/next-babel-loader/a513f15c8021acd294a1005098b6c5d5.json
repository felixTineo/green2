{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_POST_REGISTER, ON_GREEN_CREATOR } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport { Modal } from 'reactstrap';\nimport './postregister.scss';\nimport Logo from '../layout/logo';\nimport axios from 'axios';\nimport Loader from '../loader/loader';\n\nvar BtnUpload = function BtnUpload() {\n  return __jsx(\"div\", {\n    className: \"btnUpload_main_cont\"\n  }, __jsx(\"label\", {\n    htmlFor: \"img\"\n  }, __jsx(\"div\", {\n    className: \"img_cont\"\n  }, __jsx(\"img\", {\n    src: \"\",\n    alt: \"\"\n  }), __jsx(FontAwesomeIcon, {\n    icon: faUser\n  })), __jsx(\"input\", {\n    id: \"img\",\n    name: \"img\",\n    type: \"file\"\n  })));\n};\n\nvar Welcome = function Welcome() {\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\"\n  }, __jsx(\"h1\", null, \"Bienvenido a \", __jsx(\"span\", null, \"Greenlink!\")), __jsx(\"p\", null, \"Completa el registro agregando informacion adicional y creando tu primer \", __jsx(\"strong\", null, \"GreenPost,\"), \" de esta manera podras ser encontrado por otros usuarios ademas de recibir obsequios. Recuerda, mietras mas preciso seas mas facil sera que tus seres queridos contacten contigo.\"));\n};\n\nvar Congratulations = function Congratulations() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\"\n  }, __jsx(\"h1\", null, \"Felicidades \", user.name), __jsx(\"p\", null, \"No olvides crear tu primer\", __jsx(\"strong\", null, \"GreenPost,\")));\n};\n\nvar UserInfo = function UserInfo(_ref) {\n  var values = _ref.values,\n      setValues = _ref.setValues,\n      onImg = _ref.onImg;\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"user_postregister_cont\"\n  }, __jsx(\"label\", {\n    htmlFor: \"perfilImg\"\n  }, !values.perfilImgFrontEnd && __jsx(FontAwesomeIcon, {\n    icon: faUser\n  }), values.perfilImgFrontEnd && __jsx(\"img\", {\n    src: values.perfilImgFrontEnd,\n    alt: \"\"\n  }), __jsx(\"input\", {\n    onChange: onImg,\n    type: \"file\",\n    name: \"perfilImg\",\n    id: \"perfilImg\"\n  })), __jsx(\"p\", null, \"Elige una foto de perfil\"), user.name === 'Green' && __jsx(React.Fragment, null, __jsx(\"input\", {\n    value: values.name,\n    onChange: function onChange(e) {\n      return setValues({\n        name: e.currentTarget.value\n      });\n    },\n    placeholder: \"Nombre\",\n    type: \"text\"\n  }), __jsx(\"input\", {\n    value: values.lastName,\n    onChange: function onChange(e) {\n      return setValues({\n        lastName: e.currentTarget.value\n      });\n    },\n    placeholder: \"Apellido\",\n    type: \"text\"\n  }), __jsx(\"div\", {\n    className: \"birth_sex_main\"\n  }, __jsx(\"p\", null, \"Cumplea\\xF1os\"), __jsx(\"input\", {\n    type: \"date\",\n    value: values.birthday,\n    onChange: function onChange(e) {\n      return setValues({\n        birthday: e.currentTarget.value\n      });\n    }\n  }), __jsx(\"div\", {\n    className: \"birthday_sex\",\n    style: {\n      marginLeft: '1rem'\n    }\n  }, __jsx(\"p\", null, \"Sexo\"), __jsx(\"select\", {\n    onChange: function onChange(e) {\n      return setValues({\n        sex: e.currentTarget.value\n      });\n    },\n    name: \"sex\",\n    id: \"sex\"\n  }, __jsx(\"option\", {\n    value: \"female\"\n  }, \"Mujer\"), __jsx(\"option\", {\n    value: \"male\"\n  }, \"Hombre\"), __jsx(\"option\", {\n    value: \"otro\"\n  }, \"Otro\"))))));\n};\n\nvar PostRegister = function PostRegister() {\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    name: '',\n    lastName: '',\n    birthday: '',\n    sex: '',\n    perfilImgFrontEnd: '',\n    perfilImg: ''\n  }),\n      values = _useReducer[0],\n      setValues = _useReducer[1];\n\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n\n  var onImg = function onImg(e) {\n    var img = e.target.files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      if (reader.result) {\n        setValues({\n          perfilImgFrontEnd: reader.result,\n          perfilImg: img\n        });\n      } else {\n        setValues({\n          perfilImgFrontEnd: null,\n          perfilImg: null\n        });\n      }\n    };\n\n    reader.readAsDataURL(img);\n    console.log(perfilImg);\n    console.log(img);\n  };\n\n  var _useReducer2 = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    welcome: true,\n    info: false,\n    loader: false,\n    congratulations: false\n  }),\n      section = _useReducer2[0],\n      setSection = _useReducer2[1];\n\n  var visible = useSelector(function (state) {\n    return state.postregister;\n  });\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var name, lastName, birthday, sex, _perfilImg, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              name = values.name, lastName = values.lastName, birthday = values.birthday, sex = values.sex, _perfilImg = values.perfilImg;\n              data = new FormData();\n              setSection({\n                info: false,\n                loader: true\n              });\n\n              if (user.name === 'Green') {\n                data.append('name', name);\n                data.append('lastName', lastName);\n                data.append('birthday', birthday);\n                data.append('sex', sex);\n              }\n\n              data.append('perfilImg', _perfilImg);\n              _context.next = 8;\n              return axios.post('/user/postregister', data);\n\n            case 8:\n              setSection({\n                loader: false,\n                congratulations: true\n              });\n              setTimeout(function () {\n                dispatch({\n                  type: ON_POST_REGISTER\n                });\n              }, 3000);\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 12]]);\n    }));\n\n    return function onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Modal, {\n    className: \"my_modal\",\n    isOpen: visible\n  }, __jsx(\"div\", {\n    className: \"postregister_main_cont\"\n  }, __jsx(\"header\", null, __jsx(Logo, {\n    dark: true,\n    url: \"/\"\n  })), __jsx(\"div\", {\n    className: \"body\"\n  }, section.welcome && __jsx(Welcome, null), section.info && __jsx(UserInfo, {\n    values: values,\n    setValues: setValues,\n    onImg: onImg\n  }), section.loader && __jsx(Loader, {\n    dark: true\n  }), section.congratulations && __jsx(Congratulations, null)), __jsx(\"footer\", null, section.welcome && __jsx(\"button\", {\n    onClick: function onClick() {\n      return setSection({\n        welcome: false,\n        info: true\n      });\n    }\n  }, \"siguiente\"), section.info && __jsx(\"button\", {\n    onClick: onSubmit\n  }, \"enviar\"))));\n};\n\nexport default PostRegister;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/postregister/postregister.jsx"],"names":["React","useReducer","useState","useSelector","useDispatch","ON_POST_REGISTER","ON_GREEN_CREATOR","FontAwesomeIcon","faUser","Modal","Logo","axios","Loader","BtnUpload","Welcome","Congratulations","user","state","name","UserInfo","values","setValues","onImg","perfilImgFrontEnd","e","currentTarget","value","lastName","birthday","marginLeft","sex","PostRegister","dispatch","next","perfilImg","img","target","files","reader","FileReader","onloadend","result","readAsDataURL","console","log","welcome","info","loader","congratulations","section","setSection","visible","postregister","onSubmit","data","FormData","append","post","setTimeout","type"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,gBAAT,EAA2BC,gBAA3B,QAAmD,qBAAnD;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,MAAT,QAAuB,mCAAvB;AACA,SAASC,KAAT,QAAsB,YAAtB;AACA,OAAO,qBAAP;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;;AAGA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AAEtB,SACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAO,IAAA,OAAO,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,GAAG,EAAC,EAAT;AAAY,IAAA,GAAG,EAAC;AAAhB,IADF,EAEE,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEL;AAAvB,IAFF,CADF,EAKE;AAAO,IAAA,EAAE,EAAC,KAAV;AAAgB,IAAA,IAAI,EAAC,KAArB;AAA2B,IAAA,IAAI,EAAC;AAAhC,IALF,CADF,CADF;AAWD,CAbD;;AAeA,IAAMM,OAAO,GAAG,SAAVA,OAAU,GAAM;AAEpB,SACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,mCAAiB,iCAAjB,CADF,EAEE,8FAA4E,mCAA5E,sLAFF,CADF;AAMD,CARD;;AAUA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,MAAMC,IAAI,GAAGb,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACD,IAAV;AAAA,GAAN,CAAxB;AACA,SACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,kCAAiBA,IAAI,CAACE,IAAtB,CADF,EAEE,+CAA6B,mCAA7B,CAFF,CADF;AAMD,CARD;;AAUA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAAkC;AAAA,MAA/BC,MAA+B,QAA/BA,MAA+B;AAAA,MAAvBC,SAAuB,QAAvBA,SAAuB;AAAA,MAAZC,KAAY,QAAZA,KAAY;AACjD,MAAMN,IAAI,GAAGb,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACD,IAAV;AAAA,GAAN,CAAxB;AACA,SACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAO,IAAA,OAAO,EAAC;AAAf,KAEI,CAACI,MAAM,CAACG,iBAAR,IAA6B,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEf;AAAvB,IAFjC,EAKIY,MAAM,CAACG,iBAAP,IAA4B;AAAK,IAAA,GAAG,EAAEH,MAAM,CAACG,iBAAjB;AAAoC,IAAA,GAAG,EAAC;AAAxC,IALhC,EAOE;AAAO,IAAA,QAAQ,EAAED,KAAjB;AAAwB,IAAA,IAAI,EAAC,MAA7B;AAAoC,IAAA,IAAI,EAAC,WAAzC;AAAqD,IAAA,EAAE,EAAC;AAAxD,IAPF,CADF,EAUE,4CAVF,EAYIN,IAAI,CAACE,IAAL,KAAc,OAAd,IACE,4BACA;AAAO,IAAA,KAAK,EAAEE,MAAM,CAACF,IAArB;AAA2B,IAAA,QAAQ,EAAE,kBAACM,CAAD;AAAA,aAAMH,SAAS,CAAC;AAAEH,QAAAA,IAAI,EAAEM,CAAC,CAACC,aAAF,CAAgBC;AAAxB,OAAD,CAAf;AAAA,KAArC;AAAuF,IAAA,WAAW,EAAC,QAAnG;AAA4G,IAAA,IAAI,EAAC;AAAjH,IADA,EAEA;AAAO,IAAA,KAAK,EAAEN,MAAM,CAACO,QAArB;AAA+B,IAAA,QAAQ,EAAE,kBAACH,CAAD;AAAA,aAAMH,SAAS,CAAC;AAAEM,QAAAA,QAAQ,EAAEH,CAAC,CAACC,aAAF,CAAgBC;AAA5B,OAAD,CAAf;AAAA,KAAzC;AAA+F,IAAA,WAAW,EAAC,UAA3G;AAAsH,IAAA,IAAI,EAAC;AAA3H,IAFA,EAGA;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,iCADJ,EAEI;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAEN,MAAM,CAACQ,QAFhB;AAGE,IAAA,QAAQ,EAAE,kBAACJ,CAAD;AAAA,aAAMH,SAAS,CAAC;AAAEO,QAAAA,QAAQ,EAAEJ,CAAC,CAACC,aAAF,CAAgBC;AAA5B,OAAD,CAAf;AAAA;AAHZ,IAFJ,EAOE;AAAK,IAAA,SAAS,EAAC,cAAf;AAA8B,IAAA,KAAK,EAAE;AAAEG,MAAAA,UAAU,EAAE;AAAd;AAArC,KACE,wBADF,EAEE;AAAQ,IAAA,QAAQ,EAAE,kBAACL,CAAD;AAAA,aAAMH,SAAS,CAAC;AAAES,QAAAA,GAAG,EAAEN,CAAC,CAACC,aAAF,CAAgBC;AAAvB,OAAD,CAAf;AAAA,KAAlB;AAAmE,IAAA,IAAI,EAAC,KAAxE;AAA8E,IAAA,EAAE,EAAC;AAAjF,KACE;AAAQ,IAAA,KAAK,EAAC;AAAd,aADF,EAEE;AAAQ,IAAA,KAAK,EAAC;AAAd,cAFF,EAGE;AAAQ,IAAA,KAAK,EAAC;AAAd,YAHF,CAFF,CAPF,CAHA,CAbN,CADF;AAsCD,CAxCD;;AA0CA,IAAMK,YAAY,GAAG,SAAfA,YAAe,GAAK;AAC1B,MAAMC,QAAQ,GAAG5B,WAAW,EAA5B;;AAD0B,oBAEEH,UAAU,CAAC,UAACgB,KAAD,EAAQgB,IAAR;AAAA,6BAAuBhB,KAAvB,EAAiCgB,IAAjC;AAAA,GAAD,EAA0C;AAC9Ef,IAAAA,IAAI,EAAE,EADwE;AAE9ES,IAAAA,QAAQ,EAAE,EAFoE;AAG9EC,IAAAA,QAAQ,EAAE,EAHoE;AAI9EE,IAAAA,GAAG,EAAE,EAJyE;AAK9EP,IAAAA,iBAAiB,EAAC,EAL4D;AAM9EW,IAAAA,SAAS,EAAE;AANmE,GAA1C,CAFZ;AAAA,MAEnBd,MAFmB;AAAA,MAEXC,SAFW;;AAU1B,MAAML,IAAI,GAAGb,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACD,IAAV;AAAA,GAAN,CAAxB;;AACA,MAAMM,KAAK,GAAG,SAARA,KAAQ,CAACE,CAAD,EAAO;AACnB,QAAMW,GAAG,GAAGX,CAAC,CAACY,MAAF,CAASC,KAAT,CAAe,CAAf,CAAZ;AACA,QAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,IAAAA,MAAM,CAACE,SAAP,GAAmB,YAAM;AACvB,UAAGF,MAAM,CAACG,MAAV,EAAiB;AACfpB,QAAAA,SAAS,CAAC;AAAEE,UAAAA,iBAAiB,EAAEe,MAAM,CAACG,MAA5B;AAAoCP,UAAAA,SAAS,EAAEC;AAA/C,SAAD,CAAT;AACD,OAFD,MAEO;AACLd,QAAAA,SAAS,CAAC;AAAEE,UAAAA,iBAAiB,EAAE,IAArB;AAA2BW,UAAAA,SAAS,EAAE;AAAtC,SAAD,CAAT;AACD;AACF,KAND;;AAOAI,IAAAA,MAAM,CAACI,aAAP,CAAqBP,GAArB;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAYV,SAAZ;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACD,GAbD;;AAX0B,qBA0BMlC,UAAU,CAAC,UAACgB,KAAD,EAAQgB,IAAR;AAAA,6BAAuBhB,KAAvB,EAAiCgB,IAAjC;AAAA,GAAD,EAA2C;AACjFY,IAAAA,OAAO,EAAE,IADwE;AAEjFC,IAAAA,IAAI,EAAE,KAF2E;AAGjFC,IAAAA,MAAM,EAAE,KAHyE;AAIjFC,IAAAA,eAAe,EAAE;AAJgE,GAA3C,CA1BhB;AAAA,MA0BjBC,OA1BiB;AAAA,MA0BRC,UA1BQ;;AAgCxB,MAAMC,OAAO,GAAGhD,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACmC,YAAV;AAAA,GAAN,CAA3B;;AAEA,MAAMC,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAELnC,cAAAA,IAFK,GAEwCE,MAFxC,CAELF,IAFK,EAECS,QAFD,GAEwCP,MAFxC,CAECO,QAFD,EAEWC,QAFX,GAEwCR,MAFxC,CAEWQ,QAFX,EAEqBE,GAFrB,GAEwCV,MAFxC,CAEqBU,GAFrB,EAE0BI,UAF1B,GAEwCd,MAFxC,CAE0Bc,SAF1B;AAGPoB,cAAAA,IAHO,GAGA,IAAIC,QAAJ,EAHA;AAIbL,cAAAA,UAAU,CAAC;AAAEJ,gBAAAA,IAAI,EAAE,KAAR;AAAeC,gBAAAA,MAAM,EAAE;AAAvB,eAAD,CAAV;;AACA,kBAAG/B,IAAI,CAACE,IAAL,KAAc,OAAjB,EAAyB;AACvBoC,gBAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAoBtC,IAApB;AACAoC,gBAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwB7B,QAAxB;AACA2B,gBAAAA,IAAI,CAACE,MAAL,CAAY,UAAZ,EAAwB5B,QAAxB;AACA0B,gBAAAA,IAAI,CAACE,MAAL,CAAY,KAAZ,EAAmB1B,GAAnB;AACD;;AACDwB,cAAAA,IAAI,CAACE,MAAL,CAAY,WAAZ,EAAyBtB,UAAzB;AAXa;AAAA,qBAYPvB,KAAK,CAAC8C,IAAN,CAAW,oBAAX,EAAiCH,IAAjC,CAZO;;AAAA;AAabJ,cAAAA,UAAU,CAAC;AAAEH,gBAAAA,MAAM,EAAE,KAAV;AAAiBC,gBAAAA,eAAe,EAAE;AAAlC,eAAD,CAAV;AACAU,cAAAA,UAAU,CAAC,YAAK;AACd1B,gBAAAA,QAAQ,CAAC;AAAE2B,kBAAAA,IAAI,EAAEtD;AAAR,iBAAD,CAAR;AACD,eAFS,EAEP,IAFO,CAAV;AAda;AAAA;;AAAA;AAAA;AAAA;AAkBbsC,cAAAA,OAAO,CAACC,GAAR;;AAlBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARS,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAsBA,SACE,MAAC,KAAD;AAAO,IAAA,SAAS,EAAC,UAAjB;AAA4B,IAAA,MAAM,EAAEF;AAApC,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,sBAAQ,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,GAAG,EAAC;AAAf,IAAR,CADF,EAEE;AAAK,IAAA,SAAS,EAAC;AAAf,KAEIF,OAAO,CAACJ,OAAR,IAAmB,MAAC,OAAD,OAFvB,EAKII,OAAO,CAACH,IAAR,IAAgB,MAAC,QAAD;AAAU,IAAA,MAAM,EAAE1B,MAAlB;AAA0B,IAAA,SAAS,EAAEC,SAArC;AAAgD,IAAA,KAAK,EAAEC;AAAvD,IALpB,EAQI2B,OAAO,CAACF,MAAR,IAAkB,MAAC,MAAD;AAAQ,IAAA,IAAI;AAAZ,IARtB,EAWIE,OAAO,CAACD,eAAR,IAA2B,MAAC,eAAD,OAX/B,CAFF,EAgBE,sBAEIC,OAAO,CAACJ,OAAR,IAAmB;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAKK,UAAU,CAAC;AAAEL,QAAAA,OAAO,EAAE,KAAX;AAAkBC,QAAAA,IAAI,EAAE;AAAxB,OAAD,CAAf;AAAA;AAAjB,iBAFvB,EAKIG,OAAO,CAACH,IAAR,IAAgB;AAAQ,IAAA,OAAO,EAAEO;AAAjB,cALpB,CAhBF,CADF,CADF;AA6BD,CArFD;;AAuFA,eAAetB,YAAf","sourcesContent":["import React, { useReducer, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_POST_REGISTER, ON_GREEN_CREATOR } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport { Modal } from 'reactstrap';\nimport './postregister.scss';\nimport Logo from '../layout/logo';\nimport axios from 'axios';\nimport Loader from '../loader/loader';\n\n\nconst BtnUpload = () => {\n\n  return(\n    <div className=\"btnUpload_main_cont\">\n      <label htmlFor=\"img\">\n        <div className=\"img_cont\">\n          <img src=\"\" alt=\"\"/>\n          <FontAwesomeIcon icon={faUser} />\n        </div>\n        <input id=\"img\" name=\"img\" type=\"file\"/>\n      </label>\n    </div>\n  )\n};\n\nconst Welcome = () => {\n\n  return(\n    <div className=\"welcome_main_cont\">\n      <h1>Bienvenido a <span>Greenlink!</span></h1>\n      <p>Completa el registro agregando informacion adicional y creando tu primer <strong>GreenPost,</strong> de esta manera podras ser encontrado por otros usuarios ademas de recibir obsequios. Recuerda, mietras mas preciso seas mas facil sera que tus seres queridos contacten contigo.</p>\n    </div>\n  )\n};\n\nconst Congratulations = () => {\n  const user = useSelector(state => state.user);\n  return(\n    <div className=\"welcome_main_cont\">\n      <h1>Felicidades {user.name}</h1>\n      <p>No olvides crear tu primer<strong>GreenPost,</strong></p>\n    </div>\n  )\n};\n\nconst UserInfo = ({ values, setValues, onImg }) => {\n  const user = useSelector(state => state.user);\n  return(\n    <div className=\"user_postregister_cont\">\n      <label htmlFor=\"perfilImg\">\n        {\n          !values.perfilImgFrontEnd && <FontAwesomeIcon icon={faUser} />\n        }\n        {\n          values.perfilImgFrontEnd && <img src={values.perfilImgFrontEnd} alt=\"\"/>\n        }\n        <input onChange={onImg} type=\"file\" name=\"perfilImg\" id=\"perfilImg\"/>\n      </label>\n      <p>Elige una foto de perfil</p>\n      {\n        user.name === 'Green' && (\n          <>\n          <input value={values.name} onChange={(e)=> setValues({ name: e.currentTarget.value })} placeholder=\"Nombre\" type=\"text\"/>\n          <input value={values.lastName} onChange={(e)=> setValues({ lastName: e.currentTarget.value })} placeholder=\"Apellido\" type=\"text\"/>\n          <div className=\"birth_sex_main\">\n              <p>Cumplea√±os</p>\n              <input\n                type=\"date\"\n                value={values.birthday}\n                onChange={(e)=> setValues({ birthday: e.currentTarget.value })}\n              />\n            <div className=\"birthday_sex\" style={{ marginLeft: '1rem' }}>\n              <p>Sexo</p>\n              <select onChange={(e)=> setValues({ sex: e.currentTarget.value })} name=\"sex\" id=\"sex\">\n                <option value=\"female\">Mujer</option>\n                <option value=\"male\">Hombre</option>\n                <option value=\"otro\">Otro</option>\n              </select>\n            </div>\n          </div>\n          </>\n        )\n      }\n    </div>\n  )\n};\n\nconst PostRegister = () =>{\nconst dispatch = useDispatch();\nconst [values, setValues] = useReducer((state, next) => ({ ...state, ...next }),{\n  name: '',\n  lastName: '',\n  birthday: '',\n  sex: '',\n  perfilImgFrontEnd:'',\n  perfilImg: '',\n});\nconst user = useSelector(state => state.user);\nconst onImg = (e) => {\n  const img = e.target.files[0];\n  const reader = new FileReader();\n  reader.onloadend = () => {\n    if(reader.result){\n      setValues({ perfilImgFrontEnd: reader.result, perfilImg: img });\n    } else {\n      setValues({ perfilImgFrontEnd: null, perfilImg: null });\n    }\n  }\n  reader.readAsDataURL(img);\n  console.log(perfilImg);\n  console.log(img);\n}\n\n  const [section, setSection] = useReducer((state, next) => ({ ...state, ...next }), {\n    welcome: true,\n    info: false,\n    loader: false,\n    congratulations: false,\n  })\n  const visible = useSelector(state => state.postregister);\n\n  const onSubmit = async() => {\n    try{\n      const { name, lastName, birthday, sex, perfilImg } = values;\n      const data = new FormData();\n      setSection({ info: false, loader: true });\n      if(user.name === 'Green'){\n        data.append('name', name);\n        data.append('lastName', lastName);\n        data.append('birthday', birthday);\n        data.append('sex', sex);\n      }\n      data.append('perfilImg', perfilImg);\n      await axios.post('/user/postregister', data);\n      setSection({ loader: false, congratulations: true });\n      setTimeout(()=> {\n        dispatch({ type: ON_POST_REGISTER });\n      }, 3000)\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  return(\n    <Modal className=\"my_modal\" isOpen={visible}>\n      <div className=\"postregister_main_cont\">\n        <header><Logo dark url=\"/\"/></header>\n        <div className=\"body\">\n          {\n            section.welcome && <Welcome />\n          }\n          {\n            section.info && <UserInfo values={values} setValues={setValues} onImg={onImg} />\n          }\n          {\n            section.loader && <Loader dark />\n          }\n          {\n            section.congratulations && <Congratulations />\n          }\n        </div>\n        <footer>\n          {\n            section.welcome && <button onClick={()=> setSection({ welcome: false, info: true })}>siguiente</button>\n          }\n          {\n            section.info && <button onClick={onSubmit}>enviar</button>\n          }\n        </footer>\n      </div>\n    </Modal>\n  )\n}\n\nexport default PostRegister;\n"]},"metadata":{},"sourceType":"module"}