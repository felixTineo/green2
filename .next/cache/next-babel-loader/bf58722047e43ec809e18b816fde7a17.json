{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { storeSections, ON_PRODUCTS, ON_WALLET, ON_STORE, ON_WISH } from '../../store/actions';\nimport './store.scss';\nimport products from '../../test/products';\nimport axios from 'axios';\nimport uuid from 'uuid/v1';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  return __jsx(\"div\", {\n    className: \"storehome_main_cont\"\n  }, __jsx(\"div\", {\n    className: \"cont_left\"\n  }, __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.MUSIC\n    }),\n    id: \"music\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/ms.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"musica\"))), __jsx(\"div\", {\n    className: \"cont_right\"\n  }, __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.CANDY\n    }),\n    id: \"candy\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/gol.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"golosinas\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.JEWEL\n    }),\n    className: \"four\",\n    id: \"jewel\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/bis.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"bisuteria\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.TOY\n    }),\n    className: \"four\",\n    id: \"toy\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/ty.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"juguetes\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.EBOOK\n    }),\n    className: \"four\",\n    id: \"ebook\"\n  }, __jsx(\"img\", {\n    src: \"/static/store/eb.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"ebook's\")), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: storeSections.TV\n    }),\n    className: \"four\",\n    id: \"tv\"\n  }, __jsx(\"img\", {\n    src: \"static/store/tv.jpg\",\n    alt: \"\"\n  }), __jsx(\"span\", null, \"tv's\"))));\n};\n\nconst Category = ({\n  tag\n}) => {\n  const items = useSelector(state => state.greenstore.items);\n  const products = items.filter(product => product.tag === tag);\n  const dispatch = useDispatch();\n\n  const onProduct = e => {\n    const product = products.find(product => product.id === e.target.id);\n    dispatch({\n      type: storeSections.PRODUCT,\n      product\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"category_main_cont\"\n  }, __jsx(\"ul\", null, products.map(product => __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: onProduct,\n    id: product.id,\n    className: \"shadow\"\n  }, __jsx(\"img\", {\n    id: product.id,\n    src: product.img,\n    alt: \"\"\n  }), __jsx(\"footer\", {\n    id: product.id\n  }, __jsx(\"p\", {\n    id: product.id\n  }, product.name), __jsx(\"p\", {\n    id: product.id\n  }, \"$\", product.price)))))));\n};\n\nconst Product = () => {\n  const product = useSelector(state => state.greenstore.current);\n  const uid = useSelector(state => state.user._id);\n  const dispatch = useDispatch();\n  const owner = useSelector(state => state.user.owner);\n  const {\n    0: disable,\n    1: setDisable\n  } = useState(false);\n  const {\n    0: note,\n    1: setNote\n  } = useState();\n\n  const onGift = async e => {\n    try {\n      e.preventDefault();\n      setDisable(true);\n      const data = {\n        gift: product,\n        uid,\n        note\n      };\n      await axios.post('/user/gift', data);\n\n      const parseCoin = _parseInt(product.price, 10);\n\n      dispatch({\n        type: ON_WALLET,\n        coin: -parseCoin\n      });\n      setDisable(false);\n      dispatch({\n        type: ON_STORE\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const onWish = async e => {\n    try {\n      e.preventDefault();\n      setDisable(true);\n      const res = await axios.post('/green/wish', {\n        product\n      });\n      console.log(res.data);\n      dispatch({\n        type: ON_WISH,\n        wish: res.data\n      });\n      setDisable(false);\n      dispatch({\n        type: ON_STORE\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"product_main_cont\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-12 col-md-6\"\n  }, __jsx(\"div\", {\n    className: \"img_cont\"\n  }, __jsx(\"img\", {\n    src: product.img,\n    alt: \"\"\n  }))), __jsx(\"div\", {\n    className: \"col-12 col-md-6\"\n  }, __jsx(\"div\", {\n    className: \"description_cont\"\n  }, __jsx(\"h1\", null, product.name), __jsx(\"p\", null, \"precio: $\", product.price), __jsx(\"p\", null, product.description)), __jsx(\"form\", {\n    onSubmit: owner ? onWish : onGift\n  }, !owner && __jsx(\"textarea\", {\n    value: note,\n    onChange: e => setNote(e.currentTarget.value)\n  }), __jsx(\"footer\", null, __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: product.tag\n    })\n  }, \"atr\\xE1s\"), __jsx(\"button\", {\n    disabled: disable,\n    type: \"submit\"\n  }, owner ? 'agregar' : 'enviar'))))));\n};\n\nconst Store = () => {\n  const store = useSelector(state => state.greenstore);\n  const dispatch = useDispatch();\n\n  const onProducts = async () => {\n    try {\n      //const res = await axios.get('/products');\n      //dispatch({ type: ON_PRODUCTS, products: res.data });\n      dispatch({\n        type: ON_PRODUCTS,\n        products\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    onProducts();\n  }, []);\n  return __jsx(\"div\", {\n    className: \"store_main_cont\"\n  }, store.home && __jsx(Home, null), store.music && __jsx(Category, {\n    tag: storeSections.MUSIC\n  }), store.candy && __jsx(Category, {\n    tag: storeSections.CANDY\n  }), store.jewel && __jsx(Category, {\n    tag: storeSections.JEWEL\n  }), store.toy && __jsx(Category, {\n    tag: storeSections.TOY\n  }), store.ebook && __jsx(Category, {\n    tag: storeSections.EBOOK\n  }), store.tv && __jsx(Category, {\n    tag: storeSections.TV\n  }), store.product && __jsx(Product, null));\n};\n\nexport default Store;","map":null,"metadata":{},"sourceType":"module"}