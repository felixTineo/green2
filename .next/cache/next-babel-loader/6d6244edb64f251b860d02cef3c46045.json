{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useState, useReducer } from 'react';\nimport './creator.scss';\nimport { Modal } from 'reactstrap';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_GREEN_CREATOR } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCamera, faArrowCircleLeft } from '@fortawesome/free-solid-svg-icons';\nimport Store from '../store/store';\nimport axios from 'axios';\n\nconst GreenPost = ({\n  img,\n  setImg,\n  onImg,\n  historyVisible,\n  setHistoryVisible,\n  onSubmit,\n  history,\n  setHistory\n}) => {\n  return __jsx(\"div\", {\n    style: {\n      backgroundImage: `url(${img})`\n    },\n    className: \"creator_greenpost_main\"\n  }, __jsx(\"label\", {\n    htmlFor: \"green\"\n  }, __jsx(\"input\", {\n    id: \"green\",\n    name: \"green\",\n    onChange: onImg,\n    type: \"file\"\n  }), __jsx(FontAwesomeIcon, {\n    icon: faCamera\n  })), __jsx(\"div\", {\n    className: \"history_main_cont\",\n    style: {\n      transform: historyVisible ? 'translateX(0)' : 'translateX(100%)'\n    }\n  }, __jsx(\"div\", {\n    className: \"body\"\n  }, __jsx(\"header\", null, __jsx(\"h2\", null, \"Agrega una historia\")), __jsx(\"textarea\", {\n    onChange: e => setHistory(e.currentTarget.value),\n    value: history\n  })), __jsx(\"footer\", null, __jsx(\"button\", {\n    onClick: onSubmit\n  }, \"crear\"))), __jsx(\"button\", {\n    onClick: () => setHistoryVisible(!historyVisible),\n    title: \"Agregar historia\",\n    style: {\n      transform: historyVisible ? 'rotate(180deg)' : null\n    },\n    className: \"arrow_history\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faArrowCircleLeft\n  })));\n};\n\nconst Creator = () => {\n  const visible = useSelector(state => state.greenpost.creator);\n  const dispatch = useDispatch();\n  const {\n    0: section,\n    1: setSection\n  } = useReducer((state, next) => _objectSpread({}, state, next), {\n    green: true,\n    store: false\n  });\n  const {\n    0: historyVisible,\n    1: setHistoryVisible\n  } = useState(true);\n  const {\n    0: store,\n    1: setStore\n  } = useState(false);\n  const {\n    0: img,\n    1: setImg\n  } = useState('/static/random/r16.jpg');\n  const {\n    0: history,\n    1: setHistory\n  } = useState('');\n\n  const onImg = e => {\n    const img = e.target.files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      if (reader.result) {\n        setImg(reader.result);\n        setHistoryVisible(true);\n      } else {\n        setImg('/static/random/r16.jpg');\n      }\n    };\n\n    reader.readAsDataURL(img);\n  };\n\n  const onSubmit = async () => {\n    try {\n      const data = {\n        history,\n        img\n      };\n      await axios.post('/post/greenpost', data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(Modal, {\n    isOpen: visible,\n    style: {\n      maxWidth: '90vw'\n    }\n  }, __jsx(\"div\", {\n    className: \"creator_main_cont\"\n  }, __jsx(\"header\", null, __jsx(\"p\", null, \"GreenPost\"), __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: ON_GREEN_CREATOR\n    })\n  }, \"X\")), __jsx(\"div\", {\n    className: \"body\"\n  }, section.green && __jsx(GreenPost, {\n    onImg: onImg,\n    img: img,\n    setImg: setImg,\n    historyVisible: historyVisible,\n    setHistoryVisible: setHistoryVisible,\n    history: history,\n    setHistory: setHistory\n  }), section.store && __jsx(Store, null))));\n};\n\nexport default Creator;","map":null,"metadata":{},"sourceType":"module"}