{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_CHAT_FRIEND, ON_CHAT_PRIVATE, ON_CHAT_MINIMIZE, ON_CHAT_ALERT } from '../../store/actions';\nimport { color } from '../../layout/var';\nimport uuid from 'uuid/v1';\nimport persons from '../../test/persons';\nimport io from 'socket.io-client';\nimport axios from 'axios'; //const friends = persons(8);\n\nvar Friend = function Friend(_ref) {\n  var perfilImg = _ref.perfilImg,\n      fullName = _ref.fullName,\n      _id = _ref._id,\n      url = _ref.url,\n      chatHistory = _ref.chatHistory;\n  var dispatch = useDispatch();\n  var privates = useSelector(function (state) {\n    return state.chat.privates;\n  });\n  var cuid = useSelector(function (state) {\n    return state.nav.notifications.id;\n  });\n  useEffect(function () {\n    console.log('friend');\n    var user = {\n      perfilImg: perfilImg,\n      fullName: fullName,\n      _id: _id,\n      url: url,\n      chatHistory: chatHistory,\n      minimize: false,\n      anAlert: false\n    };\n    var socket = io();\n    socket.open();\n    socket.on(\"notification:\".concat(cuid), function (_id) {\n      var isOpen = privates.find(function (user) {\n        return user._id === _id;\n      });\n\n      if (isOpen && isOpen.minimize) {\n        dispatch({\n          type: ON_CHAT_ALERT,\n          _id: _id,\n          option: true\n        });\n      } else if (!isOpen) {\n        dispatch({\n          type: ON_CHAT_PRIVATE,\n          user: user\n        });\n      }\n    });\n    return function () {\n      return socket.close();\n    };\n  }, [privates]);\n\n  var onPrivate = function onPrivate() {\n    try {\n      var user = {\n        perfilImg: perfilImg,\n        fullName: fullName,\n        _id: _id,\n        url: url,\n        chatHistory: chatHistory,\n        minimize: false,\n        anAlert: false\n      };\n      var isOpen = privates.find(function (user) {\n        return user._id === _id;\n      });\n\n      if (isOpen) {\n        dispatch({\n          type: ON_CHAT_MINIMIZE,\n          _id: _id,\n          option: false\n        });\n      } else {\n        dispatch({\n          type: ON_CHAT_PRIVATE,\n          user: user\n        });\n      }\n\n      setTimeout(function () {\n        return document.getElementById(_id).focus();\n      }, 200);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"button\", {\n    onClick: onPrivate,\n    type: \"button\",\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  }, __jsx(\"img\", {\n    src: perfilImg,\n    alt: \"\",\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  })), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  }, fullName), __jsx(_JSXStyle, {\n    id: \"1182382733\",\n    dynamic: [color.prim, color.light, color.sec, color.dark, color.dark]\n  }, \"button.__jsx-style-dynamic-selector{background:transparent;border:none;-webkit-transition:250ms ease;transition:250ms ease;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;border:1px solid rgba(139,185,64,.4);width:100%;text-transform:capitalize;}button.__jsx-style-dynamic-selector:outline{outline:none;}button.__jsx-style-dynamic-selector:hover{background:\".concat(color.prim, \";color:\").concat(color.light, \";border-color:\").concat(color.sec, \";}p.__jsx-style-dynamic-selector{margin:0;color:\").concat(color.dark, \";margin-left:.5rem;}div.__jsx-style-dynamic-selector{background:\").concat(color.dark, \";width:55px;height:45px;border-left:8px solid rgba(255,255,255,.4);}img.__jsx-style-dynamic-selector{width:40px;height:40px;object-fit:cover;object-position:center;border-radius:50%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2ZlbGl4L0RvY3VtZW50b3MvcHJvamVjdHMvZ3JlZW5saW5rL2NvbXBvbmVudHMvY2hhdC9mcmllbmRzLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtRWtCLEFBR2tDLEFBWVYsQUFHMkIsQUFLL0IsQUFLK0IsQUFNN0IsU0FWd0IsRUFXdkIsRUFuQmQsVUFaYyxBQWdDSyxZQS9CSyxLQWNhLEFBVXhCLEFBUVksSUFaTCxPQUtOLFdBSmQsQ0FLZ0QsQUFPNUIsWUFsQndCLE1BbUI1QyxNQWpDZSxtQkEwQmYsV0FYQSw0Q0FkNkIseUdBQ1IsNkZBQ1QsVUFDOEIscUNBQzdCLFdBQ2UsMEJBQzVCIiwiZmlsZSI6Ii9ob21lL2ZlbGl4L0RvY3VtZW50b3MvcHJvamVjdHMvZ3JlZW5saW5rL2NvbXBvbmVudHMvY2hhdC9mcmllbmRzLmpzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IsIHVzZURpc3BhdGNoIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgT05fQ0hBVF9GUklFTkQsIE9OX0NIQVRfUFJJVkFURSwgT05fQ0hBVF9NSU5JTUlaRSwgT05fQ0hBVF9BTEVSVCB9IGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMnO1xuaW1wb3J0IHsgY29sb3IgfSBmcm9tICcuLi8uLi9sYXlvdXQvdmFyJztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQvdjEnO1xuaW1wb3J0IHBlcnNvbnMgZnJvbSAnLi4vLi4vdGVzdC9wZXJzb25zJztcbmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbi8vY29uc3QgZnJpZW5kcyA9IHBlcnNvbnMoOCk7XG5cbmNvbnN0IEZyaWVuZCA9ICh7IHBlcmZpbEltZywgZnVsbE5hbWUsIF9pZCwgdXJsLCBjaGF0SGlzdG9yeSAgfSkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IHByaXZhdGVzID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUuY2hhdC5wcml2YXRlcyk7XG4gIGNvbnN0IGN1aWQgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS5uYXYubm90aWZpY2F0aW9ucy5pZCk7XG4gIHVzZUVmZmVjdCgoKT0+IHtcbiAgICBjb25zb2xlLmxvZygnZnJpZW5kJyk7XG4gICAgY29uc3QgdXNlciA9IHtcbiAgICAgIHBlcmZpbEltZyxcbiAgICAgIGZ1bGxOYW1lLFxuICAgICAgX2lkLFxuICAgICAgdXJsLFxuICAgICAgY2hhdEhpc3RvcnksXG4gICAgICBtaW5pbWl6ZTogZmFsc2UsXG4gICAgICBhbkFsZXJ0OiBmYWxzZSxcbiAgICB9XG4gICAgY29uc3Qgc29ja2V0ID0gaW8oKTtcbiAgICBzb2NrZXQub3BlbigpO1xuICAgIHNvY2tldC5vbihgbm90aWZpY2F0aW9uOiR7Y3VpZH1gLCAoX2lkKSA9PntcbiAgICAgIGNvbnN0IGlzT3BlbiA9IHByaXZhdGVzLmZpbmQodXNlciA9PiB1c2VyLl9pZCA9PT0gX2lkKTtcbiAgICAgIGlmKGlzT3BlbiAmJiBpc09wZW4ubWluaW1pemUgKXtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBPTl9DSEFUX0FMRVJULCBfaWQsIG9wdGlvbjogdHJ1ZSB9KTtcbiAgICAgIH0gZWxzZSBpZighaXNPcGVuKXtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBPTl9DSEFUX1BSSVZBVEUsIHVzZXIgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAoKT0+IHNvY2tldC5jbG9zZSgpO1xuICB9LFtwcml2YXRlc10pXG5cbiAgY29uc3Qgb25Qcml2YXRlID0gKCkgPT4ge1xuICAgIHRyeXtcbiAgICAgIGNvbnN0IHVzZXIgPSB7XG4gICAgICAgIHBlcmZpbEltZyxcbiAgICAgICAgZnVsbE5hbWUsXG4gICAgICAgIF9pZCxcbiAgICAgICAgdXJsLFxuICAgICAgICBjaGF0SGlzdG9yeSxcbiAgICAgICAgbWluaW1pemU6IGZhbHNlLFxuICAgICAgICBhbkFsZXJ0OiBmYWxzZSxcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzT3BlbiA9IHByaXZhdGVzLmZpbmQodXNlciA9PiB1c2VyLl9pZCA9PT0gX2lkKTtcbiAgICAgIGlmKGlzT3Blbil7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogT05fQ0hBVF9NSU5JTUlaRSwgX2lkLCBvcHRpb246IGZhbHNlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBPTl9DSEFUX1BSSVZBVEUsIHVzZXIgfSk7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2lkKS5mb2N1cygpLCAyMDApO1xuICAgIH1jYXRjaChlcnIpe1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuKFxuICAgIDxidXR0b24gb25DbGljaz17b25Qcml2YXRlfSB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8aW1nIHNyYz17cGVyZmlsSW1nfSBhbHQ9XCJcIi8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxwPntmdWxsTmFtZX08L3A+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIGJ1dHRvbntcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgdHJhbnNpdGlvbjogMjUwbXMgZWFzZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgxMzksIDE4NSwgNjQsIC40KTtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbiAgICAgICAgfVxuICAgICAgICBidXR0b246b3V0bGluZXtcbiAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbjpob3ZlcntcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAke2NvbG9yLnByaW19O1xuICAgICAgICAgIGNvbG9yOiAke2NvbG9yLmxpZ2h0fTtcbiAgICAgICAgICBib3JkZXItY29sb3I6ICR7Y29sb3Iuc2VjfTtcbiAgICAgICAgfVxuICAgICAgICBwe1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBjb2xvcjogJHtjb2xvci5kYXJrfTtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogLjVyZW07XG4gICAgICAgIH1cbiAgICAgICAgZGl2e1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3IuZGFya307XG4gICAgICAgICAgd2lkdGg6IDU1cHg7XG4gICAgICAgICAgaGVpZ2h0OiA0NXB4O1xuICAgICAgICAgIGJvcmRlci1sZWZ0OiA4cHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAuNCk7XG4gICAgICAgIH1cbiAgICAgICAgaW1ne1xuICAgICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgICAgICBvYmplY3QtcG9zaXRpb246IGNlbnRlcjtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIH1cbiAgICAgIGB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvYnV0dG9uPlxuICApO1xufVxuXG5jb25zdCBGcmllbmRzID0gKCkgPT4ge1xuICBjb25zdCBbZnJpZW5kcywgc2V0RnJpZW5kc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IGlkID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUubmF2Lm5vdGlmaWNhdGlvbnMuaWQpO1xuICBjb25zdCBhbGwgPSBhc3luYygpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KCcvY2hhdC9hbGwnKTtcbiAgICAgIHNldEZyaWVuZHMocmVzLmRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNvY2tldCA9IGlvKCk7XG4gICAgc29ja2V0Lm9wZW4oKTtcbiAgICBzb2NrZXQub24oYGNoYXQ6JHtpZH1gLCBwYXlsb2FkID0+IGFsbCgpKTtcbiAgICBhbGwoKTtcbiAgICByZXR1cm4gKCk9PiBzb2NrZXQuY2xvc2UoKTtcbiAgfSxbaWRdKVxuICByZXR1cm4oXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtYWluXCI+XG4gICAgICA8aGVhZGVyPmNoYXQ8L2hlYWRlcj5cbiAgICAgIDx1bD5cbiAgICAgICAge1xuICAgICAgICAgIGZyaWVuZHMubWFwKChmcmllbmQpID0+IDxsaSBrZXk9e3V1aWQoKX0+PEZyaWVuZCB7Li4uZnJpZW5kfSAvPjwvbGk+KVxuICAgICAgICB9XG4gICAgICA8L3VsPlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAubWFpbntcbiAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwdmggLSA0MHB4KTtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDcwKTtcbiAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICAgIHRvcDogNDJweDtcbiAgICAgICAgfVxuICAgICAgICBoZWFkZXJ7XG4gICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTtcbiAgICAgICAgICBmb250LXdlaWdodDogNTUwO1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3IucHJpbX07XG4gICAgICAgICAgcGFkZGluZzogLjVyZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgIH1cbiAgICAgICAgdWx7XG4gICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA0MHB4KTtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcbiAgICAgICAgICBib3JkZXItbGVmdDogMnB4IHNvbGlkICR7Y29sb3Iuc2VjfTtcbiAgICAgICAgfVxuICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZyaWVuZHM7XG4iXX0= */\\n/*@ sourceURL=/home/felix/Documentos/projects/greenlink/components/chat/friends.jsx */\")));\n};\n\nvar Friends = function Friends() {\n  var _useState = useState([]),\n      friends = _useState[0],\n      setFriends = _useState[1];\n\n  var id = useSelector(function (state) {\n    return state.nav.notifications.id;\n  });\n\n  var all =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get('/chat/all');\n\n            case 3:\n              res = _context.sent;\n              setFriends(res.data);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function all() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var socket = io();\n    socket.open();\n    socket.on(\"chat:\".concat(id), function (payload) {\n      return all();\n    });\n    all();\n    return function () {\n      return socket.close();\n    };\n  }, [id]);\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]]) + \" \" + \"main\"\n  }, __jsx(\"header\", {\n    className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]])\n  }, \"chat\"), __jsx(\"ul\", {\n    className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]])\n  }, friends.map(function (friend) {\n    return __jsx(\"li\", {\n      key: uuid(),\n      className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]])\n    }, __jsx(Friend, friend));\n  })), __jsx(_JSXStyle, {\n    id: \"2226638880\",\n    dynamic: [color.prim, color.sec]\n  }, \".main.__jsx-style-dynamic-selector{height:calc(100vh - 40px);background:rgba(0,0,0,0.070);position:-webkit-sticky;position:sticky;top:42px;}header.__jsx-style-dynamic-selector{color:rgba(255,255,255,0.7);font-weight:550;background:\".concat(color.prim, \";padding:.5rem;text-align:center;text-transform:uppercase;}ul.__jsx-style-dynamic-selector{list-style:none;padding:0;margin:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:calc(100% - 40px);overflow:hidden;overflow-y:scroll;border-left:2px solid \").concat(color.sec, \";}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2ZlbGl4L0RvY3VtZW50b3MvcHJvamVjdHMvZ3JlZW5saW5rL2NvbXBvbmVudHMvY2hhdC9mcmllbmRzLmpzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEwSWtCLEFBR3FDLEFBTUssQUFRZixnQkFDTixVQWRzQixBQWV2QixFQVRPLE9BVUgsU0FUMkIsV0FOeEIsNkJBT0YsV0FOTCxHQU9TLE1BTnBCLEtBY3dCLE9BUEcseUJBQzNCLDhDQU8yQix5QkFDVCxnQkFDRSxrQkFDaUMsbURBQ3JEIiwiZmlsZSI6Ii9ob21lL2ZlbGl4L0RvY3VtZW50b3MvcHJvamVjdHMvZ3JlZW5saW5rL2NvbXBvbmVudHMvY2hhdC9mcmllbmRzLmpzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlU2VsZWN0b3IsIHVzZURpc3BhdGNoIH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHsgT05fQ0hBVF9GUklFTkQsIE9OX0NIQVRfUFJJVkFURSwgT05fQ0hBVF9NSU5JTUlaRSwgT05fQ0hBVF9BTEVSVCB9IGZyb20gJy4uLy4uL3N0b3JlL2FjdGlvbnMnO1xuaW1wb3J0IHsgY29sb3IgfSBmcm9tICcuLi8uLi9sYXlvdXQvdmFyJztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQvdjEnO1xuaW1wb3J0IHBlcnNvbnMgZnJvbSAnLi4vLi4vdGVzdC9wZXJzb25zJztcbmltcG9ydCBpbyBmcm9tICdzb2NrZXQuaW8tY2xpZW50JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5cbi8vY29uc3QgZnJpZW5kcyA9IHBlcnNvbnMoOCk7XG5cbmNvbnN0IEZyaWVuZCA9ICh7IHBlcmZpbEltZywgZnVsbE5hbWUsIF9pZCwgdXJsLCBjaGF0SGlzdG9yeSAgfSkgPT4ge1xuICBjb25zdCBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG4gIGNvbnN0IHByaXZhdGVzID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUuY2hhdC5wcml2YXRlcyk7XG4gIGNvbnN0IGN1aWQgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS5uYXYubm90aWZpY2F0aW9ucy5pZCk7XG4gIHVzZUVmZmVjdCgoKT0+IHtcbiAgICBjb25zb2xlLmxvZygnZnJpZW5kJyk7XG4gICAgY29uc3QgdXNlciA9IHtcbiAgICAgIHBlcmZpbEltZyxcbiAgICAgIGZ1bGxOYW1lLFxuICAgICAgX2lkLFxuICAgICAgdXJsLFxuICAgICAgY2hhdEhpc3RvcnksXG4gICAgICBtaW5pbWl6ZTogZmFsc2UsXG4gICAgICBhbkFsZXJ0OiBmYWxzZSxcbiAgICB9XG4gICAgY29uc3Qgc29ja2V0ID0gaW8oKTtcbiAgICBzb2NrZXQub3BlbigpO1xuICAgIHNvY2tldC5vbihgbm90aWZpY2F0aW9uOiR7Y3VpZH1gLCAoX2lkKSA9PntcbiAgICAgIGNvbnN0IGlzT3BlbiA9IHByaXZhdGVzLmZpbmQodXNlciA9PiB1c2VyLl9pZCA9PT0gX2lkKTtcbiAgICAgIGlmKGlzT3BlbiAmJiBpc09wZW4ubWluaW1pemUgKXtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBPTl9DSEFUX0FMRVJULCBfaWQsIG9wdGlvbjogdHJ1ZSB9KTtcbiAgICAgIH0gZWxzZSBpZighaXNPcGVuKXtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBPTl9DSEFUX1BSSVZBVEUsIHVzZXIgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAoKT0+IHNvY2tldC5jbG9zZSgpO1xuICB9LFtwcml2YXRlc10pXG5cbiAgY29uc3Qgb25Qcml2YXRlID0gKCkgPT4ge1xuICAgIHRyeXtcbiAgICAgIGNvbnN0IHVzZXIgPSB7XG4gICAgICAgIHBlcmZpbEltZyxcbiAgICAgICAgZnVsbE5hbWUsXG4gICAgICAgIF9pZCxcbiAgICAgICAgdXJsLFxuICAgICAgICBjaGF0SGlzdG9yeSxcbiAgICAgICAgbWluaW1pemU6IGZhbHNlLFxuICAgICAgICBhbkFsZXJ0OiBmYWxzZSxcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzT3BlbiA9IHByaXZhdGVzLmZpbmQodXNlciA9PiB1c2VyLl9pZCA9PT0gX2lkKTtcbiAgICAgIGlmKGlzT3Blbil7XG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogT05fQ0hBVF9NSU5JTUlaRSwgX2lkLCBvcHRpb246IGZhbHNlIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGF0Y2goeyB0eXBlOiBPTl9DSEFUX1BSSVZBVEUsIHVzZXIgfSk7XG4gICAgICB9XG4gICAgICBzZXRUaW1lb3V0KCgpPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX2lkKS5mb2N1cygpLCAyMDApO1xuICAgIH1jYXRjaChlcnIpe1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuKFxuICAgIDxidXR0b24gb25DbGljaz17b25Qcml2YXRlfSB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICA8ZGl2PlxuICAgICAgICA8aW1nIHNyYz17cGVyZmlsSW1nfSBhbHQ9XCJcIi8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxwPntmdWxsTmFtZX08L3A+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIGJ1dHRvbntcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgdHJhbnNpdGlvbjogMjUwbXMgZWFzZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgxMzksIDE4NSwgNjQsIC40KTtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbiAgICAgICAgfVxuICAgICAgICBidXR0b246b3V0bGluZXtcbiAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICB9XG4gICAgICAgIGJ1dHRvbjpob3ZlcntcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAke2NvbG9yLnByaW19O1xuICAgICAgICAgIGNvbG9yOiAke2NvbG9yLmxpZ2h0fTtcbiAgICAgICAgICBib3JkZXItY29sb3I6ICR7Y29sb3Iuc2VjfTtcbiAgICAgICAgfVxuICAgICAgICBwe1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBjb2xvcjogJHtjb2xvci5kYXJrfTtcbiAgICAgICAgICBtYXJnaW4tbGVmdDogLjVyZW07XG4gICAgICAgIH1cbiAgICAgICAgZGl2e1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3IuZGFya307XG4gICAgICAgICAgd2lkdGg6IDU1cHg7XG4gICAgICAgICAgaGVpZ2h0OiA0NXB4O1xuICAgICAgICAgIGJvcmRlci1sZWZ0OiA4cHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAuNCk7XG4gICAgICAgIH1cbiAgICAgICAgaW1ne1xuICAgICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICAgIGhlaWdodDogNDBweDtcbiAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgICAgICBvYmplY3QtcG9zaXRpb246IGNlbnRlcjtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIH1cbiAgICAgIGB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvYnV0dG9uPlxuICApO1xufVxuXG5jb25zdCBGcmllbmRzID0gKCkgPT4ge1xuICBjb25zdCBbZnJpZW5kcywgc2V0RnJpZW5kc10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IGlkID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUubmF2Lm5vdGlmaWNhdGlvbnMuaWQpO1xuICBjb25zdCBhbGwgPSBhc3luYygpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MuZ2V0KCcvY2hhdC9hbGwnKTtcbiAgICAgIHNldEZyaWVuZHMocmVzLmRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgfVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHNvY2tldCA9IGlvKCk7XG4gICAgc29ja2V0Lm9wZW4oKTtcbiAgICBzb2NrZXQub24oYGNoYXQ6JHtpZH1gLCBwYXlsb2FkID0+IGFsbCgpKTtcbiAgICBhbGwoKTtcbiAgICByZXR1cm4gKCk9PiBzb2NrZXQuY2xvc2UoKTtcbiAgfSxbaWRdKVxuICByZXR1cm4oXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtYWluXCI+XG4gICAgICA8aGVhZGVyPmNoYXQ8L2hlYWRlcj5cbiAgICAgIDx1bD5cbiAgICAgICAge1xuICAgICAgICAgIGZyaWVuZHMubWFwKChmcmllbmQpID0+IDxsaSBrZXk9e3V1aWQoKX0+PEZyaWVuZCB7Li4uZnJpZW5kfSAvPjwvbGk+KVxuICAgICAgICB9XG4gICAgICA8L3VsPlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAubWFpbntcbiAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwdmggLSA0MHB4KTtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDcwKTtcbiAgICAgICAgICBwb3NpdGlvbjogc3RpY2t5O1xuICAgICAgICAgIHRvcDogNDJweDtcbiAgICAgICAgfVxuICAgICAgICBoZWFkZXJ7XG4gICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KTtcbiAgICAgICAgICBmb250LXdlaWdodDogNTUwO1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3IucHJpbX07XG4gICAgICAgICAgcGFkZGluZzogLjVyZW07XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgIH1cbiAgICAgICAgdWx7XG4gICAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSA0MHB4KTtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgIG92ZXJmbG93LXk6IHNjcm9sbDtcbiAgICAgICAgICBib3JkZXItbGVmdDogMnB4IHNvbGlkICR7Y29sb3Iuc2VjfTtcbiAgICAgICAgfVxuICAgICAgYH1cbiAgICAgIDwvc3R5bGU+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZyaWVuZHM7XG4iXX0= */\\n/*@ sourceURL=/home/felix/Documentos/projects/greenlink/components/chat/friends.jsx */\")));\n};\n\nexport default Friends;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/chat/friends.jsx"],"names":["React","useState","useEffect","useSelector","useDispatch","ON_CHAT_FRIEND","ON_CHAT_PRIVATE","ON_CHAT_MINIMIZE","ON_CHAT_ALERT","color","uuid","persons","io","axios","Friend","perfilImg","fullName","_id","url","chatHistory","dispatch","privates","state","chat","cuid","nav","notifications","id","console","log","user","minimize","anAlert","socket","open","on","isOpen","find","type","option","close","onPrivate","setTimeout","document","getElementById","focus","err","prim","light","sec","dark","Friends","friends","setFriends","all","get","res","data","payload","map","friend"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_CHAT_FRIEND, ON_CHAT_PRIVATE, ON_CHAT_MINIMIZE, ON_CHAT_ALERT } from '../../store/actions';\nimport { color } from '../../layout/var';\nimport uuid from 'uuid/v1';\nimport persons from '../../test/persons';\nimport io from 'socket.io-client';\nimport axios from 'axios';\n\n//const friends = persons(8);\n\nconst Friend = ({ perfilImg, fullName, _id, url, chatHistory  }) => {\n  const dispatch = useDispatch();\n  const privates = useSelector(state => state.chat.privates);\n  const cuid = useSelector(state => state.nav.notifications.id);\n  useEffect(()=> {\n    console.log('friend');\n    const user = {\n      perfilImg,\n      fullName,\n      _id,\n      url,\n      chatHistory,\n      minimize: false,\n      anAlert: false,\n    }\n    const socket = io();\n    socket.open();\n    socket.on(`notification:${cuid}`, (_id) =>{\n      const isOpen = privates.find(user => user._id === _id);\n      if(isOpen && isOpen.minimize ){\n        dispatch({ type: ON_CHAT_ALERT, _id, option: true });\n      } else if(!isOpen){\n        dispatch({ type: ON_CHAT_PRIVATE, user  });\n      }\n    });\n    return ()=> socket.close();\n  },[privates])\n\n  const onPrivate = () => {\n    try{\n      const user = {\n        perfilImg,\n        fullName,\n        _id,\n        url,\n        chatHistory,\n        minimize: false,\n        anAlert: false,\n      }\n      const isOpen = privates.find(user => user._id === _id);\n      if(isOpen){\n        dispatch({ type: ON_CHAT_MINIMIZE, _id, option: false });\n      } else {\n        dispatch({ type: ON_CHAT_PRIVATE, user });\n      }\n      setTimeout(()=> document.getElementById(_id).focus(), 200);\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return(\n    <button onClick={onPrivate} type=\"button\">\n      <div>\n        <img src={perfilImg} alt=\"\"/>\n      </div>\n      <p>{fullName}</p>\n      <style jsx>{`\n        button{\n          background: transparent;\n          border: none;\n          transition: 250ms ease;\n          display: flex;\n          justify-content: flex-start;\n          align-items: center;\n          padding: 0;\n          border: 1px solid rgba(139, 185, 64, .4);\n          width: 100%;\n          text-transform: capitalize;\n        }\n        button:outline{\n          outline: none;\n        }\n        button:hover{\n          background: ${color.prim};\n          color: ${color.light};\n          border-color: ${color.sec};\n        }\n        p{\n          margin: 0;\n          color: ${color.dark};\n          margin-left: .5rem;\n        }\n        div{\n          background: ${color.dark};\n          width: 55px;\n          height: 45px;\n          border-left: 8px solid rgba(255, 255, 255, .4);\n        }\n        img{\n          width: 40px;\n          height: 40px;\n          object-fit: cover;\n          object-position: center;\n          border-radius: 50%;\n        }\n      `}\n      </style>\n    </button>\n  );\n}\n\nconst Friends = () => {\n  const [friends, setFriends] = useState([]);\n  const id = useSelector(state => state.nav.notifications.id);\n  const all = async() => {\n    try {\n      const res = await axios.get('/chat/all');\n      setFriends(res.data);\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  useEffect(() => {\n    const socket = io();\n    socket.open();\n    socket.on(`chat:${id}`, payload => all());\n    all();\n    return ()=> socket.close();\n  },[id])\n  return(\n    <div className=\"main\">\n      <header>chat</header>\n      <ul>\n        {\n          friends.map((friend) => <li key={uuid()}><Friend {...friend} /></li>)\n        }\n      </ul>\n      <style jsx>{`\n        .main{\n          height: calc(100vh - 40px);\n          background: rgba(0, 0, 0, 0.070);\n          position: sticky;\n          top: 42px;\n        }\n        header{\n          color: rgba(255, 255, 255, 0.7);\n          font-weight: 550;\n          background: ${color.prim};\n          padding: .5rem;\n          text-align: center;\n          text-transform: uppercase;\n        }\n        ul{\n          list-style: none;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          flex-direction: column;\n          height: calc(100% - 40px);\n          overflow: hidden;\n          overflow-y: scroll;\n          border-left: 2px solid ${color.sec};\n        }\n      `}\n      </style>\n    </div>\n  );\n}\n\nexport default Friends;\n"]},"metadata":{},"sourceType":"module"}