{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_POST_REGISTER, ON_GREEN_CREATOR } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport { Modal } from 'reactstrap';\nimport './postregister.scss';\nimport Logo from '../layout/logo';\nimport axios from 'axios';\nimport Loader from '../loader/loader';\n\nconst BtnUpload = () => {\n  return __jsx(\"div\", {\n    className: \"btnUpload_main_cont\"\n  }, __jsx(\"label\", {\n    htmlFor: \"img\"\n  }, __jsx(\"div\", {\n    className: \"img_cont\"\n  }, __jsx(\"img\", {\n    src: \"\",\n    alt: \"\"\n  }), __jsx(FontAwesomeIcon, {\n    icon: faUser\n  })), __jsx(\"input\", {\n    id: \"img\",\n    name: \"img\",\n    type: \"file\"\n  })));\n};\n\nconst Welcome = () => {\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\"\n  }, __jsx(\"h1\", null, \"Bienvenido a \", __jsx(\"span\", null, \"Greenlink!\")), __jsx(\"p\", null, \"Completa el registro agregando informacion adicional y creando tu primer \", __jsx(\"strong\", null, \"GreenPost,\"), \" de esta manera podras ser encontrado por otros usuarios ademas de recibir obsequios. Recuerda, mietras mas preciso seas mas facil sera que tus seres queridos contacten contigo.\"));\n};\n\nconst Congratulations = () => {\n  const user = useSelector(state => state.user);\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\"\n  }, __jsx(\"h1\", null, \"Felicidades \", user.name), __jsx(\"p\", null, \"No olvides crear tu primer\", __jsx(\"strong\", null, \"GreenPost,\")));\n};\n\nconst UserInfo = ({\n  values,\n  setValues,\n  onImg\n}) => {\n  const user = useSelector(state => state.user);\n  return __jsx(\"div\", {\n    className: \"user_postregister_cont\"\n  }, __jsx(\"label\", {\n    htmlFor: \"perfilImg\"\n  }, !values.perfilImgFrontEnd && __jsx(FontAwesomeIcon, {\n    icon: faUser\n  }), values.perfilImgFrontEnd && __jsx(\"img\", {\n    src: values.perfilImgFrontEnd,\n    alt: \"\"\n  }), __jsx(\"input\", {\n    onChange: onImg,\n    type: \"file\",\n    name: \"perfilImg\",\n    id: \"perfilImg\"\n  })), __jsx(\"p\", null, \"Elige una foto de perfil\"), user.name === 'Green' && __jsx(React.Fragment, null, __jsx(\"input\", {\n    value: values.name,\n    onChange: e => setValues({\n      name: e.currentTarget.value\n    }),\n    placeholder: \"Nombre\",\n    type: \"text\"\n  }), __jsx(\"input\", {\n    value: values.lastName,\n    onChange: e => setValues({\n      lastName: e.currentTarget.value\n    }),\n    placeholder: \"Apellido\",\n    type: \"text\"\n  }), __jsx(\"div\", {\n    className: \"birth_sex_main\"\n  }, __jsx(\"p\", null, \"Cumplea\\xF1os\"), __jsx(\"input\", {\n    type: \"date\",\n    value: values.birthday,\n    onChange: e => setValues({\n      birthday: e.currentTarget.value\n    })\n  }), __jsx(\"div\", {\n    className: \"birthday_sex\",\n    style: {\n      marginLeft: '1rem'\n    }\n  }, __jsx(\"p\", null, \"Sexo\"), __jsx(\"select\", {\n    onChange: e => setValues({\n      sex: e.currentTarget.value\n    }),\n    name: \"sex\",\n    id: \"sex\"\n  }, __jsx(\"option\", {\n    value: \"female\"\n  }, \"Mujer\"), __jsx(\"option\", {\n    value: \"male\"\n  }, \"Hombre\"), __jsx(\"option\", {\n    value: \"otro\"\n  }, \"Otro\"))))));\n};\n\nconst PostRegister = () => {\n  const dispatch = useDispatch();\n  const {\n    0: values,\n    1: setValues\n  } = useReducer((state, next) => _objectSpread({}, state, next), {\n    name: '',\n    lastName: '',\n    birthday: '',\n    sex: '',\n    perfilImgFrontEnd: '',\n    perfilImg: ''\n  });\n  const user = useSelector(state => state.user);\n\n  const onImg = e => {\n    const img = e.target.files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      if (reader.result) {\n        setValues({\n          perfilImgFrontEnd: reader.result,\n          perfilImg: img\n        });\n      } else {\n        setValues({\n          perfilImgFrontEnd: null,\n          perfilImg: null\n        });\n      }\n    };\n\n    reader.readAsDataURL(img);\n    console.log(perfilImg);\n    console.log(img);\n  };\n\n  const {\n    0: section,\n    1: setSection\n  } = useReducer((state, next) => _objectSpread({}, state, next), {\n    welcome: true,\n    info: false,\n    loader: false,\n    congratulations: false\n  });\n  const visible = useSelector(state => state.postregister);\n\n  const onSubmit = async () => {\n    try {\n      const {\n        name,\n        lastName,\n        birthday,\n        sex,\n        perfilImg\n      } = values;\n      const data = new FormData();\n      setSection({\n        info: false,\n        loader: true\n      });\n\n      if (user.name === 'Green') {\n        data.append('name', name);\n        data.append('lastName', lastName);\n        data.append('birthday', birthday);\n        data.append('sex', sex);\n      }\n\n      data.append('perfilImg', perfilImg);\n      await axios.post('/user/postregister', data);\n      setSection({\n        loader: false,\n        congratulations: true\n      });\n      setTimeout(() => {\n        dispatch({\n          type: ON_POST_REGISTER\n        });\n      }, 3000);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(Modal, {\n    className: \"my_modal\",\n    isOpen: visible\n  }, __jsx(\"div\", {\n    className: \"postregister_main_cont\"\n  }, __jsx(\"header\", null, __jsx(Logo, {\n    dark: true,\n    url: \"/\"\n  })), __jsx(\"div\", {\n    className: \"body\"\n  }, section.welcome && __jsx(Welcome, null), section.info && __jsx(UserInfo, {\n    values: values,\n    setValues: setValues,\n    onImg: onImg\n  }), section.loader && __jsx(Loader, {\n    dark: true\n  }), section.congratulations && __jsx(Congratulations, null)), __jsx(\"footer\", null, section.welcome && __jsx(\"button\", {\n    onClick: () => setSection({\n      welcome: false,\n      info: true\n    })\n  }, \"siguiente\"), section.info && __jsx(\"button\", {\n    onClick: onSubmit\n  }, \"enviar\"))));\n};\n\nexport default PostRegister;","map":null,"metadata":{},"sourceType":"module"}