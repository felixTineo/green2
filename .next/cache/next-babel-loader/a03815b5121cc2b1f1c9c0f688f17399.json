{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useReducer } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_GREEN_CREATOR, ON_STORE, ON_GREENPOST, ON_CONFIRM, ON_POST } from '../../store/actions';\nimport { Modal } from 'reactstrap';\nimport { color } from '../../layout/var';\nimport { Spinner } from 'reactstrap';\nimport Confirm from '../dialogs/confirm';\nimport axios from 'axios';\n\nvar Creator = function Creator() {\n  var visible = useSelector(function (state) {\n    return state.greenpost.creator;\n  });\n\n  var _useState = useState('/static/random/r16.jpg'),\n      image = _useState[0],\n      setImage = _useState[1];\n\n  var _useState2 = useState(false),\n      loader = _useState2[0],\n      setLoader = _useState2[1];\n\n  var _useState3 = useState(false),\n      confirm = _useState3[0],\n      setConfirm = _useState3[1];\n\n  var _useReducer = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    img: '',\n    title: '',\n    subTitle: '',\n    history: ''\n  }),\n      values = _useReducer[0],\n      setValues = _useReducer[1];\n\n  var dispatch = useDispatch();\n\n  var onImg = function onImg(e) {\n    var img = e.target.files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      if (reader.result) {\n        setImage(reader.result);\n        setValues({\n          img: img\n        });\n      } else {\n        setImage('/static/random/r16.jpg');\n      }\n    };\n\n    reader.readAsDataURL(img);\n  };\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var img, title, subTitle, history, data, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!(e.keyCode === 13 && !e.shiftKey || e.type === \"submit\")) {\n                _context.next = 17;\n                break;\n              }\n\n              e.preventDefault();\n              setLoader(true);\n              img = values.img, title = values.title, subTitle = values.subTitle, history = values.history;\n              data = new FormData();\n              data.append('img', img);\n              data.append('title', title);\n              data.append('subTitle', subTitle);\n              data.append('history', history);\n              _context.next = 12;\n              return axios.post('/post/add', data);\n\n            case 12:\n              res = _context.sent;\n              dispatch({\n                type: ON_POST,\n                post: res.data\n              });\n              setLoader(false);\n              setImage('/static/random/r16.jpg');\n              setValues({\n                img: '',\n                title: '',\n                subTitle: '',\n                history: ''\n              });\n\n            case 17:\n              _context.next = 22;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 19]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"main\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"img\"\n  }, __jsx(\"img\", {\n    src: image,\n    alt: \"\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }), __jsx(\"label\", {\n    title: \"Subir una foto\",\n    htmlFor: \"img\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, loader && __jsx(Spinner, {\n    color: \"success\"\n  }), !loader && __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, __jsx(\"path\", {\n    d: \"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  })), __jsx(\"input\", {\n    onChange: onImg,\n    id: \"img\",\n    name: \"img\",\n    type: \"file\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"history\"\n  }, __jsx(\"form\", {\n    onSubmit: onSubmit,\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, __jsx(\"input\", {\n    id: \"title\",\n    value: values.title,\n    onChange: function onChange(e) {\n      return setValues(_defineProperty({}, e.currentTarget.id, e.currentTarget.value));\n    },\n    disabled: loader,\n    placeholder: \"Titulo\",\n    type: \"text\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"title\"\n  }), __jsx(\"input\", {\n    id: \"subTitle\",\n    value: values.subTitle,\n    onChange: function onChange(e) {\n      return setValues(_defineProperty({}, e.currentTarget.id, e.currentTarget.value));\n    },\n    disabled: loader,\n    placeholder: \"Sub-titulo opcional\",\n    type: \"text\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"sub-title\"\n  }), __jsx(\"textarea\", {\n    onKeyDown: onSubmit,\n    id: \"history\",\n    value: values.history,\n    onChange: function onChange(e) {\n      return setValues(_defineProperty({}, e.currentTarget.id, e.currentTarget.value));\n    },\n    disabled: loader,\n    placeholder: \"Cuentanos tu historia!\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }), __jsx(\"button\", {\n    title: \"Crear post\",\n    disabled: loader,\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, \"Crear\"))), __jsx(_JSXStyle, {\n    id: \"3062654757\",\n    dynamic: [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]\n  }, [\".main.__jsx-style-dynamic-selector{height:60vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;}\", \".img.__jsx-style-dynamic-selector{width:60%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;}\", \".img.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{width:100%;height:100%;object-fit:cover;object-positon:center;-webkit-filter:\".concat(loader ? 'blur(3px)' : 'none', \";filter:\").concat(loader ? 'blur(3px)' : 'none', \";}\"), \"label.__jsx-style-dynamic-selector{width:50px;height:50px;position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", \"label.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{fill:\".concat(color.light, \";-webkit-transition:250ms ease;transition:250ms ease;}\"), \"input[type=\\\"file\\\"].__jsx-style-dynamic-selector{width:0;position:absolute;height:0;top:0;left:0;}\", \"label.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{width:50px;height:50px;}\", \"label.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector:hover{cursor:pointer;fill:\".concat(color.prim, \";}\"), \".history.__jsx-style-dynamic-selector{width:40%;height:100%;padding:1rem .5rem 0;color:\".concat(color.prim, \";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;}\"), \"form.__jsx-style-dynamic-selector{color:\".concat(color.dark, \";-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-top:1.5rem;}\"), \"form.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{width:100%;padding:0;line-height:0;border:none;}\", \"input.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:focus{outline:none;}\", \"input.__jsx-style-dynamic-selector:disabled,textarea.__jsx-style-dynamic-selector:disabled{color:rgba(0,0,0,.5);background:#fff;}\", \".title.__jsx-style-dynamic-selector{font-size:2rem;}\", \".sub-title.__jsx-style-dynamic-selector{font-size:1.2rem;}\", \"textarea.__jsx-style-dynamic-selector{margin-top:1rem;resize:none;width:100%;border:none;font-size:.8rem;height:70%;}\", \"form.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{position:absolute;bottom:.5rem;right:.5rem;-webkit-transition:250ms ease;transition:250ms ease;background:\".concat(loader ? color.prim : 'transparent', \";border:1px solid \").concat(color.prim, \";color:\").concat(loader ? color.light : color.prim, \";}\"), \"from.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:focus{outline:none;}\", \"form.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:hover{background:\".concat(color.prim, \";color:\").concat(color.light, \";}\"), \".btn_close.__jsx-style-dynamic-selector{position:absolute;top:.5rem;right:.5rem;background:transparent;border:none;-webkit-transition:250ms ease;transition:250ms ease;border:1px solid \".concat(color.dark, \";border-radius:50%;width:30px;height:30px;}\"), \".btn_close.__jsx-style-dynamic-selector:focus{outline:none;}\", \".btn_close.__jsx-style-dynamic-selector:hover{color:\".concat(color.light, \";background:\").concat(color.prim, \";border-color:\").concat(color.light, \";}\")]));\n};\n\nexport default Creator;","map":null,"metadata":{},"sourceType":"module"}