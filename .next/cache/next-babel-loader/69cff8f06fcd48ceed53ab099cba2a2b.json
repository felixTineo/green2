{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_POST_REGISTER, ON_GREEN_CREATOR, ON_UPDATE, ON_WALLET } from '../../store/actions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons';\nimport { Modal } from 'reactstrap';\nimport './postregister.scss';\nimport Logo from '../layout/logo';\nimport axios from 'axios';\nimport Loader from '../loader/loader';\n\nvar BtnUpload = function BtnUpload() {\n  return __jsx(\"div\", {\n    className: \"btnUpload_main_cont\"\n  }, __jsx(\"label\", {\n    htmlFor: \"img\"\n  }, __jsx(\"div\", {\n    className: \"img_cont\"\n  }, __jsx(\"img\", {\n    src: \"\",\n    alt: \"\"\n  }), __jsx(FontAwesomeIcon, {\n    icon: faUser\n  })), __jsx(\"input\", {\n    id: \"img\",\n    name: \"img\",\n    type: \"file\"\n  })));\n};\n\nvar Welcome = function Welcome() {\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\"\n  }, __jsx(\"h1\", null, \"Bienvenido a \", __jsx(\"span\", null, \"Greenlink!\")), __jsx(\"p\", null, \"Completa el registro agregando informacion adicional y creando tu primer \", __jsx(\"strong\", null, \"GreenPost,\"), \" de esta manera podras ser encontrado por otros usuarios ademas de recibir obsequios. Recuerda, mietras mas preciso seas mas facil sera que tus seres queridos contacten contigo.\"));\n};\n\nvar Congratulations = function Congratulations() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"welcome_main_cont\"\n  }, __jsx(\"h1\", null, \"Felicidades \", user.name), __jsx(\"p\", null, \"No olvides crear tu primer\", __jsx(\"strong\", null, \"GreenPost,\")));\n};\n\nvar UserInfo = function UserInfo(_ref) {\n  var values = _ref.values,\n      setValues = _ref.setValues,\n      onImg = _ref.onImg;\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: \"user_postregister_cont\"\n  }, __jsx(\"label\", {\n    htmlFor: \"perfilImg\"\n  }, !values.perfilImgFrontEnd && __jsx(FontAwesomeIcon, {\n    icon: faUser\n  }), values.perfilImgFrontEnd && __jsx(\"img\", {\n    src: values.perfilImgFrontEnd,\n    alt: \"\"\n  }), __jsx(\"input\", {\n    onChange: onImg,\n    type: \"file\",\n    name: \"perfilImg\",\n    id: \"perfilImg\"\n  })), __jsx(\"p\", null, \"Elige una foto de perfil\"), user.name === 'Green' && __jsx(React.Fragment, null, __jsx(\"input\", {\n    value: values.name,\n    onChange: function onChange(e) {\n      return setValues({\n        name: e.currentTarget.value\n      });\n    },\n    placeholder: \"Nombre\",\n    type: \"text\"\n  }), __jsx(\"input\", {\n    value: values.lastName,\n    onChange: function onChange(e) {\n      return setValues({\n        lastName: e.currentTarget.value\n      });\n    },\n    placeholder: \"Apellido\",\n    type: \"text\"\n  }), __jsx(\"div\", {\n    className: \"birth_sex_main\"\n  }, __jsx(\"p\", null, \"Cumplea\\xF1os\"), __jsx(\"input\", {\n    type: \"date\",\n    value: values.birthday,\n    onChange: function onChange(e) {\n      return setValues({\n        birthday: e.currentTarget.value\n      });\n    }\n  }), __jsx(\"div\", {\n    className: \"birthday_sex\",\n    style: {\n      marginLeft: '1rem'\n    }\n  }, __jsx(\"p\", null, \"Sexo\"), __jsx(\"select\", {\n    onChange: function onChange(e) {\n      return setValues({\n        sex: e.currentTarget.value\n      });\n    },\n    name: \"sex\",\n    id: \"sex\"\n  }, __jsx(\"option\", {\n    value: \"female\"\n  }, \"Mujer\"), __jsx(\"option\", {\n    value: \"male\"\n  }, \"Hombre\"), __jsx(\"option\", {\n    value: \"otro\"\n  }, \"Otro\"))))));\n};\n\nvar PostRegister = function PostRegister() {\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    name: '',\n    lastName: '',\n    birthday: '',\n    sex: '',\n    perfilImgFrontEnd: '',\n    perfilImg: ''\n  }),\n      values = _useReducer[0],\n      setValues = _useReducer[1];\n\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n\n  var onImg = function onImg(e) {\n    var img = e.target.files[0];\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      if (reader.result) {\n        setValues({\n          perfilImgFrontEnd: reader.result,\n          perfilImg: img\n        });\n      } else {\n        setValues({\n          perfilImgFrontEnd: null,\n          perfilImg: null\n        });\n      }\n    };\n\n    reader.readAsDataURL(img);\n  };\n\n  var _useReducer2 = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    welcome: true,\n    info: false,\n    loader: false,\n    congratulations: false\n  }),\n      section = _useReducer2[0],\n      setSection = _useReducer2[1];\n\n  var visible = useSelector(function (state) {\n    return state.postregister;\n  });\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var name, lastName, birthday, sex, perfilImg, data, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              name = values.name, lastName = values.lastName, birthday = values.birthday, sex = values.sex, perfilImg = values.perfilImg;\n              data = new FormData();\n              setSection({\n                info: false,\n                loader: true\n              });\n\n              if (user.name === 'Green') {\n                data.append('name', name);\n                data.append('lastName', lastName);\n                data.append('birthday', birthday);\n                data.append('sex', sex);\n              }\n\n              data.append('perfilImg', perfilImg);\n              _context.next = 8;\n              return axios.post('/user/postregister', data);\n\n            case 8:\n              res = _context.sent;\n              dispatch({\n                type: ON_UPDATE,\n                payload: res.data\n              });\n              dispatch({\n                type: ON_WALLET,\n                coin: 50\n              });\n              setSection({\n                loader: false,\n                congratulations: true\n              });\n              setTimeout(function () {\n                dispatch({\n                  type: ON_POST_REGISTER\n                });\n              }, 3000);\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 15]]);\n    }));\n\n    return function onSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Modal, {\n    className: \"my_modal\",\n    isOpen: visible\n  }, __jsx(\"div\", {\n    className: \"postregister_main_cont\"\n  }, __jsx(\"header\", null, __jsx(Logo, {\n    dark: true,\n    url: \"/\"\n  })), __jsx(\"div\", {\n    className: \"body\"\n  }, section.welcome && __jsx(Welcome, null), section.info && __jsx(UserInfo, {\n    values: values,\n    setValues: setValues,\n    onImg: onImg\n  }), section.loader && __jsx(Loader, {\n    dark: true\n  }), section.congratulations && __jsx(Congratulations, null)), __jsx(\"footer\", null, section.welcome && __jsx(\"button\", {\n    onClick: function onClick() {\n      return setSection({\n        welcome: false,\n        info: true\n      });\n    }\n  }, \"siguiente\"), section.info && __jsx(\"button\", {\n    onClick: onSubmit\n  }, \"enviar\"))));\n};\n\nexport default PostRegister;","map":null,"metadata":{},"sourceType":"module"}