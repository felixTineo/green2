{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Heart from '../social-buttons/heart';\nimport Gift from '../social-buttons/gift';\nimport Comment from '../social-buttons/comment';\nimport Share from '../social-buttons/share';\nimport Button from '../buttons/button';\nimport RegisterCont from './register-cont';\nimport Input from '../form/input';\nimport { validateEmail, validateEmpty } from '../../utils/functions';\nimport './hero.scss';\nimport Spinner from '../loader/loader';\nimport Router from 'next/router';\nimport { TweenMax } from 'gsap';\nimport axios from 'axios';\n\nclass Hero extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      register: false,\n      spinner: false,\n      registerForm: true,\n      mail: '',\n      mailError: false,\n      mailPop: false,\n      pass: '',\n      passPop: false\n    };\n    this.onRegister = this.onRegister.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    TweenMax.to('#comparte', 7, {\n      strokeDashoffset: 0,\n      delay: 3.5\n    });\n  }\n\n  onRegister() {\n    const {\n      register\n    } = this.state;\n    this.setState({\n      register: !register\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.id]: e.target.value\n    });\n  }\n\n  handleFocus(e) {\n    const element = `${e.target.id}Pop`;\n    this.setState({\n      [element]: false\n    });\n  }\n\n  async onSubmit(e) {\n    e.preventDefault();\n    const {\n      mail,\n      pass\n    } = this.state;\n\n    if (!validateEmail(mail.trim().toLocaleLowerCase())) {\n      this.setState({\n        mailPop: true\n      });\n    } else if (!validateEmpty(pass)) {\n      this.setState({\n        passPop: true\n      });\n    } else {\n      const data = {\n        mail: mail.trim().toLocaleLowerCase(),\n        pass: pass\n      };\n\n      try {\n        this.setState({\n          spinner: true\n        });\n        const res = await axios.post('/user/register', data);\n        this.setState({\n          spinner: false\n        });\n        Router.push({\n          pathname: `/perfil?id=${res.data.id}`,\n          query: res.data\n        }, `/perfil/${res.data._id}`);\n      } catch (err) {\n        this.setState({\n          mailError: true,\n          spinner: false\n        });\n      }\n      /*const options = {\n        headers: { \"Content-Type\": \"application/json\" },\n        method: \"POST\",\n        body: JSON.stringify(data),\n      }\n      this.setState({ spinner:true })\n      fetch('/api/registro.js', options)\n        .then((res)=> {\n          if (res.status === 201) {\n            res.text().then((res) => {\n              Router.push(`/postregistro?id=${res}`);\n            })\n          } else {\n            this.setState({ mailError: true, spinner: false });\n          }\n        })*/\n\n    }\n  }\n\n  render() {\n    const {\n      register,\n      mail,\n      mailError,\n      mailPop,\n      pass,\n      passPop,\n      spinner\n    } = this.state;\n\n    const arrowCircle = __jsx(\"svg\", {\n      className: \"next\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 512 512\"\n    }, __jsx(\"path\", {\n      d: \"M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zm-28.9 143.6l75.5 72.4H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h182.6l-75.5 72.4c-9.7 9.3-9.9 24.8-.4 34.3l11 10.9c9.4 9.4 24.6 9.4 33.9 0L404.3 273c9.4-9.4 9.4-24.6 0-33.9L271.6 106.3c-9.4-9.4-24.6-9.4-33.9 0l-11 10.9c-9.5 9.6-9.3 25.1.4 34.4z\"\n    }));\n\n    return __jsx(\"section\", {\n      className: \"hero_main_cont\"\n    }, __jsx(\"p\", {\n      className: \"vertical_text\"\n    }, \"La unica red social donde puedes ganar regalos y criptomonedas mientras te diviertes y ayudas al planeta\"), __jsx(RegisterCont, {\n      isOpen: register\n    }, !spinner && __jsx(\"form\", {\n      className: \"p-0\",\n      onSubmit: this.onSubmit\n    }, __jsx(\"div\", {\n      className: \"inputs_cont\"\n    }, __jsx(\"div\", {\n      className: \"mail_cont_registro\"\n    }, __jsx(Input, {\n      id: \"mail\",\n      type: \"text\",\n      value: mail,\n      pop: mailPop,\n      popText: \"El correo no es valido\",\n      color: \"light\",\n      placeholder: \"indique su direccion de correo\",\n      label: \"Correo\",\n      onChange: this.handleChange,\n      onFocus: this.handleFocus,\n      style: mailError ? {\n        borderColor: 'red'\n      } : {\n        borderColor: '#fff'\n      }\n    }), __jsx(\"small\", {\n      style: mailError ? {\n        display: 'block'\n      } : {\n        display: 'none'\n      }\n    }, \"El correo ya existe!\")), __jsx(Input, {\n      id: \"pass\",\n      type: \"password\",\n      value: pass,\n      pop: passPop,\n      popText: \"No puede estar vacio\",\n      color: \"light\",\n      placeholder: \"Contrase\\xF1a\",\n      label: \"Contrase\\xF1a\",\n      onChange: this.handleChange,\n      onFocus: this.handleFocus\n    })), __jsx(\"button\", {\n      title: \"Registrar\",\n      type: \"submit\",\n      className: \"btn_next\"\n    }, arrowCircle)), spinner && __jsx(\"div\", {\n      style: {\n        marginTop: '25%'\n      }\n    }, __jsx(\"div\", {\n      className: \"register_loader\"\n    }, __jsx(Spinner, null)))), __jsx(\"div\", {\n      className: \"container-fluid\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-3\"\n    }, __jsx(\"div\", {\n      className: \"social_nav_cont\"\n    }, __jsx(\"nav\", {\n      className: \"social_nav\"\n    }, __jsx(Heart, {\n      className: \"fadeIn\"\n    }), __jsx(Share, {\n      className: \"fadeIn delay-1s\"\n    }), __jsx(Gift, {\n      className: \"fadeIn delay-2s\"\n    }), __jsx(Comment, {\n      className: \"fadeIn delay-3s\"\n    })))), __jsx(\"div\", {\n      className: \"col-7\"\n    }, __jsx(\"div\", {\n      className: \"msg_cont\"\n    }, __jsx(\"div\", {\n      className: \"msg_cont-2 animated fadeIn delay-5s\"\n    }, __jsx(Button, {\n      title: \"Registro\",\n      onClick: this.onRegister,\n      size: \"lg\",\n      color: \"light\"\n    }, \"Unete\"), __jsx(\"p\", null, \"A Greenlink\")), __jsx(\"div\", {\n      className: \"msg_cont-1\"\n    }, __jsx(\"h1\", {\n      className: \"animated delay-2s\"\n    }, __jsx(\"svg\", {\n      width: \"376px\",\n      height: \"86\",\n      className: \"hero_comparte\"\n    }, __jsx(\"text\", {\n      id: \"comparte\",\n      fill: \"none\",\n      stroke: \"#fff\",\n      strokeWidth: \"2px\",\n      strokeDasharray: \"600px\",\n      strokeDashoffset: \"600\",\n      fontSize: \"72px\",\n      x: \"0\",\n      y: \"68\"\n    }, \"COMPARTE\"))), __jsx(\"div\", {\n      className: \"msg_complementary\"\n    }, __jsx(\"p\", {\n      className: \"animated fadeIn delay-3s\"\n    }, \"Disfruta,\"), __jsx(\"p\", {\n      className: \"animated fadeIn delay-4s\"\n    }, \"Diviertete,\"), __jsx(\"p\", {\n      className: \"animated fadeIn delay-5s\"\n    }, \"Gana greencoins\"))))))));\n  }\n\n}\n\n;\nexport default Hero;","map":null,"metadata":{},"sourceType":"module"}