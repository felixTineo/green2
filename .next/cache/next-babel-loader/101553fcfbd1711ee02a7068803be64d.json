{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useReducer, useState, useEffect } from 'react';\nimport './greenpost.scss';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { ON_GREENINFO, ON_GREEN_CREATOR, ON_GREEN_LIKE, OFF_GREEN_LIKE } from '../../store/actions';\nimport classnames from 'classnames';\nimport { faUserCheck, faUserClock, faExpandArrowsAlt, faArrowCircleLeft, faUserPlus, faHeart, faGift, faComment, faHome, faShare, faMapMarkerAlt, faDollarSign, faSchool, faMailBulk, faPhone } from '@fortawesome/free-solid-svg-icons';\nimport GreenHome from './home';\nimport Wish from './wish';\nimport Comment from './comment';\nimport Creator from './creator';\nimport axios from 'axios';\nimport { Modal } from 'reactstrap';\n\nvar GreenNav = function GreenNav(_ref) {\n  var setVisible = _ref.setVisible;\n  var uid = useSelector(function (state) {\n    return state.nav.notifications.id;\n  });\n  var pid = useSelector(function (state) {\n    return state.greenpost.current._id;\n  });\n  var likes = useSelector(function (state) {\n    return state.greenpost.current.likes;\n  });\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      like = _useState[0],\n      setLike = _useState[1];\n\n  useEffect(function () {\n    var checkLike = likes.find(function (like) {\n      return like._id === uid;\n    });\n    if (checkLike) setLike(true);\n  }, [likes, uid]);\n\n  var onReact =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"/green/like/\".concat(pid));\n\n            case 3:\n              res = _context.sent;\n\n              if (!like) {\n                dispatch({\n                  type: ON_GREEN_LIKE,\n                  like: res.data\n                });\n                setLike(true);\n              } else {\n                dispatch({\n                  type: OFF_GREEN_LIKE,\n                  uid: uid\n                });\n                setLike(false);\n              }\n\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function onReact() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"nav\", {\n    className: \"greennav_main_cont\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick() {\n      return setVisible({\n        home: true,\n        wish: false,\n        comments: false\n      });\n    },\n    title: \"Inicio\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faHome\n  }))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: onReact,\n    style: like ? {\n      background: \"#8bb940\",\n      color: \"#ffffff\"\n    } : {\n      background: \"transparent\",\n      color: \"#ffffff\"\n    },\n    title: \"Reaccionar\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faHeart\n  }))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick() {\n      return setVisible({\n        home: false,\n        wish: true,\n        comments: false\n      });\n    },\n    title: \"Ver Deseo\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  }))), __jsx(\"li\", null, __jsx(\"button\", {\n    onClick: function onClick() {\n      return setVisible({\n        home: false,\n        wish: false,\n        comments: true\n      });\n    },\n    title: \"Comentar\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faComment\n  }))), __jsx(\"li\", null, __jsx(\"button\", {\n    title: \"Compartir en mi perfil\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faShare\n  }))), __jsx(\"li\", null, __jsx(\"button\", {\n    title: \"Abrir en pantala completa\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: faExpandArrowsAlt\n  })))));\n};\n\nvar BtnFriend = function BtnFriend() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var id = useSelector(function (state) {\n    return state.nav.notifications.id;\n  });\n\n  var _useState2 = useState(0),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var sendFriend =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"/friend/send/\".concat(user._id));\n\n            case 3:\n              setStatus(1);\n              _context2.next = 9;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 6]]);\n    }));\n\n    return function sendFriend() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var acceptFriend =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get(\"/friend/accept/\".concat(user._id));\n\n            case 3:\n              setStatus(0);\n              _context3.next = 9;\n              break;\n\n            case 6:\n              _context3.prev = 6;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 6]]);\n    }));\n\n    return function acceptFriend() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var cancelFriend =\n  /*#__PURE__*/\n  function () {\n    var _ref5 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return axios.get(\"/friend/cancel/\".concat(user._id));\n\n            case 3:\n              setStatus(null);\n              _context4.next = 9;\n              break;\n\n            case 6:\n              _context4.prev = 6;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(_context4.t0);\n\n            case 9:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 6]]);\n    }));\n\n    return function cancelFriend() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var friend = user.friends.find(function (friend) {\n      return friend._id === id;\n    });\n    var status = friend ? friend.status : null;\n    setStatus(status);\n  }, [id]);\n\n  switch (status) {\n    case 0:\n      return __jsx(\"button\", {\n        onClick: cancelFriend,\n        type: \"button\",\n        title: \"Eliminar amigo\"\n      }, \"Eliminar Amigo\");\n\n    case 1:\n      return __jsx(\"button\", {\n        onClick: cancelFriend,\n        type: \"button\",\n        title: \"Cancelar solicitud de amistad\"\n      }, \"Esparando Confirmacion\");\n\n    case 2:\n      return __jsx(\"button\", {\n        onClick: acceptFriend,\n        type: \"button\",\n        title: \"Aceptar solicitud de amistad\"\n      }, \"Aceptar\");\n\n    default:\n      return __jsx(\"button\", {\n        onClick: sendFriend,\n        type: \"button\",\n        title: \"Enviar solicitud de amistad\"\n      }, \"Agregar Amigo\");\n  }\n};\n\nvar GreenInfo = function GreenInfo() {\n  var info = useSelector(function (state) {\n    return state.greenpost.info;\n  });\n  var dispatch = useDispatch();\n\n  var _useReducer = useReducer(function (state, next) {\n    return _objectSpread({}, state, next);\n  }, {\n    home: true,\n    wish: false,\n    comments: false\n  }),\n      visible = _useReducer[0],\n      setVisible = _useReducer[1];\n\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  return __jsx(\"div\", {\n    className: classnames({\n      greeninfo_main_cont: true,\n      greeninfo_main_cont_visible: info\n    })\n  }, __jsx(\"div\", {\n    className: \"section_main_cont\"\n  }, visible.home && __jsx(GreenHome, null), visible.wish && __jsx(Wish, null), visible.comments && __jsx(Comment, null)), __jsx(\"footer\", null, user.owner && __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: ON_GREEN_CREATOR\n      });\n    },\n    title: \"Crear Post\"\n  }, \"GreenPost\"), !user.owner && __jsx(BtnFriend, null), __jsx(GreenNav, {\n    setVisible: setVisible\n  })));\n};\n\nvar BtnInfo = function BtnInfo() {\n  var info = useSelector(function (state) {\n    return state.greenpost.info;\n  });\n  var green = useSelector(function (state) {\n    return state.greenpost;\n  });\n  var dispatch = useDispatch();\n  return __jsx(\"button\", {\n    title: info ? \"Ocultar\" : \"Ver\",\n    onClick: function onClick() {\n      return dispatch({\n        type: ON_GREENINFO,\n        option: !info\n      });\n    },\n    className: classnames({\n      btngreen_info: true,\n      btngreen_info_rotate: info\n    })\n  }, __jsx(FontAwesomeIcon, {\n    icon: faArrowCircleLeft\n  }));\n};\n\nvar GreenPost = function GreenPost() {\n  var green = useSelector(function (state) {\n    return state.greenpost.current;\n  });\n  var greenCreator = useSelector(function (state) {\n    return state.greenpost.creator;\n  });\n  var img = green.img;\n  return __jsx(\"div\", {\n    style: {\n      backgroundImage: \"url(\".concat(img, \")\")\n    },\n    className: \"greenpost_main_cont\"\n  }, __jsx(Modal, {\n    style: {\n      minWidth: '80%'\n    },\n    isOpen: greenCreator\n  }, __jsx(Creator, {\n    green: true\n  })), __jsx(GreenInfo, null), __jsx(BtnInfo, null));\n};\n\nexport default GreenPost;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/greenpost/greenpost.jsx"],"names":["React","useReducer","useState","useEffect","useSelector","useDispatch","FontAwesomeIcon","ON_GREENINFO","ON_GREEN_CREATOR","ON_GREEN_LIKE","OFF_GREEN_LIKE","classnames","faUserCheck","faUserClock","faExpandArrowsAlt","faArrowCircleLeft","faUserPlus","faHeart","faGift","faComment","faHome","faShare","faMapMarkerAlt","faDollarSign","faSchool","faMailBulk","faPhone","GreenHome","Wish","Comment","Creator","axios","Modal","GreenNav","setVisible","uid","state","nav","notifications","id","pid","greenpost","current","_id","likes","dispatch","like","setLike","checkLike","find","onReact","get","res","type","data","console","log","home","wish","comments","background","color","BtnFriend","user","status","setStatus","sendFriend","acceptFriend","cancelFriend","friend","friends","GreenInfo","info","next","visible","greeninfo_main_cont","greeninfo_main_cont_visible","owner","BtnInfo","green","option","btngreen_info","btngreen_info_rotate","GreenPost","greenCreator","creator","img","backgroundImage","minWidth"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAO,kBAAP;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,YAAT,EAAuBC,gBAAvB,EAAyCC,aAAzC,EAAwDC,cAAxD,QAA8E,qBAA9E;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SACEC,WADF,EAEEC,WAFF,EAGEC,iBAHF,EAIEC,iBAJF,EAKEC,UALF,EAMEC,OANF,EAOEC,MAPF,EAQEC,SARF,EASEC,MATF,EAUEC,OAVF,EAWEC,cAXF,EAYEC,YAZF,EAaEC,QAbF,EAcEC,UAdF,EAeEC,OAfF,QAgBO,mCAhBP;AAiBA,OAAOC,SAAP,MAAsB,QAAtB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,YAAtB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAAoB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;AACnC,MAAMC,GAAG,GAAG/B,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACC,GAAN,CAAUC,aAAV,CAAwBC,EAA5B;AAAA,GAAN,CAAvB;AACA,MAAMC,GAAG,GAAGpC,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACK,SAAN,CAAgBC,OAAhB,CAAwBC,GAA5B;AAAA,GAAN,CAAvB;AACA,MAAMC,KAAK,GAAGxC,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACK,SAAN,CAAgBC,OAAhB,CAAwBE,KAA5B;AAAA,GAAN,CAAzB;AACA,MAAMC,QAAQ,GAAGxC,WAAW,EAA5B;;AAJmC,kBAKXH,QAAQ,CAAC,KAAD,CALG;AAAA,MAK5B4C,IAL4B;AAAA,MAKtBC,OALsB;;AAOnC5C,EAAAA,SAAS,CAAC,YAAM;AACd,QAAM6C,SAAS,GAAGJ,KAAK,CAACK,IAAN,CAAW,UAAAH,IAAI;AAAA,aAAIA,IAAI,CAACH,GAAL,KAAaR,GAAjB;AAAA,KAAf,CAAlB;AACA,QAAGa,SAAH,EAAcD,OAAO,CAAC,IAAD,CAAP;AACf,GAHQ,EAGP,CAACH,KAAD,EAAQT,GAAR,CAHO,CAAT;;AAKA,MAAMe,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEMnB,KAAK,CAACoB,GAAN,uBAAyBX,GAAzB,EAFN;;AAAA;AAENY,cAAAA,GAFM;;AAGZ,kBAAG,CAACN,IAAJ,EAAS;AACPD,gBAAAA,QAAQ,CAAC;AAAEQ,kBAAAA,IAAI,EAAE5C,aAAR;AAAuBqC,kBAAAA,IAAI,EAAEM,GAAG,CAACE;AAAjC,iBAAD,CAAR;AACAP,gBAAAA,OAAO,CAAC,IAAD,CAAP;AACD,eAHD,MAGO;AACLF,gBAAAA,QAAQ,CAAC;AAAEQ,kBAAAA,IAAI,EAAE3C,cAAR;AAAwByB,kBAAAA,GAAG,EAAHA;AAAxB,iBAAD,CAAR;AACAY,gBAAAA,OAAO,CAAC,KAAD,CAAP;AACD;;AATW;AAAA;;AAAA;AAAA;AAAA;AAWZQ,cAAAA,OAAO,CAACC,GAAR;;AAXY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPN,OAAO;AAAA;AAAA;AAAA,KAAb;;AAcA,SACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,kBACE,kBACE;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAIhB,UAAU,CAAC;AAAEuB,QAAAA,IAAI,EAAE,IAAR;AAAcC,QAAAA,IAAI,EAAE,KAApB;AAA2BC,QAAAA,QAAQ,EAAE;AAArC,OAAD,CAAd;AAAA,KAAjB;AAA+E,IAAA,KAAK,EAAC;AAArF,KAA8F,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEvC;AAAvB,IAA9F,CADF,CADF,EAIE,kBACE;AAAQ,IAAA,OAAO,EAAE8B,OAAjB;AAA0B,IAAA,KAAK,EAAGJ,IAAI,GAAG;AAAEc,MAAAA,UAAU,EAAE,SAAd;AAAyBC,MAAAA,KAAK,EAAE;AAAhC,KAAH,GAAiD;AAAED,MAAAA,UAAU,EAAE,aAAd;AAA6BC,MAAAA,KAAK,EAAE;AAApC,KAAvF;AAAyI,IAAA,KAAK,EAAC;AAA/I,KAA4J,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAE5C;AAAvB,IAA5J,CADF,CAJF,EAOE,kBACE;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAIiB,UAAU,CAAC;AAAEuB,QAAAA,IAAI,EAAE,KAAR;AAAeC,QAAAA,IAAI,EAAE,IAArB;AAA2BC,QAAAA,QAAQ,EAAE;AAArC,OAAD,CAAd;AAAA,KAAjB;AAA+E,IAAA,KAAK,EAAC;AAArF,KAAiG,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEzC;AAAvB,IAAjG,CADF,CAPF,EAUE,kBACE;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAIgB,UAAU,CAAC;AAAEuB,QAAAA,IAAI,EAAE,KAAR;AAAeC,QAAAA,IAAI,EAAE,KAArB;AAA4BC,QAAAA,QAAQ,EAAE;AAAtC,OAAD,CAAd;AAAA,KAAjB;AAA+E,IAAA,KAAK,EAAC;AAArF,KAAgG,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAExC;AAAvB,IAAhG,CADF,CAVF,EAaE,kBACE;AAAQ,IAAA,KAAK,EAAC;AAAd,KAAuC,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEE;AAAvB,IAAvC,CADF,CAbF,EAgBE,kBACE;AAAQ,IAAA,KAAK,EAAC;AAAd,KAA0C,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEP;AAAvB,IAA1C,CADF,CAhBF,CADF,CADF;AAwBD,CAlDD;;AAoDA,IAAMgD,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,MAAMC,IAAI,GAAG3D,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAAC2B,IAAV;AAAA,GAAN,CAAxB;AACA,MAAMxB,EAAE,GAAGnC,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACC,GAAN,CAAUC,aAAV,CAAwBC,EAA5B;AAAA,GAAN,CAAtB;;AAFsB,mBAGMrC,QAAQ,CAAC,CAAD,CAHd;AAAA,MAGf8D,MAHe;AAAA,MAGPC,SAHO;;AAKtB,MAAMC,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAETnC,KAAK,CAACoB,GAAN,wBAA0BY,IAAI,CAACpB,GAA/B,EAFS;;AAAA;AAGfsB,cAAAA,SAAS,CAAC,CAAD,CAAT;AAHe;AAAA;;AAAA;AAAA;AAAA;AAKfV,cAAAA,OAAO,CAACC,GAAR;;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVU,UAAU;AAAA;AAAA;AAAA,KAAhB;;AASA,MAAMC,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEXpC,KAAK,CAACoB,GAAN,0BAA4BY,IAAI,CAACpB,GAAjC,EAFW;;AAAA;AAGjBsB,cAAAA,SAAS,CAAC,CAAD,CAAT;AAHiB;AAAA;;AAAA;AAAA;AAAA;AAKjBV,cAAAA,OAAO,CAACC,GAAR;;AALiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZW,YAAY;AAAA;AAAA;AAAA,KAAlB;;AASA,MAAMC,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEXrC,KAAK,CAACoB,GAAN,0BAA4BY,IAAI,CAACpB,GAAjC,EAFW;;AAAA;AAGjBsB,cAAAA,SAAS,CAAC,IAAD,CAAT;AAHiB;AAAA;;AAAA;AAAA;AAAA;AAKjBV,cAAAA,OAAO,CAACC,GAAR;;AALiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZY,YAAY;AAAA;AAAA;AAAA,KAAlB;;AASAjE,EAAAA,SAAS,CAAC,YAAK;AACb,QAAMkE,MAAM,GAAGN,IAAI,CAACO,OAAL,CAAarB,IAAb,CAAkB,UAAAoB,MAAM;AAAA,aAAIA,MAAM,CAAC1B,GAAP,KAAeJ,EAAnB;AAAA,KAAxB,CAAf;AACA,QAAMyB,MAAM,GAAGK,MAAM,GAAGA,MAAM,CAACL,MAAV,GAAmB,IAAxC;AACAC,IAAAA,SAAS,CAACD,MAAD,CAAT;AACD,GAJQ,EAIP,CAACzB,EAAD,CAJO,CAAT;;AAMA,UAAQyB,MAAR;AACE,SAAK,CAAL;AACE,aAAO;AAAQ,QAAA,OAAO,EAAEI,YAAjB;AAA+B,QAAA,IAAI,EAAC,QAApC;AAA6C,QAAA,KAAK,EAAC;AAAnD,0BAAP;;AACF,SAAK,CAAL;AACE,aAAO;AAAQ,QAAA,OAAO,EAAEA,YAAjB;AAA+B,QAAA,IAAI,EAAC,QAApC;AAA6C,QAAA,KAAK,EAAC;AAAnD,kCAAP;;AACF,SAAK,CAAL;AACE,aAAO;AAAQ,QAAA,OAAO,EAAED,YAAjB;AAA+B,QAAA,IAAI,EAAC,QAApC;AAA6C,QAAA,KAAK,EAAC;AAAnD,mBAAP;;AACF;AACE,aAAO;AAAQ,QAAA,OAAO,EAAED,UAAjB;AAA6B,QAAA,IAAI,EAAC,QAAlC;AAA2C,QAAA,KAAK,EAAC;AAAjD,yBAAP;AARJ;AAUD,CAhDD;;AAkDA,IAAMK,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,MAAMC,IAAI,GAAGpE,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACK,SAAN,CAAgB+B,IAApB;AAAA,GAAN,CAAxB;AACA,MAAM3B,QAAQ,GAAGxC,WAAW,EAA5B;;AAFsB,oBAGQJ,UAAU,CAAC,UAACmC,KAAD,EAAQqC,IAAR;AAAA,6BAAuBrC,KAAvB,EAAiCqC,IAAjC;AAAA,GAAD,EAA0C;AAChFhB,IAAAA,IAAI,EAAE,IAD0E;AAEhFC,IAAAA,IAAI,EAAE,KAF0E;AAGhFC,IAAAA,QAAQ,EAAE;AAHsE,GAA1C,CAHlB;AAAA,MAGfe,OAHe;AAAA,MAGNxC,UAHM;;AAQtB,MAAM6B,IAAI,GAAG3D,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAAC2B,IAAV;AAAA,GAAN,CAAxB;AAEA,SACE;AAAK,IAAA,SAAS,EAAEpD,UAAU,CAAC;AACzBgE,MAAAA,mBAAmB,EAAE,IADI;AAEzBC,MAAAA,2BAA2B,EAAEJ;AAFJ,KAAD;AAA1B,KAIE;AAAK,IAAA,SAAS,EAAC;AAAf,KACIE,OAAO,CAACjB,IAAR,IAAgB,MAAC,SAAD,OADpB,EAEIiB,OAAO,CAAChB,IAAR,IAAgB,MAAC,IAAD,OAFpB,EAGIgB,OAAO,CAACf,QAAR,IAAoB,MAAC,OAAD,OAHxB,CAJF,EASE,sBACII,IAAI,CAACc,KAAL,IAAc;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAKhC,QAAQ,CAAC;AAAEQ,QAAAA,IAAI,EAAE7C;AAAR,OAAD,CAAb;AAAA,KAAjB;AAA4D,IAAA,KAAK,EAAC;AAAlE,iBADlB,EAEI,CAACuD,IAAI,CAACc,KAAN,IAAe,MAAC,SAAD,OAFnB,EAGE,MAAC,QAAD;AACE,IAAA,UAAU,EAAE3C;AADd,IAHF,CATF,CADF;AAmBD,CA7BD;;AA+BA,IAAM4C,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,MAAMN,IAAI,GAAGpE,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACK,SAAN,CAAgB+B,IAApB;AAAA,GAAN,CAAxB;AACA,MAAMO,KAAK,GAAG3E,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACK,SAAV;AAAA,GAAN,CAAzB;AACA,MAAMI,QAAQ,GAAGxC,WAAW,EAA5B;AACA,SACE;AACE,IAAA,KAAK,EAAGmE,IAAI,GAAG,SAAH,GAAe,KAD7B;AAEE,IAAA,OAAO,EAAE;AAAA,aAAK3B,QAAQ,CAAC;AAAEQ,QAAAA,IAAI,EAAE9C,YAAR;AAAsByE,QAAAA,MAAM,EAAE,CAACR;AAA/B,OAAD,CAAb;AAAA,KAFX;AAGE,IAAA,SAAS,EAAE7D,UAAU,CAAC;AACpBsE,MAAAA,aAAa,EAAE,IADK;AAEpBC,MAAAA,oBAAoB,EAAEV;AAFF,KAAD;AAHvB,KAQE,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAEzD;AAAvB,IARF,CADF;AAYD,CAhBD;;AAkBA,IAAMoE,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,MAAMJ,KAAK,GAAG3E,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACK,SAAN,CAAgBC,OAApB;AAAA,GAAN,CAAzB;AACA,MAAM0C,YAAY,GAAGhF,WAAW,CAAC,UAAAgC,KAAK;AAAA,WAAIA,KAAK,CAACK,SAAN,CAAgB4C,OAApB;AAAA,GAAN,CAAhC;AACA,MAAMC,GAAG,GAAGP,KAAK,CAACO,GAAlB;AACA,SACE;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,eAAe,gBAASD,GAAT;AAAjB,KAAZ;AAAgD,IAAA,SAAS,EAAC;AAA1D,KACE,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEE,MAAAA,QAAQ,EAAE;AAAZ,KAAd;AAAmC,IAAA,MAAM,EAAEJ;AAA3C,KACE,MAAC,OAAD;AAAS,IAAA,KAAK;AAAd,IADF,CADF,EAIE,MAAC,SAAD,OAJF,EAKE,MAAC,OAAD,OALF,CADF;AASD,CAbD;;AAeA,eAAeD,SAAf","sourcesContent":["import React, { useReducer, useState, useEffect } from 'react';\nimport './greenpost.scss';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { ON_GREENINFO, ON_GREEN_CREATOR, ON_GREEN_LIKE, OFF_GREEN_LIKE } from '../../store/actions';\nimport classnames from 'classnames';\nimport {\n  faUserCheck,\n  faUserClock,\n  faExpandArrowsAlt,\n  faArrowCircleLeft,\n  faUserPlus,\n  faHeart,\n  faGift,\n  faComment,\n  faHome,\n  faShare,\n  faMapMarkerAlt,\n  faDollarSign,\n  faSchool,\n  faMailBulk,\n  faPhone,\n} from '@fortawesome/free-solid-svg-icons';\nimport GreenHome from './home';\nimport Wish from './wish';\nimport Comment from './comment';\nimport Creator from './creator';\nimport axios from 'axios';\nimport { Modal } from 'reactstrap';\n\nconst GreenNav = ({ setVisible }) => {\n  const uid = useSelector(state => state.nav.notifications.id);\n  const pid = useSelector(state => state.greenpost.current._id);\n  const likes = useSelector(state => state.greenpost.current.likes);\n  const dispatch = useDispatch();\n  const [like, setLike] = useState(false);\n\n  useEffect(() => {\n    const checkLike = likes.find(like => like._id === uid);\n    if(checkLike) setLike(true);\n  },[likes, uid]);\n\n  const onReact = async() => {\n    try{\n      const res = await axios.get(`/green/like/${pid}`);\n      if(!like){\n        dispatch({ type: ON_GREEN_LIKE, like: res.data });\n        setLike(true);\n      } else {\n        dispatch({ type: OFF_GREEN_LIKE, uid });\n        setLike(false);\n      }\n    }catch(err){\n      console.log(err);\n    }\n  }\n  return(\n    <nav className=\"greennav_main_cont\">\n      <ul>\n        <li>\n          <button onClick={()=>setVisible({ home: true, wish: false, comments: false })} title=\"Inicio\"><FontAwesomeIcon icon={faHome} /></button>\n        </li>\n        <li>\n          <button onClick={onReact} style={ like ? { background: \"#8bb940\", color: \"#ffffff\" } : { background: \"transparent\", color: \"#ffffff\" } } title=\"Reaccionar\"><FontAwesomeIcon icon={faHeart} /></button>\n        </li>\n        <li>\n          <button onClick={()=>setVisible({ home: false, wish: true, comments: false })} title=\"Ver Deseo\"><FontAwesomeIcon icon={faGift} /></button>\n        </li>\n        <li>\n          <button onClick={()=>setVisible({ home: false, wish: false, comments: true })} title=\"Comentar\"><FontAwesomeIcon icon={faComment} /></button>\n        </li>\n        <li>\n          <button title=\"Compartir en mi perfil\"><FontAwesomeIcon icon={faShare} /></button>\n        </li>\n        <li>\n          <button title=\"Abrir en pantala completa\"><FontAwesomeIcon icon={faExpandArrowsAlt} /></button>\n        </li>\n      </ul>\n    </nav>\n  )\n}\n\nconst BtnFriend = () => {\n  const user = useSelector(state => state.user);\n  const id = useSelector(state => state.nav.notifications.id);\n  const [status, setStatus] = useState(0);\n\n  const sendFriend = async() => {\n    try{\n      await axios.get(`/friend/send/${user._id}`);\n      setStatus(1);\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  const acceptFriend = async() => {\n    try{\n      await axios.get(`/friend/accept/${user._id}`)\n      setStatus(0);\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  const cancelFriend = async() => {\n    try{\n      await axios.get(`/friend/cancel/${user._id}`)\n      setStatus(null);\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  useEffect(()=> {\n    const friend = user.friends.find(friend => friend._id === id);\n    const status = friend ? friend.status : null;\n    setStatus(status);\n  },[id]);\n\n  switch (status) {\n    case 0:\n      return <button onClick={cancelFriend} type=\"button\" title=\"Eliminar amigo\">Eliminar Amigo</button>\n    case 1:\n      return <button onClick={cancelFriend} type=\"button\" title=\"Cancelar solicitud de amistad\">Esparando Confirmacion</button>\n    case 2:\n      return <button onClick={acceptFriend} type=\"button\" title=\"Aceptar solicitud de amistad\">Aceptar</button>\n    default:\n      return <button onClick={sendFriend} type=\"button\" title=\"Enviar solicitud de amistad\">Agregar Amigo</button>\n  }\n}\n\nconst GreenInfo = () => {\n  const info = useSelector(state => state.greenpost.info);\n  const dispatch = useDispatch();\n  const [visible, setVisible] = useReducer((state, next) => ({ ...state, ...next }),{\n    home: true,\n    wish: false,\n    comments: false,\n  })\n  const user = useSelector(state => state.user);\n\n  return(\n    <div className={classnames({\n      greeninfo_main_cont: true,\n      greeninfo_main_cont_visible: info,\n    })}>\n      <div className=\"section_main_cont\">\n        { visible.home && <GreenHome /> }\n        { visible.wish && <Wish /> }\n        { visible.comments && <Comment /> }\n      </div>\n      <footer>\n        { user.owner && <button onClick={()=> dispatch({ type: ON_GREEN_CREATOR })} title=\"Crear Post\">GreenPost</button> }\n        { !user.owner && <BtnFriend /> }\n        <GreenNav\n          setVisible={setVisible}\n        />\n      </footer>\n    </div>\n  )\n};\n\nconst BtnInfo = () => {\n  const info = useSelector(state => state.greenpost.info);\n  const green = useSelector(state => state.greenpost);\n  const dispatch = useDispatch();\n  return(\n    <button\n      title={ info ? \"Ocultar\" : \"Ver\" }\n      onClick={()=> dispatch({ type: ON_GREENINFO, option: !info })}\n      className={classnames({\n        btngreen_info: true,\n        btngreen_info_rotate: info,\n      })}\n    >\n      <FontAwesomeIcon icon={faArrowCircleLeft} />\n    </button>\n  )\n}\n\nconst GreenPost = () => {\n  const green = useSelector(state => state.greenpost.current);\n  const greenCreator = useSelector(state => state.greenpost.creator);\n  const img = green.img;\n  return(\n    <div style={{ backgroundImage: `url(${img})` }} className=\"greenpost_main_cont\">\n      <Modal style={{ minWidth: '80%' }} isOpen={greenCreator}>\n        <Creator green />\n      </Modal>\n      <GreenInfo />\n      <BtnInfo />\n    </div>\n  )\n}\n\nexport default GreenPost;\n"]},"metadata":{},"sourceType":"module"}