{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useReducer } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_GREEN_CREATOR, ON_STORE, ON_GREENPOST, ON_CONFIRM, ON_POST } from '../../store/actions';\nimport { Modal } from 'reactstrap';\nimport { color } from '../../layout/var';\nimport { Spinner } from 'reactstrap';\nimport Confirm from '../dialogs/confirm';\nimport axios from 'axios';\n\nconst Creator = () => {\n  const visible = useSelector(state => state.greenpost.creator);\n  const {\n    0: image,\n    1: setImage\n  } = useState('/static/random/r16.jpg');\n  const {\n    0: loader,\n    1: setLoader\n  } = useState(false);\n  const {\n    0: confirm,\n    1: setConfirm\n  } = useState(false);\n  const {\n    0: values,\n    1: setValues\n  } = useReducer((state, next) => _objectSpread({}, state, next), {\n    img: '',\n    title: '',\n    subTitle: '',\n    history: ''\n  });\n  const dispatch = useDispatch();\n\n  const onImg = e => {\n    const img = e.target.files[0];\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      if (reader.result) {\n        setImage(reader.result);\n        setValues({\n          img\n        });\n      } else {\n        setImage('/static/random/r16.jpg');\n      }\n    };\n\n    reader.readAsDataURL(img);\n  };\n\n  const onSubmit = async e => {\n    try {\n      if (e.keyCode === 13 && !e.shiftKey || e.type === \"submit\") {\n        e.preventDefault();\n        setLoader(true);\n        const {\n          img,\n          title,\n          subTitle,\n          history\n        } = values;\n        const data = new FormData();\n        data.append('img', img);\n        data.append('title', title);\n        data.append('subTitle', subTitle);\n        data.append('history', history);\n        const res = await axios.post('/post/add', data);\n        dispatch({\n          type: ON_POST,\n          post: res.data\n        });\n        setLoader(false);\n        setImage('/static/random/r16.jpg');\n        setValues({\n          img: '',\n          title: '',\n          subTitle: '',\n          history: ''\n        });\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"main\"\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"img\"\n  }, __jsx(\"img\", {\n    src: image,\n    alt: \"\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }), __jsx(\"label\", {\n    title: \"Subir una foto\",\n    htmlFor: \"img\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, loader && __jsx(Spinner, {\n    color: \"success\"\n  }), !loader && __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, __jsx(\"path\", {\n    d: \"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  })), __jsx(\"input\", {\n    onChange: onImg,\n    id: \"img\",\n    name: \"img\",\n    type: \"file\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }))), __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"history\"\n  }, __jsx(\"form\", {\n    onSubmit: onSubmit,\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, __jsx(\"input\", {\n    id: \"title\",\n    value: values.title,\n    onChange: e => setValues({\n      [e.currentTarget.id]: e.currentTarget.value\n    }),\n    disabled: loader,\n    placeholder: \"Titulo\",\n    type: \"text\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"title\"\n  }), __jsx(\"input\", {\n    id: \"subTitle\",\n    value: values.subTitle,\n    onChange: e => setValues({\n      [e.currentTarget.id]: e.currentTarget.value\n    }),\n    disabled: loader,\n    placeholder: \"Sub-titulo opcional\",\n    type: \"text\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]]) + \" \" + \"sub-title\"\n  }), __jsx(\"textarea\", {\n    onKeyDown: onSubmit,\n    id: \"history\",\n    value: values.history,\n    onChange: e => setValues({\n      [e.currentTarget.id]: e.currentTarget.value\n    }),\n    disabled: loader,\n    placeholder: \"Cuentanos tu historia!\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }), __jsx(\"button\", {\n    title: \"Crear post\",\n    disabled: loader,\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"3062654757\", [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]]])\n  }, \"Crear\"))), __jsx(_JSXStyle, {\n    id: \"3062654757\",\n    dynamic: [loader ? 'blur(3px)' : 'none', color.light, color.prim, color.prim, color.dark, loader ? color.prim : 'transparent', color.prim, loader ? color.light : color.prim, color.prim, color.light, color.dark, color.light, color.prim, color.light]\n  }, [\".main.__jsx-style-dynamic-selector{height:60vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;}\", \".img.__jsx-style-dynamic-selector{width:60%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;}\", `.img.__jsx-style-dynamic-selector img.__jsx-style-dynamic-selector{width:100%;height:100%;object-fit:cover;object-positon:center;-webkit-filter:${loader ? 'blur(3px)' : 'none'};filter:${loader ? 'blur(3px)' : 'none'};}`, \"label.__jsx-style-dynamic-selector{width:50px;height:50px;position:absolute;top:calc(50% - 50px);left:calc(50% - 50px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", `label.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{fill:${color.light};-webkit-transition:250ms ease;transition:250ms ease;}`, \"input[type=\\\"file\\\"].__jsx-style-dynamic-selector{width:0;position:absolute;height:0;top:0;left:0;}\", \"label.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector{width:50px;height:50px;}\", `label.__jsx-style-dynamic-selector svg.__jsx-style-dynamic-selector:hover{cursor:pointer;fill:${color.prim};}`, `.history.__jsx-style-dynamic-selector{width:40%;height:100%;padding:1rem .5rem 0;color:${color.prim};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;}`, `form.__jsx-style-dynamic-selector{color:${color.dark};-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;margin-top:1.5rem;}`, \"form.__jsx-style-dynamic-selector input.__jsx-style-dynamic-selector{width:100%;padding:0;line-height:0;border:none;}\", \"input.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:focus{outline:none;}\", \"input.__jsx-style-dynamic-selector:disabled,textarea.__jsx-style-dynamic-selector:disabled{color:rgba(0,0,0,.5);background:#fff;}\", \".title.__jsx-style-dynamic-selector{font-size:2rem;}\", \".sub-title.__jsx-style-dynamic-selector{font-size:1.2rem;}\", \"textarea.__jsx-style-dynamic-selector{margin-top:1rem;resize:none;width:100%;border:none;font-size:.8rem;height:70%;}\", `form.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector{position:absolute;bottom:.5rem;right:.5rem;-webkit-transition:250ms ease;transition:250ms ease;background:${loader ? color.prim : 'transparent'};border:1px solid ${color.prim};color:${loader ? color.light : color.prim};}`, \"from.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:focus{outline:none;}\", `form.__jsx-style-dynamic-selector button.__jsx-style-dynamic-selector:hover{background:${color.prim};color:${color.light};}`, `.btn_close.__jsx-style-dynamic-selector{position:absolute;top:.5rem;right:.5rem;background:transparent;border:none;-webkit-transition:250ms ease;transition:250ms ease;border:1px solid ${color.dark};border-radius:50%;width:30px;height:30px;}`, \".btn_close.__jsx-style-dynamic-selector:focus{outline:none;}\", `.btn_close.__jsx-style-dynamic-selector:hover{color:${color.light};background:${color.prim};border-color:${color.light};}`]));\n};\n\nexport default Creator;","map":null,"metadata":{},"sourceType":"module"}