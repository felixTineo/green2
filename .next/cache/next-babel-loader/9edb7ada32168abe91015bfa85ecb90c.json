{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_WALLET, ON_GREEN_WISH_FOUND } from '../../store/actions';\nimport { ON_STORE } from '../../store/actions';\nimport './wish.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nvar Wish = function Wish() {\n  var wish = useSelector(function (state) {\n    return state.greenpost.current.wish;\n  });\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var pid = useSelector(function (state) {\n    return state.greenpost.current._id;\n  });\n\n  var _useState = useState(0),\n      tip = _useState[0],\n      setTip = _useState[1];\n\n  var dispatch = useDispatch();\n\n  var _useState2 = useState(wish.found),\n      found = _useState2[0],\n      setFound = _useState2[1];\n\n  var inputTip = useRef();\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var res, parseTip;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              e.preventDefault();\n              setFound(wish.found + _parseInt(tip, 10));\n              _context.next = 5;\n              return axios.get(\"/green/tip/\".concat(pid, \"/\").concat(tip));\n\n            case 5:\n              res = _context.sent;\n              parseTip = _parseInt(tip, 10);\n              dispatch({\n                type: ON_WALLET,\n                coin: -parseTip\n              });\n              dispatch({\n                type: ON_GREEN_WISH_FOUND,\n                found: parseTip\n              });\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"wish_main_cont animated fadeIn\"\n  }, !wish.name && __jsx(\"div\", {\n    className: \"nowish_main_cont\"\n  }, __jsx(\"button\", {\n    onClick: function onClick() {\n      return dispatch({\n        type: ON_STORE\n      });\n    },\n    disabled: !user.owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  }), user.owner ? __jsx(\"p\", null, \"Elige un deseo, podria concederse muy pronto.\") : __jsx(\"p\", null, user.name, \" aun no a elegido un deseo\"))), wish.name && __jsx(\"div\", {\n    className: \"wish_cont shadow\"\n  }, __jsx(\"img\", {\n    src: wish.img,\n    alt: \"\"\n  }), found !== wish.price && __jsx(\"form\", {\n    onSubmit: onSubmit\n  }, __jsx(\"input\", {\n    value: tip,\n    onChange: function onChange(e) {\n      return setTip(e.currentTarget.value > wish.price - found ? wish.price - found : e.currentTarget.value);\n    },\n    type: \"number\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\")), __jsx(\"div\", {\n    className: \"wish_loader_cont\"\n  }, __jsx(\"div\", {\n    className: \"wish_loader\",\n    style: {\n      width: \"\".concat(found * 100 / wish.price, \"%\")\n    }\n  })), __jsx(\"footer\", null, __jsx(\"p\", null, wish.name), __jsx(\"p\", null, \"$\", wish.price))));\n};\n\nexport default Wish;","map":null,"metadata":{},"sourceType":"module"}