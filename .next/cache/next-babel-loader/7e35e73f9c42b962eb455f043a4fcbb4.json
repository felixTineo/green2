{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_CHAT_FRIEND, ON_CHAT_PRIVATE, ON_CHAT_MINIMIZE, ON_CHAT_ALERT } from '../../store/actions';\nimport { color } from '../../layout/var';\nimport uuid from 'uuid/v1';\nimport persons from '../../test/persons';\nimport io from 'socket.io-client';\nimport axios from 'axios'; //const friends = persons(8);\n\nconst Friend = ({\n  perfilImg,\n  fullName,\n  _id,\n  url,\n  chatHistory\n}) => {\n  const dispatch = useDispatch();\n  const privates = useSelector(state => state.chat.privates);\n  const cuid = useSelector(state => state.nav.notifications.id);\n  useEffect(() => {\n    console.log('friend');\n    const user = {\n      perfilImg,\n      fullName,\n      _id,\n      url,\n      chatHistory,\n      minimize: false,\n      anAlert: false\n    };\n    const socket = io();\n    socket.open();\n    socket.on(`notification:${cuid}`, _id => {\n      const isOpen = privates.find(user => user._id === _id);\n      console.log(_id);\n\n      if (isOpen && isOpen.minimize) {\n        dispatch({\n          type: ON_CHAT_ALERT,\n          _id,\n          option: true\n        });\n      } else {\n        dispatch({\n          type: ON_CHAT_PRIVATE,\n          user\n        });\n      }\n    });\n  }, []);\n\n  const onPrivate = () => {\n    try {\n      const user = {\n        perfilImg,\n        fullName,\n        _id,\n        url,\n        chatHistory,\n        minimize: false,\n        anAlert: false\n      };\n      const isOpen = privates.find(user => user._id === _id);\n\n      if (isOpen) {\n        dispatch({\n          type: ON_CHAT_MINIMIZE,\n          _id,\n          option: false\n        });\n      } else {\n        dispatch({\n          type: ON_CHAT_PRIVATE,\n          user\n        });\n      }\n\n      setTimeout(() => document.getElementById(_id).focus(), 200);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"button\", {\n    onClick: onPrivate,\n    type: \"button\",\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  }, __jsx(\"img\", {\n    src: perfilImg,\n    alt: \"\",\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  })), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"1182382733\", [color.prim, color.light, color.sec, color.dark, color.dark]]])\n  }, fullName), __jsx(_JSXStyle, {\n    id: \"1182382733\",\n    dynamic: [color.prim, color.light, color.sec, color.dark, color.dark]\n  }, [\"button.__jsx-style-dynamic-selector{background:transparent;border:none;-webkit-transition:250ms ease;transition:250ms ease;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;border:1px solid rgba(139,185,64,.4);width:100%;text-transform:capitalize;}\", \"button.__jsx-style-dynamic-selector:outline{outline:none;}\", `button.__jsx-style-dynamic-selector:hover{background:${color.prim};color:${color.light};border-color:${color.sec};}`, `p.__jsx-style-dynamic-selector{margin:0;color:${color.dark};margin-left:.5rem;}`, `div.__jsx-style-dynamic-selector{background:${color.dark};width:55px;height:45px;border-left:8px solid rgba(255,255,255,.4);}`, \"img.__jsx-style-dynamic-selector{width:40px;height:40px;object-fit:cover;object-position:center;border-radius:50%;}\"]));\n};\n\nconst Friends = () => {\n  const {\n    0: friends,\n    1: setFriends\n  } = useState([]);\n\n  const all = async () => {\n    try {\n      const res = await axios.get('/chat/all');\n      setFriends(res.data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    all();\n  }, []);\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]]) + \" \" + \"main\"\n  }, __jsx(\"header\", {\n    className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]])\n  }, \"chat\"), __jsx(\"ul\", {\n    className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]])\n  }, friends.map(friend => __jsx(\"li\", {\n    key: uuid(),\n    className: _JSXStyle.dynamic([[\"2226638880\", [color.prim, color.sec]]])\n  }, __jsx(Friend, friend)))), __jsx(_JSXStyle, {\n    id: \"2226638880\",\n    dynamic: [color.prim, color.sec]\n  }, [\".main.__jsx-style-dynamic-selector{height:calc(100vh - 40px);background:rgba(0,0,0,0.070);position:-webkit-sticky;position:sticky;top:42px;}\", `header.__jsx-style-dynamic-selector{color:rgba(255,255,255,0.7);font-weight:550;background:${color.prim};padding:.5rem;text-align:center;text-transform:uppercase;}`, `ul.__jsx-style-dynamic-selector{list-style:none;padding:0;margin:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:calc(100% - 40px);overflow:hidden;overflow-y:scroll;border-left:2px solid ${color.sec};}`]));\n};\n\nexport default Friends;","map":null,"metadata":{},"sourceType":"module"}