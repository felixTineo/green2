{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar __jsx = React.createElement;\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ON_WALLET, ON_GREEN_WISH_FOUND } from '../../store/actions';\nimport { ON_STORE } from '../../store/actions';\nimport './wish.scss';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift } from '@fortawesome/free-solid-svg-icons';\nimport axios from 'axios';\n\nconst Wish = () => {\n  const wish = useSelector(state => state.greenpost.current.wish);\n  const user = useSelector(state => state.user);\n  const pid = useSelector(state => state.greenpost.current._id);\n  const {\n    0: tip,\n    1: setTip\n  } = useState(0);\n  const dispatch = useDispatch();\n  const {\n    0: found,\n    1: setFound\n  } = useState(wish.found);\n  const inputTip = useRef();\n\n  const onSubmit = async e => {\n    try {\n      e.preventDefault();\n      setFound(wish.found + _parseInt(tip, 10));\n      const res = await axios.get(`/green/tip/${pid}/${tip}`);\n\n      const parseTip = _parseInt(tip, 10);\n\n      dispatch({\n        type: ON_WALLET,\n        coin: -parseTip\n      });\n      dispatch({\n        type: ON_GREEN_WISH_FOUND,\n        found: parseTip\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"wish_main_cont animated fadeIn\"\n  }, !wish.name && __jsx(\"div\", {\n    className: \"nowish_main_cont\"\n  }, __jsx(\"button\", {\n    onClick: () => dispatch({\n      type: ON_STORE\n    }),\n    disabled: !user.owner\n  }, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  }), user.owner ? __jsx(\"p\", null, \"Elige un deseo, podria concederse muy pronto.\") : __jsx(\"p\", null, user.name, \" aun no a elegido un deseo\"))), wish.name && __jsx(\"div\", {\n    className: \"wish_cont shadow\"\n  }, __jsx(\"img\", {\n    src: wish.img,\n    alt: \"\"\n  }), found !== wish.price && __jsx(\"form\", {\n    onSubmit: onSubmit\n  }, __jsx(\"input\", {\n    value: tip,\n    onChange: e => setTip(e.currentTarget.value > wish.price - found ? wish.price - found : e.currentTarget.value),\n    type: \"number\"\n  }), __jsx(\"button\", {\n    type: \"submit\"\n  }, \"enviar\")), __jsx(\"div\", {\n    className: \"wish_loader_cont\"\n  }, __jsx(\"div\", {\n    className: \"wish_loader\",\n    style: {\n      width: `${found * 100 / wish.price}%`\n    }\n  })), __jsx(\"footer\", null, __jsx(\"p\", null, wish.name), __jsx(\"p\", null, \"$\", wish.price))));\n};\n\nexport default Wish;","map":null,"metadata":{},"sourceType":"module"}