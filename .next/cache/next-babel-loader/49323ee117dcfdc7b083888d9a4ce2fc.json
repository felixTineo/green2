{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useReducer } from 'react';\nimport './login.scss';\nimport Layout from '../components/layout/layout';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift } from '@fortawesome/free-solid-svg-icons';\nimport Logo from '../components/layout/logo';\nimport { TweenMax } from 'gsap';\nimport axios from 'axios';\nimport { useDispatch } from 'react-redux';\nimport { ON_LOADER } from '../store/actions';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport Router from 'next/router';\nimport { ON_LOGIN } from '../store/actions';\n\nvar LoginForm = function LoginForm(_ref) {\n  var setLogin = _ref.setLogin;\n\n  var _useState = useState(''),\n      mail = _useState[0],\n      setMail = _useState[1];\n\n  var _useState2 = useState(''),\n      pass = _useState2[0],\n      setPass = _useState2[1];\n\n  var _useState3 = useState(false),\n      popMail = _useState3[0],\n      setPopMail = _useState3[1];\n\n  var _useState4 = useState(false),\n      popPass = _useState4[0],\n      setPopPass = _useState4[1];\n\n  var _useState5 = useState(false),\n      active = _useState5[0],\n      setActive = _useState5[1];\n\n  var dispatch = useDispatch();\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var count, interval, data, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              e.preventDefault();\n              count = 0;\n              setActive(true);\n              interval = setInterval(function () {\n                count = count + 15;\n\n                if (count >= 75) {\n                  clearInterval(interval);\n                  dispatch({\n                    type: ON_LOADER,\n                    loader: 99\n                  });\n                } else {\n                  dispatch({\n                    type: ON_LOADER,\n                    loader: count\n                  });\n                }\n              }, 1000);\n              data = {\n                mail: mail,\n                pass: pass\n              };\n              _context.next = 8;\n              return axios.post('/user/login', data);\n\n            case 8:\n              res = _context.sent;\n              clearInterval(interval);\n\n              if (!(res.data === 'mail')) {\n                _context.next = 14;\n                break;\n              }\n\n              setActive(false);\n              dispatch({\n                type: ON_LOADER,\n                loader: 0\n              });\n              return _context.abrupt(\"return\", setPopMail(true));\n\n            case 14:\n              if (!(res.data === 'pass')) {\n                _context.next = 18;\n                break;\n              }\n\n              setActive(false);\n              dispatch({\n                type: ON_LOADER,\n                loader: 0\n              });\n              return _context.abrupt(\"return\", setPopPass(true));\n\n            case 18:\n              dispatch({\n                type: ON_LOADER,\n                loader: 100\n              });\n              res.data.posts = _JSON$stringify(res.data.posts);\n              res.data.greenPost = _JSON$stringify(res.data.greenPost);\n              Router.replace({\n                pathname: \"/perfil\",\n                query: res.data\n              }, \"/perfil/\".concat(res.data._id), {\n                shallow: true\n              });\n              dispatch({\n                type: ON_LOADER,\n                loader: 100\n              });\n              _context.next = 29;\n              break;\n\n            case 25:\n              _context.prev = 25;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n              dispatch({\n                type: ON_LOADER,\n                loader: 0\n              });\n\n            case 29:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 25]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"login_register_cont animated fadeIn\"\n  }, __jsx(\"header\", null, __jsx(\"h1\", null, \"Inicio de sessi\\xF3n\")), __jsx(\"form\", {\n    onSubmit: onSubmit\n  }, __jsx(\"label\", {\n    htmlFor: \"mail\"\n  }, __jsx(\"p\", null, \"usuario\"), __jsx(\"input\", {\n    disabled: active,\n    autoComplete: \"false\",\n    onBlur: function onBlur() {\n      return setPopMail(false);\n    },\n    onFocus: function onFocus() {\n      return setPopMail(false);\n    },\n    id: \"mail\",\n    value: mail,\n    onChange: function onChange(e) {\n      return setMail(e.currentTarget.value);\n    },\n    type: \"text\"\n  }), __jsx(Popover, {\n    isOpen: popMail,\n    target: \"mail\",\n    placement: \"bottom\"\n  }, __jsx(PopoverBody, null, __jsx(\"span\", null, \"El correo no es correcto, por favor verifiquelo e intentelo de nuevo\")))), __jsx(\"label\", {\n    htmlFor: \"pass\"\n  }, __jsx(\"p\", null, \"contrase\\xF1a\"), __jsx(\"input\", {\n    disabled: active,\n    onBlur: function onBlur() {\n      return setPopPass(false);\n    },\n    onFocus: function onFocus() {\n      return setPopPass(false);\n    },\n    id: \"pass\",\n    value: pass,\n    onChange: function onChange(e) {\n      return setPass(e.currentTarget.value);\n    },\n    type: \"password\"\n  }), __jsx(Popover, {\n    isOpen: popPass,\n    target: \"pass\",\n    placement: \"bottom\"\n  }, __jsx(PopoverBody, null, __jsx(\"span\", null, \"El correo no es correcto, por favor verifiquelo e intentelo de nuevo\")))), __jsx(\"footer\", {\n    className: \"login_register_cont\"\n  }, __jsx(\"button\", {\n    disabled: active,\n    onClick: function onClick() {\n      return setLogin(false);\n    },\n    className: \"btn_loogin_register btn_inactive\",\n    type: \"button\"\n  }, \"registro\"), __jsx(\"button\", {\n    disabled: active,\n    className: \"btn_loogin_register btn_active\",\n    type: \"submit\"\n  }, \"login\"))));\n};\n\nvar RegisterForm = function RegisterForm(_ref3) {\n  var setLogin = _ref3.setLogin;\n  var dispatch = useDispatch();\n\n  var _useState6 = useState(),\n      mailPop = _useState6[0],\n      setMailPop = _useState6[1];\n\n  var _useReducer = useReducer(function (state, newState) {\n    return _objectSpread({}, state, newState);\n  }, {\n    name: '',\n    lastName: '',\n    mail: '',\n    pass: '',\n    birthday: '',\n    sex: ''\n  }),\n      values = _useReducer[0],\n      setValues = _useReducer[1];\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(e) {\n      var count, interval, data, res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              e.preventDefault();\n              count = 0;\n              interval = setInterval(function () {\n                count = count + 15;\n                dispatch({\n                  type: ON_LOADER,\n                  loader: count\n                });\n              }, 1000);\n              data = {\n                name: values.name,\n                lastName: values.lastName,\n                mail: values.mail.toLocaleLowerCase(),\n                pass: values.pass,\n                birthday: values.birthday,\n                sex: values.sex\n              };\n              _context2.next = 7;\n              return axios.post('/user/register', data);\n\n            case 7:\n              res = _context2.sent;\n              clearInterval(interval);\n\n              if (res.data === 'mail') {\n                dispatch({\n                  type: ON_LOADER,\n                  loader: 0\n                });\n                setMailPop(true);\n              } else {\n                dispatch({\n                  type: ON_LOADER,\n                  loader: 100\n                });\n                Router.push({\n                  pathname: \"/perfil?id=\".concat(res.data.id),\n                  query: res.data\n                }, \"/perfil/\".concat(res.data._id));\n              }\n\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 12]]);\n    }));\n\n    return function onSubmit(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"register_login_cont animated fadeIn\"\n  }, __jsx(\"header\", null, __jsx(\"h1\", null, \"registro\"), __jsx(\"p\", null, \"Gratis, facil y rapido\")), __jsx(\"form\", {\n    onSubmit: onSubmit\n  }, __jsx(\"div\", {\n    className: \"fullName\"\n  }, __jsx(\"input\", {\n    id: \"name\",\n    type: \"text\",\n    placeholder: \"Nombre\",\n    value: values.name,\n    onChange: function onChange(e) {\n      return setValues({\n        name: e.currentTarget.value\n      });\n    }\n  }), __jsx(\"input\", {\n    style: {\n      marginLeft: \".5rem\"\n    },\n    id: \"lastName\",\n    type: \"text\",\n    placeholder: \"Apellido\",\n    value: values.lastName,\n    onChange: function onChange(e) {\n      return setValues({\n        lastName: e.currentTarget.value\n      });\n    }\n  })), __jsx(\"input\", {\n    id: \"mail\",\n    type: \"text\",\n    placeholder: \"Correo electr\\xF3nico\",\n    value: values.mail,\n    onFocus: function onFocus() {\n      return setMailPop(false);\n    },\n    onChange: function onChange(e) {\n      return setValues({\n        mail: e.currentTarget.value\n      });\n    }\n  }), __jsx(Popover, {\n    placement: \"bottom\",\n    target: \"mail\",\n    isOpen: mailPop\n  }, __jsx(PopoverBody, null, __jsx(\"span\", null, \"El correo ya fue usado para crear otra cuenta\"))), __jsx(\"input\", {\n    id: \"pass\",\n    type: \"password\",\n    placeholder: \"Contrase\\xF1a\",\n    value: values.pass,\n    onChange: function onChange(e) {\n      return setValues({\n        pass: e.currentTarget.value\n      });\n    }\n  }), __jsx(\"div\", {\n    className: \"birth_sex_main\"\n  }, __jsx(\"div\", {\n    className: \"birthday_sex\"\n  }, __jsx(\"p\", null, \"Cumplea\\xF1os\"), __jsx(\"input\", {\n    id: \"birthday\",\n    type: \"date\",\n    placeholder: \"Correo electr\\xF3nico\",\n    value: values.birthday,\n    onChange: function onChange(e) {\n      return setValues({\n        birthday: e.currentTarget.value\n      });\n    }\n  })), __jsx(\"div\", {\n    className: \"birthday_sex\",\n    style: {\n      marginLeft: '1rem'\n    }\n  }, __jsx(\"p\", null, \"Sexo\"), __jsx(\"select\", {\n    onChange: function onChange(e) {\n      return setValues({\n        sex: e.currentTarget.value\n      });\n    },\n    name: \"sex\",\n    id: \"sex\"\n  }, __jsx(\"option\", {\n    value: \"female\"\n  }, \"Mujer\"), __jsx(\"option\", {\n    value: \"male\"\n  }, \"Hombre\"), __jsx(\"option\", {\n    value: \"otro\"\n  }, \"Otro\")))), __jsx(\"footer\", {\n    className: \"login_register_cont\"\n  }, __jsx(\"button\", {\n    className: \"btn_loogin_register btn_active\",\n    type: \"submit\"\n  }, \"registro\"), __jsx(\"button\", {\n    onClick: function onClick() {\n      return setLogin(true);\n    },\n    className: \"btn_loogin_register btn_inactive\",\n    type: \"button\"\n  }, \"login\"))));\n};\n\nvar Login = function Login() {\n  var _useState7 = useState(true),\n      login = _useState7[0],\n      setLogin = _useState7[1];\n\n  return __jsx(Layout, null, __jsx(\"div\", {\n    className: \"login_main_cont\"\n  }, __jsx(\"div\", {\n    className: \"login_cont shadow\"\n  }, __jsx(\"div\", {\n    className: \"green_cont\"\n  }, __jsx(\"header\", null, __jsx(Logo, {\n    url: \"/\"\n  })), __jsx(\"div\", {\n    className: \"green_logo\"\n  }, __jsx(\"h1\", null, __jsx(FontAwesomeIcon, {\n    icon: faGift\n  })), __jsx(\"p\", null, \"Comparte, disfruta... Ayuda el planeta\"), __jsx(\"button\", {\n    type: \"button\"\n  }, \"\\xBFquieres saber mas?\")), __jsx(\"small\", null, \"Comparte con los seres que amas y ayuda a el planeta.\")), login && __jsx(LoginForm, {\n    setLogin: setLogin\n  }), !login && __jsx(RegisterForm, {\n    setLogin: setLogin\n  }))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/pages/login.jsx"],"names":["React","useState","useEffect","useReducer","Layout","FontAwesomeIcon","faGift","Logo","TweenMax","axios","useDispatch","ON_LOADER","Popover","PopoverBody","Router","ON_LOGIN","LoginForm","setLogin","mail","setMail","pass","setPass","popMail","setPopMail","popPass","setPopPass","active","setActive","dispatch","onSubmit","e","preventDefault","count","interval","setInterval","clearInterval","type","loader","data","post","res","posts","greenPost","replace","pathname","query","_id","shallow","console","log","currentTarget","value","RegisterForm","mailPop","setMailPop","state","newState","name","lastName","birthday","sex","values","setValues","toLocaleLowerCase","push","id","marginLeft","Login","login"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer } from 'react';\nimport './login.scss';\nimport Layout from '../components/layout/layout';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGift } from '@fortawesome/free-solid-svg-icons';\nimport Logo from '../components/layout/logo';\nimport { TweenMax } from 'gsap';\nimport axios from 'axios';\nimport { useDispatch } from 'react-redux';\nimport { ON_LOADER } from '../store/actions';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport Router from 'next/router';\nimport { ON_LOGIN } from '../store/actions';\n\nconst LoginForm = ({ setLogin }) => {\n  const [mail, setMail] = useState('');\n  const [pass, setPass] = useState('');\n  const [popMail, setPopMail] = useState(false);\n  const [popPass, setPopPass] = useState(false);\n  const [active, setActive] = useState(false);\n  const dispatch = useDispatch();\n  const onSubmit = async (e) => {\n    try{\n      e.preventDefault();\n      let count = 0;\n      setActive(true);\n      let interval = setInterval(()=> {\n        count = count + 15;\n        if(count >= 75){\n          clearInterval(interval);\n          dispatch({ type: ON_LOADER, loader: 99 });\n        } else{\n          dispatch({ type: ON_LOADER, loader: count });\n        }\n      }, 1000);\n      const data = { mail, pass };\n      const res = await axios.post('/user/login', data);\n      clearInterval(interval);\n      if(res.data === 'mail'){\n        setActive(false);\n        dispatch({ type: ON_LOADER, loader: 0 });\n        return setPopMail(true);\n      }\n      if(res.data === 'pass'){\n        setActive(false);\n        dispatch({ type: ON_LOADER, loader: 0 });\n        return setPopPass(true);\n      }\n      dispatch({ type: ON_LOADER, loader: 100 });\n      res.data.posts = JSON.stringify(res.data.posts);\n      res.data.greenPost = JSON.stringify(res.data.greenPost);\n      Router.replace({ pathname: `/perfil`, query: res.data }, `/perfil/${res.data._id}`, {shallow: true});\n      dispatch({ type: ON_LOADER, loader: 100 });\n    }catch(err){\n      console.log(err);\n      dispatch({ type: ON_LOADER, loader: 0 });\n    }\n  }\n\n\nreturn(\n  <div className=\"login_register_cont animated fadeIn\">\n    <header>\n        <h1>Inicio de sessión</h1>\n    </header>\n    <form onSubmit={onSubmit}>\n      <label htmlFor=\"mail\">\n        <p>usuario</p>\n        <input disabled={active} autoComplete=\"false\" onBlur={()=> setPopMail(false)} onFocus={()=> setPopMail(false)} id=\"mail\" value={mail} onChange={(e)=> setMail(e.currentTarget.value)} type=\"text\"/>\n        <Popover isOpen={popMail} target=\"mail\" placement=\"bottom\">\n          <PopoverBody>\n            <span>El correo no es correcto, por favor verifiquelo e intentelo de nuevo</span>\n          </PopoverBody>\n        </Popover>\n      </label>\n      <label htmlFor=\"pass\">\n        <p>contraseña</p>\n        <input disabled={active} onBlur={()=> setPopPass(false)} onFocus={()=> setPopPass(false)} id=\"pass\" value={pass} onChange={(e)=> setPass(e.currentTarget.value)} type=\"password\"/>\n        <Popover isOpen={popPass} target=\"pass\" placement=\"bottom\">\n          <PopoverBody>\n            <span>El correo no es correcto, por favor verifiquelo e intentelo de nuevo</span>\n          </PopoverBody>\n        </Popover>\n      </label>\n      <footer className=\"login_register_cont\">\n        <button disabled={active} onClick={()=>setLogin(false)} className=\"btn_loogin_register btn_inactive\" type=\"button\">registro</button>\n        <button disabled={active} className=\"btn_loogin_register btn_active\" type=\"submit\">login</button>\n      </footer>\n    </form>\n  </div>\n)\n}\n\nconst RegisterForm = ({ setLogin }) => {\n  const dispatch = useDispatch();\n  const [mailPop, setMailPop] = useState();\n  const [values, setValues] = useReducer((state, newState) => ({...state, ...newState}),{\n    name: '',\n    lastName: '',\n    mail: '',\n    pass: '',\n    birthday: '',\n    sex: '',\n  });\n\n  const onSubmit = async (e) => {\n    try{\n      e.preventDefault();\n      let count = 0;\n      const interval = setInterval(()=> {\n        count = count + 15;\n        dispatch({ type: ON_LOADER, loader: count });\n      }, 1000);\n      const data = {\n        name: values.name,\n        lastName: values.lastName,\n        mail: values.mail.toLocaleLowerCase(),\n        pass: values.pass,\n        birthday: values.birthday,\n        sex: values.sex,\n      };\n      const res = await axios.post('/user/register', data);\n      clearInterval(interval);\n      if(res.data === 'mail'){\n        dispatch({ type: ON_LOADER, loader: 0 });\n        setMailPop(true);\n      } else {\n        dispatch({ type: ON_LOADER, loader: 100 });\n        Router.push({ pathname: `/perfil?id=${res.data.id}`, query: res.data }, `/perfil/${res.data._id}`);\n      }\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  return(\n    <div className=\"register_login_cont animated fadeIn\">\n      <header>\n        <h1>registro</h1>\n        <p>Gratis, facil y rapido</p>\n      </header>\n      <form onSubmit={onSubmit}>\n        <div className=\"fullName\">\n          <input\n            id=\"name\"\n            type=\"text\"\n            placeholder=\"Nombre\"\n            value={values.name}\n            onChange={(e)=> setValues({ name: e.currentTarget.value })}\n          />\n          <input\n            style={{ marginLeft:\".5rem\" }}\n            id=\"lastName\"\n            type=\"text\"\n            placeholder=\"Apellido\"\n            value={values.lastName}\n            onChange={(e)=> setValues({ lastName: e.currentTarget.value })}\n          />\n        </div>\n        <input\n          id=\"mail\"\n          type=\"text\"\n          placeholder=\"Correo electrónico\"\n          value={values.mail}\n          onFocus={()=>setMailPop(false)}\n          onChange={(e)=> setValues({ mail: e.currentTarget.value })}\n        />\n      <Popover placement=\"bottom\" target=\"mail\" isOpen={mailPop}>\n        <PopoverBody>\n          <span>El correo ya fue usado para crear otra cuenta</span>\n        </PopoverBody>\n      </Popover>\n        <input\n          id=\"pass\"\n          type=\"password\"\n          placeholder=\"Contraseña\"\n          value={values.pass}\n          onChange={(e)=> setValues({ pass: e.currentTarget.value })}\n        />\n        <div className=\"birth_sex_main\">\n          <div className=\"birthday_sex\">\n            <p>Cumpleaños</p>\n            <input\n              id=\"birthday\"\n              type=\"date\"\n              placeholder=\"Correo electrónico\"\n              value={values.birthday}\n              onChange={(e)=> setValues({ birthday: e.currentTarget.value })}\n            />\n          </div>\n          <div className=\"birthday_sex\" style={{ marginLeft: '1rem' }}>\n            <p>Sexo</p>\n            <select onChange={(e)=> setValues({ sex: e.currentTarget.value })} name=\"sex\" id=\"sex\">\n              <option value=\"female\">Mujer</option>\n              <option value=\"male\">Hombre</option>\n              <option value=\"otro\">Otro</option>\n            </select>\n          </div>\n        </div>\n        <footer className=\"login_register_cont\">\n          <button className=\"btn_loogin_register btn_active\" type=\"submit\">registro</button>\n          <button onClick={()=> setLogin(true)} className=\"btn_loogin_register btn_inactive\" type=\"button\">login</button>\n        </footer>\n      </form>\n    </div>\n  )\n}\n\n\nconst Login = () => {\n  const [login, setLogin] = useState(true);\n  return(\n    <Layout>\n      <div className=\"login_main_cont\">\n        <div className=\"login_cont shadow\">\n          <div className=\"green_cont\">\n            <header><Logo url='/'/></header>\n            <div className=\"green_logo\">\n              <h1><FontAwesomeIcon icon={faGift} /></h1>\n              <p>Comparte, disfruta... Ayuda el planeta</p>\n              <button type=\"button\">¿quieres saber mas?</button>\n            </div>\n            <small>Comparte con los seres que amas y ayuda a el planeta.</small>\n          </div>\n          {\n            login && <LoginForm setLogin={setLogin} />\n          }\n          {\n            !login && <RegisterForm setLogin={setLogin} />\n          }\n        </div>\n      </div>\n    </Layout>\n  )\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}