{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUserPlus, faUserCheck, faUserClock, faHeart, faGift, faComment } from '@fortawesome/free-solid-svg-icons';\nimport './home.scss';\nimport axios from 'axios';\n\nvar GreenInfoIcon = function GreenInfoIcon(_ref) {\n  var icon = _ref.icon,\n      info = _ref.info;\n  return __jsx(\"li\", {\n    className: \"greenicon_info_cont\"\n  }, __jsx(FontAwesomeIcon, {\n    icon: icon\n  }), __jsx(\"p\", null, info));\n};\n\nvar BtnFriend = function BtnFriend() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var id = useSelector(function (state) {\n    return state.nav.notifications.id;\n  });\n\n  var _useState = useState(0),\n      status = _useState[0],\n      setStatus = _useState[1];\n\n  var sendFriend =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.get(\"/friend/send/\".concat(user._id));\n\n            case 3:\n              setStatus(1);\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function sendFriend() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var acceptFriend =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.get(\"/friend/accept/\".concat(user._id));\n\n            case 3:\n              setStatus(0);\n              _context2.next = 9;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 6]]);\n    }));\n\n    return function acceptFriend() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var cancelFriend =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get(\"/friend/cancel/\".concat(user._id));\n\n            case 3:\n              setStatus(null);\n              _context3.next = 9;\n              break;\n\n            case 6:\n              _context3.prev = 6;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 6]]);\n    }));\n\n    return function cancelFriend() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var friend = user.friends.find(function (friend) {\n      return friend._id === id;\n    });\n    var status = friend ? friend.status : null;\n    setStatus(status);\n  }, [id]);\n\n  switch (status) {\n    case 0:\n      return __jsx(\"button\", {\n        onClick: cancelFriend,\n        type: \"button\",\n        title: \"Eliminar amigo\"\n      }, __jsx(FontAwesomeIcon, {\n        icon: faUserCheck\n      }));\n\n    case 1:\n      return __jsx(\"button\", {\n        onClick: cancelFriend,\n        type: \"button\",\n        title: \"Cancelar solicitud de amistad\"\n      }, __jsx(FontAwesomeIcon, {\n        icon: faUserClock\n      }));\n\n    case 2:\n      return __jsx(\"button\", {\n        onClick: acceptFriend,\n        type: \"button\",\n        title: \"Aceptar solicitud de amistad\"\n      }, \"Aceptar\");\n\n    default:\n      return __jsx(\"button\", {\n        onClick: sendFriend,\n        type: \"button\",\n        title: \"Enviar solicitud de amistad\"\n      }, __jsx(FontAwesomeIcon, {\n        icon: faUserPlus\n      }));\n  }\n};\n\nvar GreenHome = function GreenHome() {\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var greenpost = useSelector(function (state) {\n    return state.greenpost.current;\n  });\n  var name = user.name,\n      lastName = user.lastName,\n      perfilImg = user.perfilImg,\n      _id = user._id;\n  return __jsx(\"div\", {\n    className: \"greenhome_main_cont animated fadeIn\"\n  }, __jsx(\"div\", {\n    className: \"user_info\"\n  }, __jsx(\"img\", {\n    src: perfilImg,\n    alt: \"\"\n  }), __jsx(\"div\", {\n    className: \"user_name\"\n  }, __jsx(\"p\", null, __jsx(\"span\", null, name), \" \", lastName), !user.owner && __jsx(BtnFriend, null)), __jsx(\"ul\", null, __jsx(GreenInfoIcon, {\n    info: greenpost.likes.length,\n    icon: faHeart\n  }), __jsx(GreenInfoIcon, {\n    info: greenpost.comments.length,\n    icon: faComment\n  }), __jsx(GreenInfoIcon, {\n    info: greenpost.wish.found,\n    icon: faGift\n  })), __jsx(\"p\", null, user.greenPost.history)));\n};\n\nexport default GreenHome;","map":{"version":3,"sources":["/home/felix/Documentos/projects/greenlink/components/greenpost/home.jsx"],"names":["React","useState","useEffect","useSelector","FontAwesomeIcon","faUserPlus","faUserCheck","faUserClock","faHeart","faGift","faComment","axios","GreenInfoIcon","icon","info","BtnFriend","user","state","id","nav","notifications","status","setStatus","sendFriend","get","_id","console","log","acceptFriend","cancelFriend","friend","friends","find","GreenHome","greenpost","current","name","lastName","perfilImg","owner","likes","length","comments","wish","found","greenPost","history"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,UAAT,EAAoBC,WAApB,EAAiCC,WAAjC,EAA8CC,OAA9C,EAAuDC,MAAvD,EAA+DC,SAA/D,QAAiF,mCAAjF;AACA,OAAO,aAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAAoB;AAAA,MAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,MAAXC,IAAW,QAAXA,IAAW;AACxC,SACE;AAAI,IAAA,SAAS,EAAC;AAAd,KACE,MAAC,eAAD;AAAiB,IAAA,IAAI,EAAED;AAAvB,IADF,EAEE,iBAAIC,IAAJ,CAFF,CADF;AAMD,CAPD;;AASA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,MAAMC,IAAI,GAAGb,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACD,IAAV;AAAA,GAAN,CAAxB;AACA,MAAME,EAAE,GAAGf,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACE,GAAN,CAAUC,aAAV,CAAwBF,EAA5B;AAAA,GAAN,CAAtB;;AAFsB,kBAGMjB,QAAQ,CAAC,CAAD,CAHd;AAAA,MAGfoB,MAHe;AAAA,MAGPC,SAHO;;AAKtB,MAAMC,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAETZ,KAAK,CAACa,GAAN,wBAA0BR,IAAI,CAACS,GAA/B,EAFS;;AAAA;AAGfH,cAAAA,SAAS,CAAC,CAAD,CAAT;AAHe;AAAA;;AAAA;AAAA;AAAA;AAKfI,cAAAA,OAAO,CAACC,GAAR;;AALe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVJ,UAAU;AAAA;AAAA;AAAA,KAAhB;;AASA,MAAMK,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEXjB,KAAK,CAACa,GAAN,0BAA4BR,IAAI,CAACS,GAAjC,EAFW;;AAAA;AAGjBH,cAAAA,SAAS,CAAC,CAAD,CAAT;AAHiB;AAAA;;AAAA;AAAA;AAAA;AAKjBI,cAAAA,OAAO,CAACC,GAAR;;AALiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZC,YAAY;AAAA;AAAA;AAAA,KAAlB;;AASA,MAAMC,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEXlB,KAAK,CAACa,GAAN,0BAA4BR,IAAI,CAACS,GAAjC,EAFW;;AAAA;AAGjBH,cAAAA,SAAS,CAAC,IAAD,CAAT;AAHiB;AAAA;;AAAA;AAAA;AAAA;AAKjBI,cAAAA,OAAO,CAACC,GAAR;;AALiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZE,YAAY;AAAA;AAAA;AAAA,KAAlB;;AASA3B,EAAAA,SAAS,CAAC,YAAK;AACb,QAAM4B,MAAM,GAAGd,IAAI,CAACe,OAAL,CAAaC,IAAb,CAAkB,UAAAF,MAAM;AAAA,aAAIA,MAAM,CAACL,GAAP,KAAeP,EAAnB;AAAA,KAAxB,CAAf;AACA,QAAMG,MAAM,GAAGS,MAAM,GAAGA,MAAM,CAACT,MAAV,GAAmB,IAAxC;AACAC,IAAAA,SAAS,CAACD,MAAD,CAAT;AACD,GAJQ,EAIP,CAACH,EAAD,CAJO,CAAT;;AAMA,UAAQG,MAAR;AACE,SAAK,CAAL;AACE,aAAO;AAAQ,QAAA,OAAO,EAAEQ,YAAjB;AAA+B,QAAA,IAAI,EAAC,QAApC;AAA6C,QAAA,KAAK,EAAC;AAAnD,SAAoE,MAAC,eAAD;AAAiB,QAAA,IAAI,EAAEvB;AAAvB,QAApE,CAAP;;AACF,SAAK,CAAL;AACE,aAAO;AAAQ,QAAA,OAAO,EAAEuB,YAAjB;AAA+B,QAAA,IAAI,EAAC,QAApC;AAA6C,QAAA,KAAK,EAAC;AAAnD,SAAmF,MAAC,eAAD;AAAiB,QAAA,IAAI,EAAEtB;AAAvB,QAAnF,CAAP;;AACF,SAAK,CAAL;AACE,aAAO;AAAQ,QAAA,OAAO,EAAEqB,YAAjB;AAA+B,QAAA,IAAI,EAAC,QAApC;AAA6C,QAAA,KAAK,EAAC;AAAnD,mBAAP;;AACF;AACE,aAAO;AAAQ,QAAA,OAAO,EAAEL,UAAjB;AAA6B,QAAA,IAAI,EAAC,QAAlC;AAA2C,QAAA,KAAK,EAAC;AAAjD,SAA+E,MAAC,eAAD;AAAiB,QAAA,IAAI,EAAElB;AAAvB,QAA/E,CAAP;AARJ;AAUD,CAhDD;;AAkDA,IAAM4B,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,MAAMjB,IAAI,GAAGb,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACD,IAAV;AAAA,GAAN,CAAxB;AACA,MAAMkB,SAAS,GAAG/B,WAAW,CAAC,UAAAc,KAAK;AAAA,WAAIA,KAAK,CAACiB,SAAN,CAAgBC,OAApB;AAAA,GAAN,CAA7B;AAFsB,MAGdC,IAHc,GAGqBpB,IAHrB,CAGdoB,IAHc;AAAA,MAGRC,QAHQ,GAGqBrB,IAHrB,CAGRqB,QAHQ;AAAA,MAGEC,SAHF,GAGqBtB,IAHrB,CAGEsB,SAHF;AAAA,MAGab,GAHb,GAGqBT,IAHrB,CAGaS,GAHb;AAItB,SACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,GAAG,EAAEa,SAAV;AAAqB,IAAA,GAAG,EAAC;AAAzB,IADF,EAEE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,iBAAG,oBAAOF,IAAP,CAAH,EAAuB,GAAvB,EAA4BC,QAA5B,CADF,EAGI,CAACrB,IAAI,CAACuB,KAAN,IAAe,MAAC,SAAD,OAHnB,CAFF,EAQE,kBACE,MAAC,aAAD;AAAe,IAAA,IAAI,EAAEL,SAAS,CAACM,KAAV,CAAgBC,MAArC;AAA6C,IAAA,IAAI,EAAEjC;AAAnD,IADF,EAEE,MAAC,aAAD;AAAe,IAAA,IAAI,EAAE0B,SAAS,CAACQ,QAAV,CAAmBD,MAAxC;AAAgD,IAAA,IAAI,EAAE/B;AAAtD,IAFF,EAGE,MAAC,aAAD;AAAe,IAAA,IAAI,EAAEwB,SAAS,CAACS,IAAV,CAAeC,KAApC;AAA2C,IAAA,IAAI,EAAEnC;AAAjD,IAHF,CARF,EAaE,iBAAIO,IAAI,CAAC6B,SAAL,CAAeC,OAAnB,CAbF,CADF,CADF;AAmBD,CAvBD;;AAyBA,eAAeb,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUserPlus,faUserCheck, faUserClock, faHeart, faGift, faComment, } from '@fortawesome/free-solid-svg-icons';\nimport './home.scss';\nimport axios from 'axios';\n\nconst GreenInfoIcon = ({ icon, info }) => {\n  return(\n    <li className=\"greenicon_info_cont\">\n      <FontAwesomeIcon icon={icon} />\n      <p>{info}</p>\n    </li>\n  )\n}\n\nconst BtnFriend = () => {\n  const user = useSelector(state => state.user);\n  const id = useSelector(state => state.nav.notifications.id);\n  const [status, setStatus] = useState(0);\n\n  const sendFriend = async() => {\n    try{\n      await axios.get(`/friend/send/${user._id}`);\n      setStatus(1);\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  const acceptFriend = async() => {\n    try{\n      await axios.get(`/friend/accept/${user._id}`)\n      setStatus(0);\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  const cancelFriend = async() => {\n    try{\n      await axios.get(`/friend/cancel/${user._id}`)\n      setStatus(null);\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  useEffect(()=> {\n    const friend = user.friends.find(friend => friend._id === id);\n    const status = friend ? friend.status : null;\n    setStatus(status);\n  },[id]);\n\n  switch (status) {\n    case 0:\n      return <button onClick={cancelFriend} type=\"button\" title=\"Eliminar amigo\"><FontAwesomeIcon icon={faUserCheck} /></button>\n    case 1:\n      return <button onClick={cancelFriend} type=\"button\" title=\"Cancelar solicitud de amistad\"><FontAwesomeIcon icon={faUserClock} /></button>\n    case 2:\n      return <button onClick={acceptFriend} type=\"button\" title=\"Aceptar solicitud de amistad\">Aceptar</button>\n    default:\n      return <button onClick={sendFriend} type=\"button\" title=\"Enviar solicitud de amistad\"><FontAwesomeIcon icon={faUserPlus} /></button>\n  }\n}\n\nconst GreenHome = () => {\n  const user = useSelector(state => state.user);\n  const greenpost = useSelector(state => state.greenpost.current);\n  const { name, lastName, perfilImg, _id } = user;\n  return(\n    <div className=\"greenhome_main_cont animated fadeIn\">\n      <div className=\"user_info\">\n        <img src={perfilImg} alt=\"\"/>\n        <div className=\"user_name\">\n          <p><span>{name}</span>{\" \"}{lastName}</p>\n          {\n            !user.owner && <BtnFriend />\n          }\n        </div>\n        <ul>\n          <GreenInfoIcon info={greenpost.likes.length} icon={faHeart} />\n          <GreenInfoIcon info={greenpost.comments.length} icon={faComment} />\n          <GreenInfoIcon info={greenpost.wish.found} icon={faGift} />\n        </ul>\n        <p>{user.greenPost.history}</p>\n      </div>\n    </div>\n  )\n};\n\nexport default GreenHome;\n"]},"metadata":{},"sourceType":"module"}